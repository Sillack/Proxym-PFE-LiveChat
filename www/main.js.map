{"version":3,"sources":["./$_lazy_route_resource lazy namespace object","./projects/ngx-link-preview/src/lib/components/ngx-link-preview/ngx-link-preview-loading-spinner.ts","./projects/ngx-link-preview/src/lib/components/ngx-link-preview/ngx-link-preview.component.ts","./projects/ngx-link-preview/src/lib/components/ngx-link-preview/ngx-link-preview.component.html","./projects/ngx-link-preview/src/lib/ngx-link-preview.module.ts","./projects/ngx-link-preview/src/lib/services/ngx-link-preview-cache.service.ts","./projects/ngx-link-preview/src/lib/services/ngx-link-preview-loading.manager.ts","./projects/proxym/ngx-chat/src/lib/components/chat-filedrop/file-drop.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-filedrop/file-drop.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-message-input/chat-message-input.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-message-input/chat-message-input.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-message-link/chat-message-link.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-message-link/chat-message-link.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-message-list/chat-message-list.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-message-list/chat-message-list.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-message-text/chat-message-text.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-message/chat-message.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-message/chat-message.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-room-messages/chat-room-messages.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-room-messages/chat-room-messages.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-window-list/chat-window-list.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-window-list/chat-window-list.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-window-room/chat-window-room.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-window-room/chat-window-room.component.html","./projects/proxym/ngx-chat/src/lib/components/chat-window/chat-window.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat-window/chat-window.component.html","./projects/proxym/ngx-chat/src/lib/components/chat.component.ts","./projects/proxym/ngx-chat/src/lib/components/chat.component.html","./projects/proxym/ngx-chat/src/lib/components/communication/audio.component.ts","./projects/proxym/ngx-chat/src/lib/components/communication/audio.component.html","./projects/proxym/ngx-chat/src/lib/components/communication/video.component.ts","./projects/proxym/ngx-chat/src/lib/components/communication/video.component.html","./projects/proxym/ngx-chat/src/lib/components/icons/icons.module.ts","./projects/proxym/ngx-chat/src/lib/components/multi-user-chat/data.service.ts","./projects/proxym/ngx-chat/src/lib/components/multi-user-chat/multi-user-chat.component.ts","./projects/proxym/ngx-chat/src/lib/components/multi-user-chat/multi-user-chat.component.html","./projects/proxym/ngx-chat/src/lib/components/roster-contact/roster-contact.component.ts","./projects/proxym/ngx-chat/src/lib/components/roster-contact/roster-contact.component.html","./projects/proxym/ngx-chat/src/lib/components/roster-list/roster-list.component.ts","./projects/proxym/ngx-chat/src/lib/components/roster-list/roster-list.component.html","./projects/proxym/ngx-chat/src/lib/core/contact-avatar.ts","./projects/proxym/ngx-chat/src/lib/core/contact.ts","./projects/proxym/ngx-chat/src/lib/core/get-domain.ts","./projects/proxym/ngx-chat/src/lib/core/id-generator.ts","./projects/proxym/ngx-chat/src/lib/core/message-store.ts","./projects/proxym/ngx-chat/src/lib/core/message.ts","./projects/proxym/ngx-chat/src/lib/core/presence.ts","./projects/proxym/ngx-chat/src/lib/core/subscription.ts","./projects/proxym/ngx-chat/src/lib/core/utils-array.ts","./projects/proxym/ngx-chat/src/lib/core/utils-date.ts","./projects/proxym/ngx-chat/src/lib/core/utils-links.ts","./projects/proxym/ngx-chat/src/lib/core/utils-object.ts","./projects/proxym/ngx-chat/src/lib/core/utils-timeout.ts","./projects/proxym/ngx-chat/src/lib/directives/links.directive.ts","./projects/proxym/ngx-chat/src/lib/ngx-chat.module.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/abstract-stanza-builder.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/abstract-xmpp-plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/bookmark.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/http-file-upload.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/message-archive.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/message-carbons.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/message-state.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/message-uuid.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/message.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/muc-sub.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/multi-user-chat.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/ping.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/publish-subscribe.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/push.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/registration.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/roster.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/service-discovery.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/unread-message-count.plugin.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/xmpp-chat-adapter.service.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/xmpp-chat-connection.service.ts","./projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/xmpp-client-factory.service.ts","./projects/proxym/ngx-chat/src/lib/services/chat-background-notification.service.ts","./projects/proxym/ngx-chat/src/lib/services/chat-list-state.service.ts","./projects/proxym/ngx-chat/src/lib/services/chat-message-list-registry.service.ts","./projects/proxym/ngx-chat/src/lib/services/chat-service.ts","./projects/proxym/ngx-chat/src/lib/services/contact-factory.service.ts","./projects/proxym/ngx-chat/src/lib/services/log.service.ts","./projects/proxym/ngx-chat/src/lib/services/socket.io.service.ts","./src/app/app.component.ts","./src/app/app.component.html","./src/app/app.module.ts","./src/assets/accep.png","./src/assets/available.png","./src/assets/away.png","./src/assets/click.png","./src/assets/decli.png","./src/assets/dnd.png","./src/assets/file.png","./src/assets/file_attach.png","./src/assets/received.png","./src/assets/seen.png","./src/assets/sent.png","./src/environments/environment.ts","./src/main.ts","ws (ignored)","./lib/dns (ignored)","node-fetch (ignored)","webpack:///ws (ignored)?468d"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","/* tslint:disable:max-line-length */\nexport const NgxLinkPreviewLoadingSpinner = `\n<svg class=\"lds-message\" width=\"60px\"  height=\"60px\"  xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\" preserveAspectRatio=\"xMidYMid\"><g transform=\"translate(20 50)\">\n<circle cx=\"0\" cy=\"0\" r=\"7\" fill=\"#1B364C\" transform=\"scale(0.99275 0.99275)\">\n  <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.375s\" calcMode=\"spline\" keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\"></animateTransform>\n</circle>\n</g><g transform=\"translate(40 50)\">\n<circle cx=\"0\" cy=\"0\" r=\"7\" fill=\"#285072\" transform=\"scale(0.773605 0.773605)\">\n  <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.25s\" calcMode=\"spline\" keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\"></animateTransform>\n</circle>\n</g><g transform=\"translate(60 50)\">\n<circle cx=\"0\" cy=\"0\" r=\"7\" fill=\"#346B99\" transform=\"scale(0.42525 0.42525)\">\n  <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"-0.125s\" calcMode=\"spline\" keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\"></animateTransform>\n</circle>\n</g><g transform=\"translate(80 50)\">\n<circle cx=\"0\" cy=\"0\" r=\"7\" fill=\"#999999\" transform=\"scale(0.113418 0.113418)\">\n  <animateTransform attributeName=\"transform\" type=\"scale\" begin=\"0s\" calcMode=\"spline\" keySplines=\"0.3 0 0.7 1;0.3 0 0.7 1\" values=\"0;1;0\" keyTimes=\"0;0.5;1\" dur=\"1s\" repeatCount=\"indefinite\"></animateTransform>\n</circle>\n</g></svg>\n`;\n","import { Component, EventEmitter, Input, OnChanges, OnDestroy, Output, SimpleChanges } from '@angular/core';\nimport { OpenGraphMetaData } from '../../interfaces/open-graph-meta-data';\nimport { NgxLinkPreviewCacheService } from '../../services/ngx-link-preview-cache.service';\nimport { Observable, Subject, Subscription } from 'rxjs';\nimport { NgxLinkPreviewLoadingSpinner } from './ngx-link-preview-loading-spinner';\nimport { DomSanitizer } from '@angular/platform-browser';\nimport { NgxLinkPreviewLoadingManager } from '../../services/ngx-link-preview-loading.manager';\nimport { map } from 'rxjs/operators';\n\ntype HtmlLinkTarget = '_blank' | '_self' | '_parent' | '_top' | FrameName;\ntype FrameName = string;\n\n@Component({\n   selector: 'ngx-link-preview',\n   templateUrl: './ngx-link-preview.component.html',\n   styleUrls: ['./ngx-link-preview.component.scss']\n})\nexport class NgxLinkPreviewComponent implements OnChanges, OnDestroy {\n   /** Plain links string array */\n   @Input()\n   public links: string[] = [];\n\n   /** Input string to parse for links */\n   @Input()\n   public parseForLinksStr: string;\n\n   /** Method that does the API request, provide as class member arrow function from parent */\n   @Input()\n   public getApiEndpoint$: (requestUrl: string) => Observable<any>;\n\n   /** API route where to get the meta data from, component will build the full request url\n    * Schema: api.example.com/api/get-meta-data?url=d3d3LmV4YW1wbGUuY29t\n    */\n   @Input()\n   public apiRoute: string;\n\n   /** Target url will be attached as encodeURI(btoa(url)), so it must be decoded on the server */\n   @Input()\n   public queryParamName = 'url';\n\n   /** boolean: show image in preview */\n   @Input()\n   public showImage = true;\n\n   /** boolean: show site name in preview */\n   @Input()\n   public showSiteName = true;\n\n   /** boolean: show title in preview */\n   @Input()\n   public showTitle = true;\n\n   /** boolean: show description in preview */\n   @Input()\n   public showDescription = true;\n\n   /** boolean: show link url in preview */\n   @Input()\n   public showLinkUrl = false;\n\n   /** boolean: use cache to display previews faster on next rendering */\n   @Input()\n   public useCache = true;\n\n   /** number: max age the data cache of a link preview should be used */\n   @Input()\n   public maxCacheAgeMs = 1000 * 60 * 60 * 24 * 7; // 7 days\n\n   /** boolean: show loading indicator */\n   @Input()\n   public showLoadingIndicator = true;\n\n   /**\n    * boolean: whether the <a href=\"...\"></a> link should be clickable.\n    * This is a question of context security. Otherwise use (previewClick) event.\n    */\n   @Input()\n   public useHtmlLinkDefaultClickEvent = false;\n\n   /**\n    * HtmlLinkTarget: where the HTML link should be opened on click.\n    * Only has an effect if [useHtmlLinkDefaultClickEvent]=\"true\"\n    */\n   @Input()\n   public htmlLinkTarget: HtmlLinkTarget = '_blank';\n\n   /** Event emitter: on click to handle the click event, emits the clicked URL */\n   @Output()\n   public previewClicked = new EventEmitter<string>();\n\n   /** Scanned links[] from @Input() links & @Input() parseForLinks */\n   private scannedLinks: string[] = [];\n\n   /** Array of metadata objects where the preview is rendered from */\n   public previews: OpenGraphMetaData[] = [];\n\n   private loadingMgr = new NgxLinkPreviewLoadingManager();\n   public loadingSpinner = this.sanitizer.bypassSecurityTrustHtml(NgxLinkPreviewLoadingSpinner);\n   public showLoadingSpinner = false;\n\n   private subscriptions: Subscription[] = [];\n\n   constructor(private sanitizer: DomSanitizer, private cacheSvc: NgxLinkPreviewCacheService) {\n      this.subscribeLoadingMgrHasJobs();\n   }\n\n   ngOnDestroy(): void {\n      this.unsubscribeAll();\n   }\n\n   /**\n    * Preview will be refreshed every time a change is recognized\n    */\n   ngOnChanges(changes: SimpleChanges): void {\n      this.init();\n   }\n\n   /**\n    * Subscribe to loading manager has jobs stream\n    */\n   private subscribeLoadingMgrHasJobs(): void {\n      this.subscriptions.push(\n         this.loadingMgr.hasPendingJobs$.subscribe(hasJobs => {\n            this.showLoadingSpinner = hasJobs;\n         })\n      );\n   }\n\n   /**\n    * Unsubscribe all subscriptions\n    */\n   private unsubscribeAll(): void {\n      this.subscriptions.forEach((sub: Subscription) => {\n         sub.unsubscribe();\n      });\n   }\n\n   /**\n    * Init preview\n    */\n   private init(): void {\n      this.scannedLinks = [];\n      this.previews = [];\n      this.checkInputParameters();\n\n      // Find links in string\n      if (this.parseForLinksStr) {\n         // Parse for links and push to links\n         const links = this.parseStringForLinks(this.parseForLinksStr);\n         this.scannedLinks = this.scannedLinks.concat(links);\n      }\n      // Add links passed as string[]\n      if (this.links && this.links.length) {\n         this.scannedLinks = this.scannedLinks.concat(this.links);\n      }\n\n      for (const link of this.scannedLinks) {\n         this.loadCacheOrGet(link);\n      }\n   }\n\n   /**\n    * Load cache or get from api\n    */\n   private loadCacheOrGet(link: string): void {\n      const encodedLink = this.encodeUrlSafe(link);\n      const requestUrl = this.apiRoute + '?' + this.queryParamName + '=' + encodedLink;\n\n      // Try to load from cache, use encodedLink as key\n      const cacheItem = this.cacheSvc.getCacheItem(encodedLink);\n      if (this.useCache && cacheItem && !this.isCacheOutdated(cacheItem)) {\n         this.previews.push(cacheItem);\n      } else {\n         this.loadingMgr.addTask(encodedLink);\n         this.getApiEndpoint$(requestUrl)\n            .pipe(\n               map((resp: OpenGraphMetaData) => {\n                  resp.timestampMs = new Date().valueOf();\n                  return resp;\n               })\n            )\n            .subscribe((resp: OpenGraphMetaData) => {\n               this.cacheSvc.updateCacheItem(encodedLink, resp);\n               this.loadingMgr.removeTask(encodedLink);\n               this.previews.push(resp);\n            });\n      }\n   }\n\n   /**\n    * Check if cache item is outdated by max-cache-age\n    */\n   private isCacheOutdated(item: OpenGraphMetaData): boolean {\n      const now = new Date().valueOf();\n      const maxValidTimestamp = now - this.maxCacheAgeMs;\n      return maxValidTimestamp > item.timestampMs;\n   }\n\n   /**\n    * On link click emit to EventEmitter\n    */\n   public onLinkClick(url: string): void {\n      this.previewClicked.emit(url);\n   }\n   public disableDefaultLink(event: MouseEvent): void {\n      if (!this.useHtmlLinkDefaultClickEvent) {\n         event.preventDefault();\n      }\n   }\n\n   /**\n    * Encode string url safe\n    */\n   private encodeUrlSafe(url: string): string {\n      return encodeURI(btoa(url));\n   }\n\n   /**\n    * Check required input parameters\n    */\n   private checkInputParameters(): void {\n      if (!this.apiRoute) {\n         throw new Error('<ngx-link-preview></ngx-link-preview> Missing [apiRoute] input parameter');\n      }\n      if (!this.getApiEndpoint$) {\n         throw new Error('<ngx-link-preview></ngx-link-preview> Missing [getApiEndpoint$] input parameter');\n      }\n   }\n\n   /**\n    * Parse string for links\n    */\n   private parseStringForLinks(msg: string): string[] {\n      const links = msg.match(\n         /https?:\\/\\/(www\\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_+.~#?&\\/=]*)/gim\n      );\n\n      if (links) {\n         return links;\n      } else {\n         return [];\n      }\n   }\n\n   /**\n    * Get sanitized image url due data often contains url errors\n    */\n   public getSanitizedImageUrl(p: OpenGraphMetaData): string {\n      if (p['image'].startsWith('https')) {\n         return p['image'];\n      } else if (p['image'].startsWith('www')) {\n         return p['image'];\n      } else if (p['image'].startsWith('//www')) {\n         return 'https://' + p['image'].slice(2);\n      } else if (p['image'].startsWith('/yts/')) {\n         return 'https://' + p.source + p['image'];\n      }\n   }\n}\n","<div class=\"ngx-link-preview-container\">\n\n   <ng-container *ngFor=\"let p of previews\">\n\n      <div class=\"og-link-preview\" *ngIf=\"p.url\" (click)=\"onLinkClick(p.url)\">\n         <a class=\"row\" [href]=\"p.url\" (click)=\"disableDefaultLink($event)\" [target]=\"htmlLinkTarget\">\n\n            <div class=\"col preview-image\" [ngStyle]=\"{backgroundImage: 'url('+getSanitizedImageUrl(p)+')'}\">\n               <div class=\"image\" *ngIf=\"showImage && (p['og:image'] || p.image)\">\n                  <img [src]=\"getSanitizedImageUrl(p)\" alt=\"\">\n               </div>\n            </div>\n\n            <div class=\"col text-data\">\n               <div class=\"header\" *ngIf=\"showSiteName\">\n                  <div class=\"site-name\" *ngIf=\"p['og:site_name']\">\n                     {{ p['og:site_name'] }}\n                  </div>\n               </div>\n\n               <div class=\"title\" *ngIf=\"showTitle && (p['og:title'] || p.title)\">\n                  {{ p['og:title'] || p.title }}\n               </div>\n\n               <div class=\"description\" *ngIf=\"showDescription && (p['og:description'] || p.description)\">\n                  {{ p['og:description'] || p.description }}\n               </div>\n\n               <div class=\"footer\">\n                  <div class=\"url\" *ngIf=\"showLinkUrl && (p['og:url'] || p.url)\">\n                     {{ p['og:url'] || p.url }}\n                  </div>\n               </div>\n            </div>\n\n         </a><!-- a.row -->\n      </div><!-- og-link-preview -->\n\n   </ng-container><!-- *ngFor -->\n</div>\n\n<div class=\"loading-spinner\" *ngIf=\"showLoadingIndicator && showLoadingSpinner\">\n   <!-- Custom loading spinner -->\n   <ng-container>\n      <div class=\"wrapper-custom\" #ngContentLoading>\n         <ng-content></ng-content>\n      </div>\n   </ng-container>\n\n   <!-- Default loading spinner -->\n   <ng-container *ngIf=\"ngContentLoading.childNodes.length === 0\">\n      <div class=\"wrapper-default\" [innerHTML]=\"loadingSpinner\"></div>\n   </ng-container>\n</div>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { NgxLinkPreviewComponent } from './components/ngx-link-preview/ngx-link-preview.component';\nimport { NgxLinkPreviewCacheService } from './services/ngx-link-preview-cache.service';\n\n@NgModule({\n   declarations: [NgxLinkPreviewComponent],\n   exports: [NgxLinkPreviewComponent],\n   imports: [CommonModule],\n   providers: [NgxLinkPreviewCacheService]\n})\nexport class NgxLinkPreviewModule {}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class NgxLinkPreviewCacheService {\n   /** Holds the current cache state (RAM cache) */\n   private cache = {};\n\n   /** localStorage cache key */\n   private localStorageKey = 'NgxLinkPreviewCache_q16qy4aOCzm2';\n\n   constructor() {\n      this.loadCacheFromLocalStorage();\n   }\n\n   /**\n    * Try to load the cache from localstorage\n    */\n   private loadCacheFromLocalStorage(): void {\n      try {\n         this.cache = JSON.parse(localStorage.getItem(this.localStorageKey));\n      } catch (e) {\n         this.cache = {};\n      }\n   }\n\n   /**\n    * Update item in RAM cache\n    */\n   public updateCacheItem(cacheKey: string, data: any): void {\n      if (!this.cache) {\n         this.cache = {};\n      }\n      this.cache[cacheKey] = data;\n      this.saveCache();\n   }\n\n   /**\n    * Get item from cache\n    */\n   public getCacheItem(cacheKey: string): any {\n      let cacheData;\n      try {\n         cacheData = this.cache[cacheKey];\n      } catch (e) {\n         cacheData = undefined;\n      }\n\n      if (!cacheData) {\n         cacheData = undefined;\n      }\n\n      return cacheData;\n   }\n\n   /**\n    * Save whole cache to localStorage\n    */\n   public saveCache(): void {\n      try {\n         localStorage.setItem(this.localStorageKey, JSON.stringify(this.cache));\n      } catch (e) {\n         console.warn('Failed to save OgLinkPreviewCache in localStorage!', e);\n      }\n   }\n}\n","import { BehaviorSubject } from 'rxjs';\n\nexport class NgxLinkPreviewLoadingManager {\n   /** The loading stack, holding an item for each */\n   private loadingStack: string[] = [];\n\n   /** Observable to retrieve if has pending jobs */\n   public hasPendingJobs$ = new BehaviorSubject(false);\n\n   constructor() {}\n\n   /**\n    * Add task to stack\n    */\n   public addTask(name?: string): void {\n      name = this.getTaskName(name);\n      this.loadingStack.push(name);\n      this.emitHasPendingJobs();\n   }\n\n   /**\n    * Remove task from stack\n    */\n   public removeTask(name?: string): void {\n      name = this.getTaskName(name);\n      if (this.loadingStack.length) {\n         const taskIndex = this.loadingStack.indexOf(name);\n         if (taskIndex !== -1) {\n            this.loadingStack.splice(taskIndex, 1);\n         } else {\n            console.error(`[NgxLinkPreviewLoadingManager] Task [${name}] not found and can't be removed.`);\n         }\n      } else {\n         console.error('[NgxLinkPreviewLoadingManager] No pending task available for remove');\n      }\n      this.emitHasPendingJobs();\n   }\n\n   /**\n    * Get task name\n    */\n   private getTaskName(name: string): string {\n      return name ? name : 'UNKNOWN_TASK';\n   }\n\n   /**\n    * Emit if has loading jobs\n    */\n   private emitHasPendingJobs(): void {\n      if (this.loadingStack.length) {\n         this.hasPendingJobs$.next(true);\n      } else {\n         this.hasPendingJobs$.next(false);\n      }\n   }\n}\n","import {Component, EventEmitter, HostListener, Input, OnInit, Output} from '@angular/core';\n\n@Component({\n    selector: 'ngx-chat-filedrop',\n    templateUrl: './file-drop.component.html',\n    styleUrls: ['./file-drop.component.less']\n})\nexport class FileDropComponent implements OnInit {\n\n    @Output()\n    public fileUpload = new EventEmitter<File>();\n\n    @Input()\n    dropMessage: string;\n\n    @Input()\n    enabled = true;\n\n    isDropTarget = false;\n\n    constructor() { }\n\n    ngOnInit() {\n    }\n\n    @HostListener('dragover', ['$event'])\n    @HostListener('dragenter', ['$event'])\n    onDragOver(event: any) {\n        if (this.enabled) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.isDropTarget = true;\n        }\n    }\n\n    @HostListener('dragleave', ['$event'])\n    @HostListener('dragexit', ['$event'])\n    onDragLeave(event: any) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.isDropTarget = false;\n    }\n\n    @HostListener('drop', ['$event'])\n    async onDrop(event: any) {\n        if (this.enabled) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            this.isDropTarget = false;\n\n            // tslint:disable-next-line:prefer-for-of\n            for (let i = 0; i < event.dataTransfer.items.length; i++) {\n                const dataTransferItem = event.dataTransfer.items[i];\n                if (dataTransferItem.kind === 'file') {\n                    this.fileUpload.emit(dataTransferItem.getAsFile());\n                }\n            }\n        }\n    }\n\n}\n","<div>\n    <div class=\"drop-message\"\n         [class.drop-message--visible]=\"isDropTarget\">\n        {{dropMessage}}\n    </div>\n    <div>\n        <ng-content>\n\n        </ng-content>\n    </div>\n</div>\n","import {Component, ElementRef, Inject, Input, OnChanges, OnInit, ViewChild} from '@angular/core';\nimport {Contact} from '../../core/contact';\nimport {MultiUserChatPlugin, Room} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\n\n@Component({\n    selector: 'ngx-chat-message-input',\n    templateUrl: './chat-message-input.component.html',\n    styleUrls: ['./chat-message-input.component.less']\n})\nexport class ChatMessageInputComponent implements OnInit, OnChanges {\n\n    @Input()\n    public contact: Contact;\n\n    @Input()\n    public room: Room;\n\n    public message = '';\n\n    @ViewChild('chatInput')\n    chatInput: ElementRef;\n\n    @Input()\n    emoji;\n\n\n    constructor(@Inject(ChatServiceToken) public chatService: ChatService) {\n    }\n    ngOnChanges() {\n        this.message = this.message + this.emoji;\n    }\n    ngOnInit() {\n\n    }\n    onSendMessage() {\n        if (this.message.trim().length > 0) {\n            if (this.room) {\n                this.chatService.getPlugin(MultiUserChatPlugin).sendMessage(this.room, this.message);\n            } else {\n                this.chatService.sendMessage(this.contact.jidBare.toString(), this.message);\n            }\n            this.message = '';\n        }\n        return false;\n    }\n\n\n    focus() {\n        this.chatInput.nativeElement.focus();\n    }\n\n}\n","<textarea class=\"chat-input\"\n          #chatInput\n          [(ngModel)]=\"message\"\n          (keydown.enter)=\"onSendMessage()\"\n          cdkTextareaAutosize\n          cdkAutosizeMinRows=\"1\"\n          cdkAutosizeMaxRows=\"5\"\n          placeholder=\"{{chatService.translations.placeholder}}\"></textarea>\n","import {PlatformLocation} from '@angular/common';\nimport {Component, Inject, InjectionToken, OnInit, Optional} from '@angular/core';\nimport {Router} from '@angular/router';\nimport {HttpClient} from '@angular/common/http';\nimport { delay } from 'rxjs/operators';\n\nexport interface LinkOpener {\n    openLink(url: string): void;\n}\n\n/**\n * You can provide your own implementation for {@link LinkOpener} to override link opening e.g. when using Cordova.\n */\nexport const LinkOpenerToken = new InjectionToken<LinkOpener>('pazznetworkNgxChatLinkOpener');\ndeclare var require: any;\n@Component({\n    selector: 'ngx-chat-message-link',\n    templateUrl: './chat-message-link.component.html',\n    styleUrls: ['./chat-message-link.component.less']\n})\nexport class ChatMessageLinkComponent implements OnInit {\n    link: string;\n    public links = ['https://api.linkpreview.net/?key=171b4f88b0a3251101568e0f1ef7afb3&q=' +\n    this.link];\n    imgFile = require('../../../../../../../src/assets/file_attach.png');\n    public colors2 = [\n        '',\n        'red',\n        'pink',\n        'purple',\n        'deep-purple',\n        'indigo',\n        'blue',\n        'light-blue',\n        'cyan',\n        'teal',\n        'green',\n        'light-green',\n        'lime',\n        'yellow',\n        'amber',\n        'orange',\n        'deep-orange',\n        'brown',\n        'grey',\n        'blue-grey'\n    ];\n    public colors = [\n        '',\n        'blue',\n        'amber',\n        'teal'\n    ];\n    text: string;\n\n    constructor(private router: Router,\n                private platformLocation: PlatformLocation,\n                private httpClient: HttpClient,\n                @Optional() @Inject(LinkOpenerToken) private linkOpener: LinkOpener) { }\n\n    ngOnInit() {\n        this.links = ['https://api.linkpreview.net/?key=171b4f88b0a3251101568e0f1ef7afb3&q=' +\n            this.link];\n    }\n    public previewClick(link: string): void {\n        alert('Link:\\n' + link + '\\nwas clicked!');\n    }\n\n    onClick($event: Event) {\n        if (this.linkOpener) {\n            $event.preventDefault();\n            this.linkOpener.openLink(this.link);\n        } else if (this.isInApp()) {\n            $event.preventDefault();\n            const linkParser = document.createElement('a');\n            linkParser.href = this.link;\n            this.router.navigateByUrl(linkParser.pathname);\n        }\n    }\n\n    private isInApp() {\n        return this.link.startsWith(this.appUrl());\n    }\n\n    private appUrl() {\n        return window.location.protocol + '//' + window.location.host + this.platformLocation.getBaseHrefFromDOM();\n    }\n    public apiCallbackFn = route => {\n        // return this.http.get(route);\n\n        // Hard code for demo purposes:\n\n        return this.httpClient.get('https://api.linkpreview.net/?key=171b4f88b0a3251101568e0f1ef7afb3&q=' +\n            this.link).\n        pipe(delay(2500));\n    }\n\n}\n","<a href=\"{{link}}\" target=\"_blank\" rel=\"noopener\" (click)=\"onClick($event)\">{{text}}</a>\n<div *ngIf=\"(link.includes('.com') || link.includes('.fr') ) && !link.includes('https://www.uib-net.com/#/app/public/offre/content') \">\n<ngx-link-preview\n                  apiRoute=\"demo\"\n                  [links]=\"links\"\n                  [getApiEndpoint$]=\"apiCallbackFn\">\n</ngx-link-preview>\n</div>\n\n<div *ngIf=\"!link.includes('.jpg') && !link.includes('.png') && !link.includes('.jpeg') && !link.includes('.com') && !link.includes('.fr') &&\n!link.includes('.mp4')\">\n    <a href=\"{{link}}\" target=\"_blank\" rel=\"noopener\" (click)=\"onClick($event)\">  <img [src]=\"imgFile\" style=\"max-width: 73px;\"/></a>\n\n</div>\n\n\n","import {Component, ElementRef, Inject, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewChild} from '@angular/core';\nimport {Subscription} from 'rxjs';\nimport {Contact} from '../../core/contact';\nimport {Direction} from '../../core/message';\nimport {ChatListStateService} from '../../services/chat-list-state.service';\nimport {ChatMessageListRegistryService} from '../../services/chat-message-list-registry.service';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\n\n@Component({\n    selector: 'ngx-chat-message-list',\n    templateUrl: './chat-message-list.component.html',\n    styleUrls: ['./chat-message-list.component.less']\n})\nexport class ChatMessageListComponent implements OnInit, OnDestroy, OnChanges {\n\n    @Input()\n    contact: Contact;\n\n    @Input()\n    showAvatars: boolean;\n\n    @ViewChild('messageArea')\n    chatMessageAreaElement: ElementRef<HTMLElement>;\n\n    private messageSubscription: Subscription;\n    Direction = Direction;\n\n    constructor(public chatListService: ChatListStateService,\n                @Inject(ChatServiceToken) public chatService: ChatService,\n                private chatMessageListRegistry: ChatMessageListRegistryService) {\n    }\n\n    ngOnInit() {\n        this.messageSubscription = this.contact.messages$.subscribe(() => {\n            this.scheduleScrollToLastMessage();\n        });\n        this.chatMessageListRegistry.incrementOpenWindowCount(this.contact);\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        const contact = changes.contact;\n\n        if (contact && contact.previousValue && contact.currentValue) {\n            this.chatMessageListRegistry.decrementOpenWindowCount(contact.previousValue);\n            this.chatMessageListRegistry.incrementOpenWindowCount(contact.currentValue);\n        }\n\n        if (contact && contact.currentValue) {\n            this.scheduleScrollToLastMessage();\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.messageSubscription.unsubscribe();\n        this.chatMessageListRegistry.decrementOpenWindowCount(this.contact);\n    }\n\n    acceptSubscriptionRequest(event: Event) {\n        event.preventDefault();\n        this.chatService.addContact(this.contact.jidBare.toString());\n    }\n\n    denySubscriptionRequest(event: Event) {\n        event.preventDefault();\n        this.chatService.removeContact((this.contact.jidBare.toString()));\n        this.chatListService.closeChat(this.contact);\n    }\n\n    private scheduleScrollToLastMessage() {\n        setTimeout(() => this.scrollToLastMessage(), 0);\n    }\n\n    private scrollToLastMessage() {\n        if (this.chatMessageAreaElement) {\n            this.chatMessageAreaElement.nativeElement.scrollTop = this.chatMessageAreaElement.nativeElement.scrollHeight;\n        }\n    }\n\n}\n","<div class=\"chat-messages\" #messageArea>\n    <ng-container *ngFor=\"let dateMessagesGroup of contact.dateMessagesGroups\">\n        <div class=\"chat-messages-date-group\">{{dateMessagesGroup.date | date:chatService.translations.dateFormat:undefined:chatService.translations.locale}}</div>\n        <ngx-chat-message *ngFor=\"let message of dateMessagesGroup.messages\"\n                          [nick]=\"message.direction === Direction.in ? contact.name : ''\"\n                          [avatar]=\"contact.avatar\"\n                          [message]=\"message\"\n                          [contact]=\"contact\"\n                          [isRoom]=\"false\"\n                          [showAvatars]=\"showAvatars\">\n        </ngx-chat-message>\n    </ng-container>\n    <div class=\"chat-messages-empty\" *ngIf=\"contact.messages.length === 0\">\n        {{chatService.translations.noMessages}}\n    </div>\n    <div class=\"chat-message chat-message--in\" *ngIf=\"contact.pendingIn$ | async\">\n        {{ this.chatService.addContact(this.contact.jidBare.toString())}}\n        <div class=\"chat-message-text chat-message-text--no-avatar\">\n            <span>\n                {{chatService.translations.subscriptionRequestMessage}}\n            </span>\n          <!--  <ul class=\"chat-presence-subscription-actions\">\n                <li>\n                    <a (click)=\"acceptSubscriptionRequest($event)\" href=\"#\">{{chatService.translations.acceptSubscriptionRequest}}</a>\n                </li>\n                <li>\n                    <a (click)=\"denySubscriptionRequest($event)\" href=\"#\">{{chatService.translations.denySubscriptionRequest}}</a>\n                </li>\n            </ul>-->\n        </div>\n    </div>\n</div>\n","import {Component, Input, OnInit} from '@angular/core';\n\n@Component({\n  selector: 'ngx-chat-message-text',\n  template: `<span *ngFor=\"let line of lines; last as isLast\">{{line}}<br *ngIf=\"!isLast\"/></span>`\n})\nexport class ChatMessageTextComponent implements OnInit {\n\n  @Input() text: string;\n  lines: string[];\n\n  constructor() { }\n\n  ngOnInit() {\n    if (this.text) {\n      this.lines = this.text.split('\\n');\n    }\n  }\n\n}\n","import {HttpClient} from '@angular/common/http';\nimport {Component, Inject, Input, OnInit} from '@angular/core';\nimport {Contact} from '../../core/contact';\nimport {Message, MessageState} from '../../core/message';\nimport {extractUrls} from '../../core/utils-links';\nimport {MessageStatePlugin, StateDate} from '../../services/adapters/xmpp/plugins/message-state.plugin';\nimport {XmppChatAdapter} from '../../services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\n\nexport const MAX_IMAGE_SIZE = 250 * 1024;\ndeclare var require: any;\ndeclare var img: any;\n\n@Component({\n    selector: 'ngx-chat-message',\n    templateUrl: './chat-message.component.html',\n    styleUrls: ['./chat-message.component.less']\n})\n\n\nexport class ChatMessageComponent implements OnInit {\n\n    @Input()\n    showAvatars: boolean;\n\n    @Input()\n    avatar?: string;\n\n    @Input()\n    message: Message;\n\n    @Input()\n    nick: string;\n\n    @Input()\n    isRoom = false;\n\n    @Input()\n    contact: Contact;\n\n    imageLink: string;\n    // \n    MessageState = MessageState;\n\n    imgReceived = require('../../../../../../../src/assets/received.png');\n    imgSent = require('../../../../../../../src/assets/sent.png');\n    imgSeen = require('../../../../../../../src/assets/seen.png');\n    imgDec = require('../../../../../../../src/assets/decli.png');\n    imgAcc = require('../../../../../../../src/assets/accep.png');\n\n    public sentMessageTitle: string;\n    public receivedMessageTitle: string;\n    public seenMessageTitle: string;\n\n    private messageStatePlugin: MessageStatePlugin;\n\n    constructor(\n        @Inject(ChatServiceToken) public chatService: ChatService,\n        private httpClient: HttpClient,\n    ) {\n        this.messageStatePlugin = this.chatService.getPlugin(MessageStatePlugin);\n        this.seenMessageTitle = 'SEEN BY RECIPIENT';\n        this.sentMessageTitle = 'SENT';\n        this.receivedMessageTitle = 'RECEIVED BY RECIPIENT';\n    }\n\n    ngOnInit() {\n        this.tryFindImageLink();\n    }\n\n    private async tryFindImageLink() {\n        if (this.chatService instanceof XmppChatAdapter) {\n            for (const url of extractUrls(this.message.body)) {\n                try {\n                    const headRequest = await this.httpClient.head(url, {observe: 'response'}).toPromise();\n                    const contentType = headRequest.headers.get('Content-Type');\n                    const isImage = contentType && contentType.startsWith('image');\n                    const contentLength = headRequest.headers.get('Content-Length');\n                    if (isImage && parseInt(contentLength, 10) < MAX_IMAGE_SIZE) {\n                        this.imageLink = url;\n                        break;\n                    }\n                } catch (e) {\n                }\n            }\n        }\n    }\n\n    getMessageState() {\n        if (this.message.state) {\n            return this.message.state;\n        } else if (this.messageStatePlugin && this.contact) {\n            const date = this.message.datetime;\n            const states = this.messageStatePlugin.getContactMessageState(this.contact.jidBare.toString());\n            return this.getStateForDate(date, states);\n        }\n    }\n\n    private getStateForDate(date: Date, states: StateDate) {\n        if (date <= states.lastRecipientSeen) {\n            return MessageState.RECIPIENT_SEEN;\n        } else if (date <= states.lastRecipientReceived) {\n            return MessageState.RECIPIENT_RECEIVED;\n        } else if (date <= states.lastSent) {\n            return MessageState.SENT;\n        }\n    }\n}\n","<div class=\"chat-message\" *ngIf=\"!message.body.includes('Video Call:') && !message.body.includes('Audio Call:') && !message.body.includes('Video call:') && !message.body.includes('Audio call:')\" style=\"margin-right: 0.6em;\"\n     [ngClass]=\"{'chat-message--in': message.direction === 'in', 'chat-message--out': message.direction === 'out'}\">\n    <div *ngIf=\"showAvatars\" class=\"chat-message-avatar\">\n        <img *ngIf=\"message.direction === 'in'\" [src]=\"avatar\"/>\n        <img *ngIf=\"message.direction === 'out'\" [src]=\"chatService.userAvatar$ | async\"/>\n    </div>\n    <div *ngIf=\"isRoom == true && !message.body.toString().includes('https://www.uib-net.com/#/app/public/offre/content')\"   style=\"margin-top: 10px;\n;\n  padding: 0.5em 0.5em 0em 0.5em;     margin-bottom: 10px;\n\n  font-size: 14px;\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n        <span [ngxChatLinks]=\"message.body\"></span>\n\n    </div>\n\n    <div *ngIf=\"isRoom == false && !imageLink && !message.body.toString().includes('.mp4') && !message.body.toString().includes('https://www.uib-net.com/#/app/public/offre/content')\" class=\"chat-message-text\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n        <span [ngxChatLinks]=\"message.body\"></span>\n\n    </div>\n    <div *ngIf=\" message.body.toString().includes('.mp4') \" class=\"chat-message-text\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n        <span [ngxChatLinks]=\"message.body\"></span>\n        <mat-video [overlay]=\"true\" [playsinline]=\"false\" [fullscreen]=\"false\"  [src]=\"message.body\"></mat-video>\n    </div>\n\n    <div *ngIf=\"message.body.toString().includes('https://www.uib-net.com/#/app/public/offre/content')\" class=\"chat-message-text\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n\n        <mdb-carousel class=\"carousel slide carousel-fade\" [animation]=\"'fade'\"> <mdb-carousel-item> <div class=\"view w-100\"> <img class=\"d-block w-100\" src=\"https://net.uib.com.tn/UIB-OC-BO/uploads/offers/-Carte-Platinum-_list_436564861868214.jpg\" alt=\"Carte Platinum\"> <div class=\"mask rgba-black-light waves-light\" mdbWavesEffect></div> </div> <div class=\"carousel-caption\"> <h5 class=\"h3-responsive\">Carte Platinum</h5> <p style=\"margin-bottom: -1px; \">Accdez  la classe PLATINUM.</p> </div> </mdb-carousel-item> <mdb-carousel-item> <div class=\"view w-100\"> <img class=\"d-block w-100\" src=\"https://net.uib.com.tn/UIB-OC-BO/uploads/offers/-Compte-PLATINE_list_435802979778582.jpg\" alt=\"Compte PLATINE\"> <div class=\"mask rgba-black-strong waves-light\" mdbWavesEffect></div> </div> <div class=\"carousel-caption\"> <h5 class=\"h3-responsive\">Compte PLATINE</h5> <p style=\"margin-bottom: -1px; \">A la hauteur de vos ambitions.</p> </div> </mdb-carousel-item> <mdb-carousel-item> <div class=\"view w-100\"> <img class=\"d-block w-100\" src=\"https://net.uib.com.tn/UIB-OC-BO/uploads/offers/Pack--PLATINE_list_435234346016342.jpg\" alt=\"Pack  PLATINE\"> <div class=\"mask rgba-black-slight waves-light\" mdbWavesEffect></div> </div> <div class=\"carousel-caption\"> <h5 class=\"h3-responsive\">Pack  PLATINE</h5> <p style=\"margin-bottom: -1px; \">La cl de tous les privilges.</p> </div> </mdb-carousel-item> </mdb-carousel>\n\n    </div>\n    <div class=\"chat-message-image-wrapper\" *ngIf=\"imageLink\">\n       <a [href]=\"message.body\"><img class=\"chat-message-image\" [src]=\"imageLink\"/></a>\n    </div>\n    <div class=\"chat-message-footer\">\n        <small class=\"chat-message-datetime\">{{message.datetime | date:chatService.translations.timeFormat}}</small>\n\n        <small *ngIf=\"isRoom == false\" title=\"{{nick}}\" class=\"chat-message-name\">\n\n            <ng-container *ngIf=\"message.direction === 'out'\" [ngSwitch]=\"getMessageState()\">\n\n                <ng-container *ngSwitchCase=\"MessageState.SENT\">\n\n                    <img [src]=\"imgSent\" [title]=\"sentMessageTitle\" class=\"received\"/>\n\n                </ng-container>\n\n                <ng-container *ngSwitchCase=\"MessageState.RECIPIENT_RECEIVED\">\n\n                    <img [src]=\"imgReceived\" [title]=\"receivedMessageTitle\" class=\"received\"/>\n\n                </ng-container>\n\n                <ng-container *ngSwitchCase=\"MessageState.RECIPIENT_SEEN\">\n\n                    <span class=\"state--seen\">\n\n                    <img [src]=\"imgSeen\" [title]=\"seenMessageTitle\" class=\"received seen\"/>\n\n                    </span>\n\n                </ng-container>\n\n            </ng-container>\n\n        </small>\n\n\n        <small *ngIf=\"isRoom == true\" title=\"{{nick}}\" style=\"  display: inline-block;\n  max-width: 9em;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  vertical-align: text-top;\n  margin-left: 18px;\n  margin-right: -3px;\n  margin-top: -4px;\">\n        {{nick}}\n            <ng-container *ngIf=\"message.direction === 'out'\" [ngSwitch]=\"getMessageState()\">\n\n                <ng-container *ngSwitchCase=\"MessageState.SENT\">\n\n                    <img [src]=\"imgSent\" [title]=\"sentMessageTitle\" class=\"received\"/>\n\n                </ng-container>\n\n                <ng-container *ngSwitchCase=\"MessageState.RECIPIENT_RECEIVED\">\n\n                    <img [src]=\"imgReceived\" [title]=\"receivedMessageTitle\" class=\"received\"/>\n\n                </ng-container>\n\n                <ng-container *ngSwitchCase=\"MessageState.RECIPIENT_SEEN\">\n\n                    <span class=\"state--seen\">\n\n                    <img [src]=\"imgSeen\" [title]=\"seenMessageTitle\" class=\"received seen\"/>\n\n                    </span>\n\n                </ng-container>\n\n            </ng-container>\n\n        </small>\n\n    </div>\n</div>\n\n\n<div class=\"chat-message\" *ngIf=\"message.body.includes('call')\" style=\"margin-left: 4.0em;margin-right: 4.6em;\"\n     [ngClass]=\"{'chat-message--in': message.direction === 'in', 'chat-message--out': message.direction === 'out'}\">\n    <div *ngIf=\"showAvatars\" class=\"chat-message-avatar\">\n        <img *ngIf=\"message.direction === 'in'\" [src]=\"avatar\"/>\n        <img *ngIf=\"message.direction === 'out'\" [src]=\"chatService.userAvatar$ | async\"/>\n    </div>\n    <div class=\"chat-message-text\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n        <span [ngxChatLinks]=\"message.body\"></span>\n    </div>\n    <div class=\"chat-message-image-wrapper\" *ngIf=\"imageLink\">\n        <img class=\"chat-message-image\" [src]=\"imageLink\"/>\n    </div>\n    <div class=\"chat-message-footer\">\n        <small class=\"chat-message-datetime\">{{message.datetime | date:chatService.translations.timeFormat}}</small>\n        <img [src]=\"imgDec\"  class=\"chat-message-avatar\" style=\"width: 32%; height: 32%; margin-left: 18px; margin-top: -8px;\" />\n        <small title=\"{{nick}}\" class=\"chat-message-name\">\n\n\n        </small>\n\n\n    </div>\n</div>\n\n\n<div class=\"chat-message\" *ngIf=\"message.body.substring(0,1) == 'A' || message.body.substring(0,1) == 'V' \" style=\"margin-left: 4.0em;margin-right: 4.6em;\"\n     [ngClass]=\"{'chat-message--in': message.direction === 'in', 'chat-message--out': message.direction === 'out'}\">\n    <div *ngIf=\"showAvatars\" class=\"chat-message-avatar\">\n        <img *ngIf=\"message.direction === 'in'\" [src]=\"avatar\"/>\n        <img *ngIf=\"message.direction === 'out'\" [src]=\"chatService.userAvatar$ | async\"/>\n    </div>\n    <div class=\"chat-message-text\" [ngClass]=\"{'chat-message-text--no-avatar':!showAvatars}\">\n\n        <span [ngxChatLinks]=\"message.body\"></span>\n    </div>\n    <div class=\"chat-message-image-wrapper\" *ngIf=\"imageLink\">\n        <img class=\"chat-message-image\" [src]=\"imageLink\"/>\n    </div>\n    <div class=\"chat-message-footer\">\n        <small class=\"chat-message-datetime\">{{message.datetime | date:chatService.translations.timeFormat}}</small>\n        <img [src]=\"imgAcc\"  class=\"chat-message-avatar\" style=\"width: 32%; height: 32%; margin-left: 18px; margin-top: -8px;\" />\n\n        <small title=\"{{nick}}\" class=\"chat-message-name\">\n\n\n        </small>\n\n\n    </div>\n</div>\n\n\n\n\n\n","import {Component, ElementRef, Inject, Input, OnChanges, OnDestroy, OnInit, SimpleChanges, ViewChild} from '@angular/core';\nimport {JID} from '@xmpp/jid';\nimport {Subscription} from 'rxjs';\nimport {Contact} from '../../core/contact';\nimport {Room} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\nimport {ContactFactoryService} from '../../services/contact-factory.service';\n\n@Component({\n    selector: 'ngx-chat-room-messages',\n    templateUrl: './chat-room-messages.component.html',\n    styleUrls: ['./chat-room-messages.component.less']\n})\n// TODO: de-duplicate with ChatMessageListComponent\nexport class ChatRoomMessagesComponent implements OnInit, OnChanges, OnDestroy {\n\n    @Input()\n    room: Room;\n\n    @ViewChild('messageArea')\n    chatMessageAreaElement: ElementRef<HTMLElement>;\n\n    private messageSubscription: Subscription;\n\n    constructor(@Inject(ChatServiceToken) public chatService: ChatService,\n                private contactFactory: ContactFactoryService) {\n    }\n\n    ngOnInit() {\n        this.messageSubscription = this.room.messages$.subscribe(() => {\n            this.scheduleScrollToLastMessage();\n        });\n        console.log(\"aniuys\", this.room.messages);\n    }\n\n    ngOnChanges(changes: SimpleChanges) {\n        const room = changes.room;\n\n        if (room && room.currentValue) {\n            this.scheduleScrollToLastMessage();\n        }\n    }\n\n    ngOnDestroy(): void {\n        this.messageSubscription.unsubscribe();\n    }\n\n    getOrCreateContactWithFullJid(fullJid: JID): Contact {\n        let matchingContact = this.chatService.contacts$.getValue().find(\n            contact => contact.jidFull.equals(fullJid)\n        );\n\n        if (!matchingContact) {\n            matchingContact = this.contactFactory.createContact(fullJid.toString(), fullJid.resource);\n            this.chatService.contacts$.next([matchingContact].concat(this.chatService.contacts$.getValue()));\n        }\n\n        return matchingContact;\n    }\n\n    private scheduleScrollToLastMessage() {\n        setTimeout(() => this.scrollToLastMessage(), 0);\n    }\n\n    private scrollToLastMessage() {\n        if (this.chatMessageAreaElement) {\n            this.chatMessageAreaElement.nativeElement.scrollTop = this.chatMessageAreaElement.nativeElement.scrollHeight;\n        }\n    }\n}\n","<div class=\"chat-messages\" #messageArea>\n    <ngx-chat-message *ngFor=\"let message of room.messages\"\n                      [message]=\"message\"\n                      [avatar]=\"getOrCreateContactWithFullJid(message.from).avatar\"\n                      [showAvatars]=\"true\"\n                      [isRoom]=\"true\"\n                      [nick]=\"getOrCreateContactWithFullJid(message.from).name\">\n    </ngx-chat-message>\n    <div class=\"chat-messages-empty\" *ngIf=\"room.messages.length === 0\">\n        {{chatService.translations.noMessages}}\n    </div>\n</div>\n","import {animate, state, style, transition, trigger} from '@angular/animations';\nimport {Component, Input} from '@angular/core';\nimport {ChatListStateService} from '../../services/chat-list-state.service';\n\n@Component({\n    selector: 'ngx-chat-window-list',\n    templateUrl: './chat-window-list.component.html',\n    styleUrls: ['./chat-window-list.component.less'],\n    animations: [\n        trigger('rosterVisibility', [\n            state('hidden', style({\n                right: '1em',\n            })),\n            state('shown', style({\n                right: '15em',\n            })),\n            transition('hidden => shown', animate('400ms ease')),\n            transition('shown => hidden', animate('400ms ease'))\n        ])\n    ]\n})\nexport class ChatWindowListComponent {\n\n    @Input()\n    rosterState: string;\n\n    constructor(public chatListService: ChatListStateService) {\n    }\n\n}\n","<div class=\"chat-list\" [@rosterVisibility]=\"rosterState\">\n    <div *ngFor=\"let chatWindowState of (chatListService.openChats$ | async)\">\n        <ngx-chat-window [chatWindowState]=\"chatWindowState\"></ngx-chat-window>\n    </div>\n</div>\n","import {ChangeDetectorRef, Component, Inject, Input, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {Contact} from '../../core/contact';\nimport {Presence} from '../../core/presence';\nimport {ChatListStateService, ChatWindowState} from '../../services/chat-list-state.service';\nimport {ChatMessageInputComponent} from '../chat-message-input/chat-message-input.component';\nimport {HttpFileUploadPlugin} from '../../services/adapters/xmpp/plugins/http-file-upload.plugin';\nimport {Subject} from 'rxjs';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\nimport {SocketIOService} from '../../services/socket.io.service';\nimport {XmppChatAdapter} from '../../services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {filter, takeUntil} from 'rxjs/operators';\nimport {Direction} from '../../core/message';\nimport {formatDate} from '@angular/common';\nimport {parse} from 'ltx';\nimport {MultiUserChatPlugin, Room, RoomSummary} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {MultiUserChatComponent} from '../multi-user-chat/multi-user-chat.component';\n\n@Component({\n  selector: 'ngx-chat-window-room',\n  templateUrl: './chat-window-room.component.html',\n  styleUrls: ['./chat-window-room.component.less']\n})\nexport class ChatWindowRoomComponent implements OnInit, OnDestroy {\n\n  contact: Contact;\n\n  presence = Presence;\n\n  @Input()\n  public chatWindowState: ChatWindowState;\n\n  @ViewChild(ChatMessageInputComponent)\n  messageInput: ChatMessageInputComponent;\n\n  multiUserChatPlugin: MultiUserChatPlugin;\n  roomJid: string;\n\n  allRooms: RoomSummary[] = [];\n\n  httpFileUploadPlugin: HttpFileUploadPlugin;\n\n  private ngDestroy = new Subject<void>();\n\n  imgSendMessage = require('../../../../../../../src/assets/click.png');\n  imgFileMessage = require('../../../../../../../src/assets/file.png');\n\n  today = new Date();\n  jstoday = '';\n\n  @Input()\n  selectedRoom: Room = null ;\n\n  constructor(\n      @Inject(ChatServiceToken) public chatService: ChatService,\n      private chatListService: ChatListStateService,\n      private changeDetector: ChangeDetectorRef,\n      private socketIOService: SocketIOService,\n      @Inject(ChatServiceToken) public chatServicee: XmppChatAdapter,\n      @Inject(ChatServiceToken) public multiUserChatComponent: MultiUserChatComponent,\n  ) {\n    this.multiUserChatPlugin = chatService.getPlugin(MultiUserChatPlugin);\n    this.httpFileUploadPlugin = this.chatService.getPlugin(HttpFileUploadPlugin);\n\n\n  }\n\n  ngOnInit() {\n    console.log(\"anioss\", this.multiUserChatComponent.selectedRoom);\n  }\n\n  ngOnDestroy() {\n    this.ngDestroy.next();\n    this.ngDestroy.complete();\n  }\n\n  public onClickHeader() {\n    this.chatWindowState.isCollapsed = !this.chatWindowState.isCollapsed;\n  }\n  delay(ms: number) {\n    return new Promise( resolve => setTimeout(resolve, ms) );\n  }\n\n  public onClickClose() {\n    this.chatListService.closeChat(this.chatWindowState.contact);\n  }\n\n  sendMessage() {\n    this.messageInput.onSendMessage();\n  }\n\n  async uploadFile(file: File) {\n    const url = await this.httpFileUploadPlugin.upload(file);\n    this.chatService.sendMessage(this.chatWindowState.contact.jidBare.toString(), url);\n  }\n\n  onFocus() {\n    this.messageInput.focus();\n  }\n\n  onActionClick(chatAction: ChatAction) {\n    chatAction.onClick({\n      contact: this.chatWindowState.contact.jidBare.toString(),\n      chatWindow: this,\n    });\n  }\n\n}\n\nexport interface ChatAction {\n  cssClass: { [className: string]: boolean } | string | string[];\n  /**\n   * to identify actions\n   */\n  id: string;\n  html: string;\n\n  onClick(chatActionContext: ChatActionContext): void;\n}\n\nexport interface ChatActionContext {\n  contact: string;\n  chatWindow: ChatWindowRoomComponent;\n}\n","<div  *ngIf=\"selectedRoom\" class=\"chat-window\">\n\n    <ngx-chat-filedrop [enabled]=\"httpFileUploadPlugin.fileUploadSupported\"\n                       (fileUpload)=\"uploadFile($event)\"\n                       [dropMessage]=\"chatService.translations.dropMessage\">\n        <div  [title]=\"\" class=\"chat-contact-header\">\n            <div (click)=\"onClickHeader()\" class=\"chat-contact-avatar\">\n\n            </div>\n\n            <div (click)=\"onClickHeader()\" class=\"chat-contact-name\" style=\"color: white\">\n\n            </div>\n            <div class=\"chat-video-audio-call\">\n\n                <i  aria-hidden=\"true\"  class=\"ffa fa-video-camera\"  ></i>\n\n                <i aria-hidden=\"true\" class=\"fa fa-phone\" style=\"margin-left: 15px;margin-right: 10px;\"></i>\n\n\n            </div>\n\n            <div class=\"chat-close\" (click)=\"onClickClose()\" style=\"color: white\">\n                &times;\n            </div>\n        </div>\n\n        <div *ngIf=\"selectedRoom\" class=\"chat-content\" (click)=\"onFocus()\">\n                <ngx-chat-room-messages [room]=\"selectedRoom\"></ngx-chat-room-messages>\n            <div class=\"chat-input-container\">\n                <ngx-chat-message-input [room]=\"selectedRoom\"></ngx-chat-message-input>\n            </div>\n\n        </div>\n\n    </ngx-chat-filedrop>\n</div>\n\n\n\n","import {ChangeDetectorRef, Component, Inject, Input, OnChanges, OnDestroy, OnInit, ViewChild} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport {filter, takeUntil} from 'rxjs/operators';\nimport {Direction} from '../../core/message';\nimport {HttpFileUploadPlugin} from '../../services/adapters/xmpp/plugins/http-file-upload.plugin';\nimport {ChatListStateService, ChatWindowState} from '../../services/chat-list-state.service';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\nimport {ChatMessageInputComponent} from '../chat-message-input/chat-message-input.component';\nimport {Contact} from '../../core/contact';\nimport {Presence} from '../../core/presence';\nimport { SocketIOService } from '../../services/socket.io.service';\nimport {parse} from 'ltx';\nimport {XmppChatAdapter} from '../../services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {formatDate } from '@angular/common';\n\n@Component({\n    selector: 'ngx-chat-window',\n    templateUrl: './chat-window.component.html',\n    styleUrls: ['./chat-window.component.less']\n})\nexport class ChatWindowComponent implements OnInit, OnDestroy, OnChanges {\n\n    public loggedUserName;\n    public isChat = false;\n    public isVideoCall = false;\n    public isAudioCall = false;\n    public liveUserList = [];\n    public callee: any;\n    public callingInfo = { name: '', content: '', type: '' };\n    public isVideoCallAccepted = false;\n    public isAudioCallAccepted = false;\n    public userType: string;\n    public caller: any;\n    public c: any;\n    public video;\n    contact: Contact;\n\n    public loppRing = true;\n\n    myAudio = new Audio('https://audio.jukehost.co.uk/waQVQiqBy7Jc6kBgtHVwQ9zO2OeF7rzm');\n\n    public message = '';\n\n    presence = Presence;\n\n    public busyy = false;\n\n    showEmojiPicker = false;\n\n    @Input()\n    public chatWindowState: ChatWindowState;\n\n    @ViewChild(ChatMessageInputComponent)\n    messageInput: ChatMessageInputComponent;\n\n    httpFileUploadPlugin: HttpFileUploadPlugin;\n\n    private ngDestroy = new Subject<void>();\n\n    imgSendMessage = require('../../../../../../../src/assets/click.png');\n    imgFileMessage = require('../../../../../../../src/assets/file.png');\n\n    today = new Date();\n    jstoday = '';\n    constructor(\n        @Inject(ChatServiceToken) public chatService: ChatService,\n        private chatListService: ChatListStateService,\n        private changeDetector: ChangeDetectorRef,\n        private socketIOService: SocketIOService,\n        @Inject(ChatServiceToken) public chatServicee: XmppChatAdapter\n    ) {\n        this.httpFileUploadPlugin = this.chatService.getPlugin(HttpFileUploadPlugin);\n        this.loggedUserName = sessionStorage.getItem('username');\n\n    }\n\n     ngOnInit() {\n        this.chatWindowState.contact.messages$\n            .pipe(\n                filter(message => message.direction === Direction.in),\n                takeUntil(this.ngDestroy)\n            )\n            .subscribe(() => {\n                this.chatWindowState.isCollapsed = false;\n            });\n        this.GetLiveUsers();\n        this.OnVideoCallRequest();\n        this.OnVideoCallAccepted();\n        this.GetBusyUsers();\n        this.OnVideoCallRejected();\n        this.OnAudioCallRequest();\n        this.OnAudioCallAccepted();\n        this.OnAudioCallRejected();\n    }\n\n    ngOnChanges() {\n        this.message = '';\n    }\n\n    ngOnDestroy() {\n        this.ngDestroy.next();\n        this.ngDestroy.complete();\n    }\n\n    public onClickHeader() {\n        this.chatWindowState.isCollapsed = !this.chatWindowState.isCollapsed;\n    }\n    delay(ms: number) {\n        return new Promise( resolve => setTimeout(resolve, ms) );\n    }\n\n    public onClickClose() {\n        this.chatListService.closeChat(this.chatWindowState.contact);\n    }\n\n    sendMessage() {\n        this.messageInput.onSendMessage();\n    }\n\n    async uploadFile(file: File) {\n        const url = await this.httpFileUploadPlugin.upload(file);\n        this.chatService.sendMessage(this.chatWindowState.contact.jidBare.toString(), url);\n    }\n\n    onFocus() {\n        this.messageInput.focus();\n    }\n\n    onActionClick(chatAction: ChatAction) {\n        chatAction.onClick({\n            contact: this.chatWindowState.contact.jidBare.toString(),\n            chatWindow: this,\n        });\n    }\n    AddUser() {\n        this.socketIOService.SetUserName(this.loggedUserName)\n            .subscribe(data => {\n                if (data.username) {\n                    // user added\n                }\n            });\n    }\n    GetLiveUsers() {\n        this.socketIOService\n            .GetConnectedUsers()\n            .subscribe(data => {\n                const users = data.filter(a => a.username !== this.loggedUserName);\n                let count = 0;\n                for (const i in users) {\n                    if (this.liveUserList.indexOf(data[i]) === -1) {\n                        count++;\n                    }\n                }\n                if (count !== this.liveUserList.length) {\n                    this.liveUserList = users;\n                    this.socketIOService.connectedusers = users;\n                    this.GetBusyUsers();\n                }\n            });\n    }\n    OnVideoCallRequest() {\n        this.loppRing = true;\n        this.socketIOService\n            .OnVideoCallRequest()\n            .subscribe(data => {\n                this.callingInfo.name = data.fromname;\n                this.callingInfo.content = 'Calling....';\n                this.callingInfo.type = 'receiver';\n                this.isVideoCall = true;\n            });\n    }\n\n    toggleEmojiPicker() {\n        this.showEmojiPicker = !this.showEmojiPicker;\n    }\n\n    addEmoji(event) {\n        const { message } = this;\n        const text = `${event.emoji.native}`;\n        this.message = text;\n    }\n\n    OnAudioCallRequest() {\n        this.socketIOService\n            .OnAudioCallRequest()\n            .subscribe(data => {\n                this.callingInfo.name = data.fromname;\n                this.callingInfo.content = 'Calling....';\n                this.callingInfo.type = 'receiver';\n                this.isAudioCall = true;\n            });\n    }\n    OnVideoCallAccepted() {\n        this.myAudio.pause();\n        this.socketIOService\n            .OnVideoCallAccepted()\n            .subscribe(data => {\n                const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n                this.userType = 'dialer';\n                this.caller = calee.id;\n                this.isVideoCallAccepted = true;\n                this.socketIOService.BusyNow();\n                this.sendStanzaVideo();\n\n                this.CloseVideo();\n            });\n    }\n    OnAudioCallAccepted() {\n        this.myAudio.pause();\n        this.socketIOService\n            .OnAudioCallAccepted()\n            .subscribe(data => {\n                const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n                this.userType = 'dialer';\n                this.caller = calee.id;\n                this.isAudioCallAccepted = true;\n                this.socketIOService.BusyNow();\n\n\n                this.sendStanzaAudio();\n                this.CloseAudio();\n            });\n    }\n    GetBusyUsers() {\n        this.socketIOService\n            .GetBusyUsers()\n            .subscribe(data => {\n                this.liveUserList.forEach(a => { a.busy = false; });\n                data.forEach(a => {\n                    const usr = this.liveUserList.find(b => b.username === a.username);\n                    if (usr) {\n                        usr.busy = true;\n                    }\n                });\n            });\n    }\n    OnVideoCallRejected() {\n        this.myAudio.pause();\n        this.socketIOService\n            .OnVideoCallRejected()\n            .subscribe(data => {\n                this.callingInfo.content = 'Call Rejected ..';\n                this.loppRing = false;\n                this.myAudio.pause();\n                setTimeout(() => {\n                    this.CloseVideo();\n                }, 1000);\n            });\n    }\n    OnAudioCallRejected() {\n        this.myAudio.pause();\n        this.socketIOService\n            .OnAudioCallRejected()\n            .subscribe(data => {\n                this.callingInfo.content = 'Call Rejected ..';\n                setTimeout(() => {\n                    this.CloseAudio();\n                }, 1000);\n            });\n    }\n    Chat() {\n        this.isChat = true;\n    }\n\n    VideoCall() {\n        this.loppRing = true;\n        this.GetLiveUsers();\n        let mySubString = '';\n        if (this.chatWindowState.contact.name.indexOf('@') > 0) {\n            mySubString = this.chatWindowState.contact.name.substring(\n                0,\n                this.chatWindowState.contact.name.lastIndexOf('@')\n            );\n        } else {\n            mySubString = this.chatWindowState.contact.name.substring(\n                0,\n                this.chatWindowState.contact.name.lastIndexOf(' ')\n            );\n        }\n\n        const callee = this.liveUserList.find(a => a.username === mySubString.toLowerCase());\n        const calee = this.liveUserList.find(a => a.username === callee.username);\n        if (calee) {\n            this.socketIOService.VideoCallRequest(this.loggedUserName, calee.id);\n           /* setTimeout(() => {\n                    this.changeDetector.detectChanges();\n                    this.RejectVideoCall();\n                    this.sendStanzaVideoReject();\n                }, 30000);*/\n        }\n        this.callee = callee;\n        this.callingInfo.name = callee.username;\n\n        this.callingInfo.content = 'Dialing....';\n        this.callingInfo.type = 'dialer';\n        this.isVideoCall = true;\n        this.socketIOService.BusyNow();\n        this.busyy = true;\n    }\n\n    changeLoop() {\n        this.loppRing = false;\n    }\n\n    ChangeVideo() {\n        this.video = true;\n    }\n\n    ChangeAudio() {\n        this.video = false;\n    }\n\n    AcceptVideoCall() {\n        this.myAudio.pause();\n        const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n        if (calee) {\n            this.socketIOService.VideoCallAccepted(this.loggedUserName, calee.id);\n            this.userType = 'receiver';\n            this.caller = calee.id;\n            this.isVideoCallAccepted = true;\n            this.socketIOService.BusyNow();\n        }\n        this.CloseVideo();\n    }\n    AcceptAudioCall() {\n        this.myAudio.pause();\n        const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n        if (calee) {\n            this.socketIOService.AudioCallAccepted(this.loggedUserName, calee.id);\n            this.userType = 'receiver';\n            this.caller = calee.id;\n            this.isAudioCallAccepted = true;\n            this.socketIOService.BusyNow();\n        }\n        this.CloseAudio();\n    }\n\n    RejectVideoCall() {\n        this.myAudio.pause();\n        this.isVideoCall = false;\n        const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n        if (calee) {\n            this.socketIOService.VideoCallRejected(this.loggedUserName, calee.id);\n            this.isVideoCallAccepted = false;\n\n        }\n\n        this.CloseVideo();\n    }\n\n\n    RejectAudioCall() {\n        this.myAudio.pause();\n        const calee = this.liveUserList.find(a => a.username === this.callingInfo.name);\n        if (calee) {\n            this.socketIOService.AudioCallRejected(this.loggedUserName, calee.id);\n            this.isAudioCallAccepted = false;\n        }\n        this.CloseAudio();\n    }\n\n    AudioCall() {\n        this.GetLiveUsers();\n        let mySubString = '';\n        if (this.chatWindowState.contact.name.indexOf('@') > 0) {\n            mySubString = this.chatWindowState.contact.name.substring(\n                0,\n                this.chatWindowState.contact.name.lastIndexOf('@')\n            );\n        } else {\n            mySubString = this.chatWindowState.contact.name.substring(\n                0,\n                this.chatWindowState.contact.name.lastIndexOf(' ')\n            );\n        }\n\n        const callee = this.liveUserList.find(a => a.username === mySubString.toLowerCase());\n        const calee = this.liveUserList.find(a => a.username === callee.username);\n        if (calee) {\n            this.socketIOService.AudioCallRequest(this.loggedUserName, calee.id);\n           /* setTimeout(() => {\n                this.changeDetector.detectChanges();\n                this.RejectAudioCall();\n                this.sendStanzaAudioReject();\n            }, 30000);*/\n            //  console.log('calleeid', calee.id);\n        }\n        this.callee = callee;\n        this.callingInfo.name = callee.username;\n\n        this.callingInfo.content = 'Dialing....';\n        this.callingInfo.type = 'dialer';\n        this.isAudioCall = true;\n    }\n\n\n    CallBackVideo(event) {\n        this.isChat = false;\n        this.isVideoCall = false;\n        this.isAudioCall = false;\n        this.isVideoCallAccepted = false;\n        this.changeDetector.detectChanges();\n        // location.reload();\n    }\n\n    CallBackAudio(event) {\n        this.isChat = false;\n        this.isVideoCall = false;\n        this.isAudioCall = false;\n        this.isAudioCallAccepted = false;\n        this.changeDetector.detectChanges();\n       // location.reload();\n    }\n\n    CloseVideo() {\n        this.myAudio.pause();\n        this.isVideoCall = false;\n        this.changeDetector.detectChanges();\n    }\n\n    CloseAudio() {\n        this.myAudio.pause();\n        this.isAudioCall = false;\n        this.changeDetector.detectChanges();\n    }\n\n    playAudio() {\n        const audio = new Audio();\n        audio.src = '../../../../../../../src/assets/ringtone.wav';\n        audio.load();\n        audio.play();\n    }\n\n    Logout() {\n        this.socketIOService.RemoveUser();\n        sessionStorage.clear();\n        location.reload();\n    }\n\n    sendStanzaAudio() {\n        this.GetLiveUsers();\n        this.jstoday = formatDate(this.today, 'dd-MM-yyyy', 'en-US', 'CET');\n        const request = '<message xml:lang=\\'en\\' to=\\'' + this.callingInfo.name + '@localhost\\'' +\n            // tslint:disable-next-line:max-line-length\n            ' type=\\'chat\\' xmlns=\\'jabber:client\\'>' + '<origin-id xmlns=\\'urn:xmpp:sid:0\\' id=\\'' +  this.chatServicee.chatConnectionService.getNextIqId() + '\\' /><body>' + 'Audio Call: ' + this.jstoday.toString() + '</body></message>';\n        if (request) {\n            this.chatServicee.chatConnectionService.send(parse(request));\n        }\n\n    }\n\n    sendStanzaVideo() {\n        this.GetLiveUsers();\n        this.jstoday = formatDate(this.today, 'dd-MM-yyyy', 'en-US', 'CET');\n        const request = '<message xml:lang=\\'en\\' to=\\'' + this.callingInfo.name + '@localhost\\'' +\n            // tslint:disable-next-line:max-line-length\n            ' type=\\'chat\\' xmlns=\\'jabber:client\\'>' + '<origin-id xmlns=\\'urn:xmpp:sid:0\\' id=\\'' +  this.chatServicee.chatConnectionService.getNextIqId() + '\\' /><body>' + 'Video Call: ' + this.jstoday.toString() + '</body></message>';\n        if (request) {\n            this.chatServicee.chatConnectionService.send(parse(request));\n        }\n\n    }\n\n    sendStanzaAudioReject() {\n        this.jstoday = formatDate(this.today, 'dd-MM-yyyy', 'en-US', 'CET');\n        const request = '<message xml:lang=\\'en\\' to=\\'' + this.callingInfo.name + '@localhost\\'' +\n            // tslint:disable-next-line:max-line-length\n            ' type=\\'chat\\' xmlns=\\'jabber:client\\'>' + '<origin-id xmlns=\\'urn:xmpp:sid:0\\' id=\\'' +  this.chatServicee.chatConnectionService.getNextIqId() + '\\' /><body>' + ' Audio call: ' + this.jstoday.toString() + '</body></message>';\n        if (request) {\n            this.chatServicee.chatConnectionService.send(parse(request));\n        }\n\n    }\n\n    sendStanzaVideoReject() {\n        this.jstoday = formatDate(this.today, 'dd-MM-yyyy', 'en-US', 'CET');\n        const request = '<message xml:lang=\\'en\\' to=\\'' + this.callingInfo.name + '@localhost\\'' +\n            // tslint:disable-next-line:max-line-length\n            ' type=\\'chat\\' xmlns=\\'jabber:client\\'>' + '<origin-id xmlns=\\'urn:xmpp:sid:0\\' id=\\'' +  this.chatServicee.chatConnectionService.getNextIqId() + '\\' /><body>' + ' Video call: ' + this.jstoday.toString() + '</body></message>';\n        if (request) {\n            this.chatServicee.chatConnectionService.send(parse(request));\n        }\n\n    }\n\n    playRing() {\n            this.myAudio.load();\n            this.myAudio.addEventListener('ended', function() {\n                this.currentTime = 0;\n                this.play();\n            }, false);\n            this.myAudio.play();\n    }\n\n}\n\nexport interface ChatAction {\n    cssClass: { [className: string]: boolean } | string | string[];\n    /**\n     * to identify actions\n     */\n    id: string;\n    html: string;\n\n    onClick(chatActionContext: ChatActionContext): void;\n}\n\nexport interface ChatActionContext {\n    contact: string;\n    chatWindow: ChatWindowComponent;\n}\n","<script src=\"../icons/icons.module.ts\"></script>\n\n<div class=\"chat-window\">\n\n    <ngx-chat-filedrop [enabled]=\"httpFileUploadPlugin.fileUploadSupported\"\n                       (fileUpload)=\"uploadFile($event)\"\n                       [dropMessage]=\"chatService.translations.dropMessage\">\n\n        <div   class=\"chat-contact-header\">\n            <div [title]=\"chatWindowState.contact.name\" (click)=\"onClickHeader()\" class=\"chat-contact-avatar\">\n                <img [src]=\"chatWindowState.contact.avatar\"/>\n\n            </div>\n\n            <div (click)=\"onClickHeader()\" class=\"chat-contact-name\" style=\"color: white\">\n                {{chatWindowState.contact.name}}\n            </div>\n            <div *ngIf=\"!chatWindowState.isCollapsed\" class=\"chat-video-audio-call\">\n\n                <i  aria-hidden=\"true\"  class=\"ffa fa-video-camera\" (click)=\"VideoCall(); playRing();\" ></i>\n\n                <i aria-hidden=\"true\" class=\"fa fa-phone\" (click)=\"AudioCall();playRing();\" style=\"margin-left: 15px;margin-right: 10px;\"></i>\n\n\n            </div>\n\n            <div class=\"chat-close\" (click)=\"onClickClose()\" style=\"color: white\">\n                &times;\n            </div>\n        </div>\n        <div *ngIf=\"!chatWindowState.isCollapsed\" class=\"chat-content\" (click)=\"onFocus()\">\n\n            <ngx-chat-message-list [contact]=\"chatWindowState.contact\" [showAvatars]=\"false\"></ngx-chat-message-list>\n            <emoji-mart class=\"emoji-mart\" set=\"emojione\" (emojiSelect)=\"addEmoji($event)\" *ngIf=\"showEmojiPicker\" title=\"\"></emoji-mart>\n\n        </div>\n            <div *ngIf=\"!chatWindowState.isCollapsed\"  class=\"chat-input-container\">\n                <ngx-chat-message-input [emoji]=\"message\" [contact]=\"chatWindowState.contact\"></ngx-chat-message-input>\n\n                <button style=\"padding: 0;\n    margin-top: -3px;\n    background-color: white;\n    color: gray;\n    border-color: white;\n    size: -4px;\n    font-size: 16px;\n    margin-right: 14px;\"\n                        type=\"button\"\n                        class=\"toggle-emoji\"\n                        (click)=\"toggleEmojiPicker()\">\n                         <i-feather name=\"smile\"></i-feather>\n                </button>\n\n                <img style=\"margin-right: 20px;\"\n                     [src]=\"imgFileMessage\" class=\"chat-action\"/>\n\n                <img (click)=\"onActionClick(action)\"\n                     *ngFor=\"let action of chatService.chatActions\"\n                     [ngClass]=\"action.cssClass\"\n                     [src]=\"imgSendMessage\"\n                     class=\"chat-action\"/>\n\n            </div>\n        <div *ngIf=\"isVideoCall && chatWindowState.contact.name.toLowerCase().includes(callingInfo.name.toString().toLowerCase())\" class=\"popup-box\">\n            <div class=\"popup-content\">\n                <div class=\"popup-header\" *ngIf=\"callingInfo.type == 'receiver'\">\n                    <div>\n                        <img [src]=\"chatWindowState.contact.avatar\" style=\"max-width: 100%;border-radius: 8em;\"/>\n                    </div>\n                    <h5> {{callingInfo.name.substring(0,1).toUpperCase() + callingInfo.name.substring(1) + \" is \" }}{{callingInfo.content}}</h5>\n                </div>\n                <div class=\"popup-header\" *ngIf=\"callingInfo.type == 'dialer'\">\n                    <div>\n                        <img [src]=\"chatWindowState.contact.avatar\" style=\"max-width: 100%;border-radius: 8em;\"/>\n                    </div>\n                    <h5>{{callingInfo.content}}</h5>\n                    <button (click)=\"RejectVideoCall();sendStanzaVideoReject();\" class=\"btn btn-sm btn-danger end-call-btn\"><i class=\"fa fa-phone\"></i></button>\n                </div>\n                <div *ngIf=\"callingInfo.type == 'receiver'\" style=\"text-align: center;\">\n                    <button (click)=\"AcceptVideoCall();\" class=\"btn btn-success btn-sm\">Accept</button>\n                    <button (click)=\"RejectVideoCall();sendStanzaVideoReject();\" class=\"btn btn-danger btn-sm\">Reject</button>\n                </div>\n            </div>\n        </div>\n\n        <div *ngIf=\"isAudioCall  && chatWindowState.contact.name.toLowerCase().includes(callingInfo.name.toString().toLowerCase())\" class=\"popup-box\">\n            <div class=\"popup-content\">\n                <span  *ngIf=\"callingInfo.type == 'dialer'\" (click)=\"RejectAudioCall(); sendStanzaAudioReject();\" class=\"popup-close\">&times;</span>\n                <div class=\"popup-header\" *ngIf=\"callingInfo.type == 'receiver'\">\n                    <div>\n                        <img [src]=\"chatWindowState.contact.avatar\" style=\"max-width: 100%;border-radius: 8em;\"/>\n                    </div>\n                    <h5> {{callingInfo.name.substring(0,1).toUpperCase() + callingInfo.name.substring(1) + \" is \" }}{{callingInfo.content}}</h5>\n                </div>\n                <div class=\"popup-header\" *ngIf=\"callingInfo.type == 'dialer'\">\n                    <div>\n                        <img [src]=\"chatWindowState.contact.avatar\" style=\"max-width: 100%;border-radius: 8em;\"/>\n                    </div>\n                    <h5>{{callingInfo.content}}</h5>\n                </div>\n                <div *ngIf=\"callingInfo.type == 'receiver'\" style=\"text-align: center;\">\n                    <button (click)=\"AcceptAudioCall()\" class=\"btn btn-success btn-sm\">Accept</button>\n                    <button (click)=\"RejectAudioCall(); sendStanzaAudioReject();\" class=\"btn btn-danger btn-sm\">Reject</button>\n                </div>\n            </div>\n\n        </div>\n\n        <div  *ngIf=\"isVideoCallAccepted\" class=\"popup-box\">\n            <div class=\"popup-content\">\n                <ngx-chat-video-call (callback)=\"CallBackVideo($event)\" *ngIf=\"isVideoCallAccepted\" [caller]=\"caller\"\n                                     [userType]=\"userType\">Loading\n                </ngx-chat-video-call>\n            </div>\n\n        </div>\n\n        <div  *ngIf=\"isAudioCallAccepted\" class=\"popup-box\">\n            <div class=\"popup-content\">\n                <ngx-chat-audio-call [chatWindowState]=\"chatWindowState\" (callback)=\"CallBackAudio($event)\" *ngIf=\"isAudioCallAccepted\" [caller]=\"caller\"\n                                     [userType]=\"userType\">Loading\n                </ngx-chat-audio-call>\n            </div>\n\n        </div>\n\n    </ngx-chat-filedrop>\n\n</div>\n\n\n\n\n","import {AfterViewInit, Component, Inject, Input, OnChanges, OnInit, SimpleChanges, ViewChild} from '@angular/core';\nimport {Observable} from 'rxjs';\nimport {Contact} from '../core/contact';\nimport {Translations} from '../core/translations';\nimport {ChatService, ChatServiceToken} from '../services/chat-service';\nimport {RosterListComponent} from '../components/roster-list/roster-list.component';\nimport {Room} from '../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {DataService} from './multi-user-chat/data.service';\nimport {\n    MatCarouselSlideComponent,\n    Orientation\n} from '@ngmodule/material-carousel';\n/**\n * The main UI component. Should be instantiated near the root of your application.\n *\n * ```html\n * <!-- plain usage, no configuration -->\n * <ngx-chat></ngx-chat>\n *\n * <!-- if supplied, translations contain an object with the structure of the Translations interface. -->\n * <ngx-chat translations=\"{'contacts': 'Kontakte', ...}\"></ngx-chat>\n *\n * <!-- if supplied, the contacts input attribute takes an Observable<Contact[]> as source for your roster list -->\n * <ngx-chat contacts=\"...\"></ngx-chat>\n *\n * <!-- if supplied, userAvatar$ contains an Obervable<string>, which is used as the src attribute of the img for the current user. -->\n * <ngx-chat userAvatar$=\"Observable.of('http://...')\"></ngx-chat>\n * ```\n */\n@Component({\n    selector: 'ngx-chat',\n    templateUrl: './chat.component.html',\n    styleUrls: ['./chat.component.less']\n})\nexport class ChatComponent implements OnInit, OnChanges {\n\n\n    /**\n     * If supplied, translations contain an object with the structure of the Translations interface.\n     */\n    @Input()\n    public translations: Partial<Translations> = {\n    };\n\n    /**\n     * If supplied, the contacts input attribute takes an [Observable<Contact[]>]{@link Contact} as source for your roster list.\n     */\n    @Input()\n    public contacts: undefined | Observable<Contact[]>;\n\n    /**\n     * If supplied, the contacts input attribute takes an [Observable<Contact[]>]{@link Contact} as source for your incoming contact\n     * requests list.\n     */\n    @Input()\n    contactRequestsReceived$: undefined | Observable<Contact[]>;\n\n    /**\n     * If supplied, the contacts input attribute takes an [Observable<Contact[]>]{@link Contact} as source for your outgoing contact\n     * requests list.\n     */\n    @Input()\n    contactRequestsSent$: undefined | Observable<Contact[]>;\n\n    /**\n     * If supplied, the contacts input attribute takes an [Observable<Contact[]>]{@link Contact} as source for your unaffiliated contact\n     * list.\n     */\n    @Input()\n    contactsUnaffiliated$: undefined | Observable<Contact[]>;\n\n    /**\n     * If supplied, userAvatar$ contains an Obervable<string>, which is used as the src attribute of the img for the current user.\n     */\n    @Input()\n    public userAvatar$: undefined | Observable<string>;\n\n    /**\n     * 'shown' shows roster list, 'hidden' hides it.\n     */\n    @Input()\n    rosterState: 'shown' | 'hidden';\n\n    showChatComponent = false;\n\n    roomName: string;\n\n    selectedRoom: Room;\n\n    isOpen: number;\n\n\n    private defaultTranslations: Translations = {\n        chat: 'Chat',\n        contacts: 'Contacts',\n        contactRequestIn: 'Incoming contact requests',\n        contactRequestOut: 'Outgoing contact requests',\n        contactsUnaffiliated: 'Unknown',\n        noContacts: 'No contacts',\n        noMessages: 'No messages',\n        placeholder: 'Type a message...',\n        subscriptionRequestMessage: 'I want to add you',\n        acceptSubscriptionRequest: 'Accept',\n        denySubscriptionRequest: 'Deny',\n        timeFormat: 'shortTime',\n        dateFormat: 'EEEE, MM/dd/yyyy',\n        locale: undefined,\n        dropMessage: 'Drop your file to send it',\n        chatRooms: 'Chat Rooms',\n        addContact: 'Add Contact',\n        profile: 'My Profile',\n    };\n    @ViewChild(RosterListComponent) child;\n    constructor(@Inject(ChatServiceToken) private chatService: ChatService,\n                @Inject(ChatServiceToken) private data: DataService) {\n    }\n\n\n    ngOnInit() {\n        this.chatService.state$.subscribe($e => this.onChatStateChange($e));\n        this.onRosterStateChanged(this.rosterState);\n        if (this.userAvatar$) {\n            this.userAvatar$.subscribe(avatar => this.chatService.userAvatar$.next(avatar));\n        }\n        // this.data.currentMessage.subscribe(message => this.selectedRoom = message);\n        this.mergeAndSetTranslations();\n\n    }\n\n    private mergeAndSetTranslations() {\n        this.chatService.translations = {...this.defaultTranslations, ...this.translations};\n    }\n\n    ngOnChanges(changes: SimpleChanges): void {\n        this.mergeAndSetTranslations();\n        if (changes.rosterState) {\n            this.onRosterStateChanged(changes.rosterState.currentValue);\n        }\n\n    }\n\n    countChangedHandler(selectedRoom: Room) {\n        this.selectedRoom = selectedRoom;\n\n    }\n\n    private onChatStateChange(state: string) {\n        this.showChatComponent = state === 'online';\n        this.updateBodyClass();\n    }\n\n    onRosterStateChanged(state: 'shown' | 'hidden') {\n        this.rosterState = state;\n        this.updateBodyClass();\n    }\n\n    private updateBodyClass() {\n        const rosterClass = 'has-roster';\n        if (this.showChatComponent && this.rosterState !== 'hidden') {\n            document.body.classList.add(rosterClass);\n        } else {\n            document.body.classList.remove(rosterClass);\n        }\n    }\n\n    onVoted($event) {\n       this.selectedRoom = $event;\n    }\n\n    onVoted1($event) {\n        this.roomName = $event;\n    }\n\n    onVoted2($event) {\n        this.isOpen = $event;\n    }\n\n\n}\n","<ngx-chat-window-list *ngIf=\"showChatComponent\"\n                      [rosterState]=\"rosterState\">\n</ngx-chat-window-list>\n<ngx-chat-multi-user-chat *ngIf=\"selectedRoom\" [openA]=\"isOpen\" [name]=\"roomName\" [selectedRoom]=\"selectedRoom\"></ngx-chat-multi-user-chat>\n\n<ngx-chat-roster-list [rosterState]=\"rosterState\"\n                      [contacts]=\"contacts\"\n                      [contactRequestsReceived$]=\"contactRequestsReceived$\"\n                      [contactRequestsSent$]=\"contactRequestsSent$\"\n                      [contactsUnaffiliated$]=\"contactsUnaffiliated$\"\n                      *ngIf=\"showChatComponent\"\n                      (voted)=\"onVoted($event)\"\n                      (roomName)=\"onVoted1($event)\"\n                      (wind)=\"onVoted2($event)\"\n                      (rosterStateChanged)=\"onRosterStateChanged($event)\">\n</ngx-chat-roster-list>\n\n\n","import {ChangeDetectorRef, Component, EventEmitter, Inject, Input, OnInit, Output} from '@angular/core';\nimport {SocketIOService} from '../../services/socket.io.service';\nimport {Router} from '@angular/router';\nimport {ChatWindowState} from '../../services/chat-list-state.service';\nimport {Contact} from '../../core/contact';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\n\n@Component({\n  selector: 'ngx-chat-audio-call',\n  templateUrl: './audio.component.html',\n  styleUrls: ['./audio.component.css']\n})\nexport class AudioComponent implements OnInit {\n  public title = 'webrtc';\n  public peerConnection: any;\n  public localStream: any;\n  public remoteStream: any;\n  public offerOptions = {\n    offerToReceiveAudio: true,\n    offerToReceiveVideo: true\n  };\n  public loggedUserName;\n\n  public caller;\n  @Input('caller')\n  public set setCaller(caller) {\n    this.changeDetector.detectChanges();\n    this.caller = caller;\n  }\n  contact: Contact;\n  @Input()\n  public chatWindowState: ChatWindowState;\n\n  public userType;\n  @Input('userType')\n  public set setUserType(type) {\n    this.ngOnInit();\n    if (type === 'dialer') {\n      setTimeout(() => {\n        this.changeDetector.detectChanges();\n        this.Call();\n      }, 2000);\n    }\n  }\n\n  // tslint:disable-next-line:no-output-rename\n  @Output('callback')\n      // tslint:disable-next-line:ban-types\n  callback: EventEmitter<Object> = new EventEmitter<Object>();\n\n  constructor( @Inject(ChatServiceToken) public chatService: ChatService,\n               private socketIOService: SocketIOService,\n               private router: Router,\n               private changeDetector: ChangeDetectorRef) {\n  }\n\n  SetConnection() {\n    // on both side\n    this.peerConnection = new RTCPeerConnection();\n    const iceServerConfig = {\n      iceServers: [{\n        urls: ['stun:bturn1.xirsys1221.com']\n      }, {\n        username: '9hiaOVYRRn31s_Lv2sGS-iGgtEKg5_3SVWfeEZyO-4GWtKxUv0sCxQVNGkxlk-zBAAAAAF0sGiFhamF5cGF0aWw=',\n        credential: '04f626c0-a6c8-11e9-8ad1-26d3ed601a80',\n        urls: [\n          'turn:bturn1.xirsys.com:80?transport=udp',\n          'turn:bturn1.xirsys.com:3478?transport=udp',\n          'turn:bturn1.xirsys.com:80?transport=tcp',\n          'turn:bturn1.xirsys.com:3478?transport=tcp',\n          'turns:bturn1.xirsys.com:443?transport=tcp',\n          'turns:bturn1.xirsys.com:5349?transport=tcp'\n        ]\n      }]\n    };\n\n    this.peerConnection.setConfiguration(iceServerConfig);\n\n    this.localStream.getTracks().forEach(track => {\n      this.peerConnection.addTrack(track, this.localStream);\n    });\n    // this.peerConnection.addStream(this.localStream);\n    this.peerConnection.onicecandidate = e => {\n      this.OnIceCandidate(this.peerConnection, e);\n    };\n    this.peerConnection.ontrack = (event) => {\n      // don't set srcObject again if it is already set.\n      // for (var stream of event.streams) {\n      // console.log(\"Remote streams: \" + stream.id);\n      // }\n      // getting first stream only\n      // this is only for p2p call\n      this.GotRemoteStream(event.streams[0]);\n    };\n    this.peerConnection.oniceconnectionstatechange = e => {\n      this.OnIceStateChange(this.peerConnection, e);\n    };\n  }\n  ngOnInit() {\n    this.GetLocalStream();\n    this.loggedUserName = sessionStorage.getItem('username');\n    this.socketIOService\n        .ReceiveCallRequest()\n        .subscribe(data => {\n          this.OnCallRequestReceived(data.data);\n        });\n    this.OnCallEndedAudio();\n    this.OnCallEndedVideo();\n  }\n  OnCallRequestReceived(data) {\n    // console.log(\"call received\");\n    // console.log(data);\n    if (data.desc) {\n      const descrip = new RTCSessionDescription(data.desc);\n      if (descrip.type === 'offer') {\n        this.SetConnection();\n        this.OnCallOffer(descrip);\n      } else if (descrip.type === 'answer') {\n        this.OnCallAnswer(descrip);\n      } else {\n        // tslint:disable-next-line:no-console\n        console.log('Unsupported SDP type!!');\n      }\n    } else if (data.candidate) {\n      const candidate = new RTCIceCandidate(data.candidate);\n      // tslint:disable-next-line:no-console\n      this.peerConnection.addIceCandidate(candidate).catch(err => console.log(err));\n    }\n  }\n\n  Call() {\n    this.SetConnection();\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 1: caller creates offer */\n    this.peerConnection.onnegotiationneeded = async () => {\n      try {\n        this.peerConnection.createOffer(this.offerOptions)\n            .then(\n                this.OnCreateOfferSuccess.bind(this),\n                this.OnCreateSessionDescriptionError.bind(this));\n      } catch (err) {\n        // tslint:disable-next-line:no-console\n        console.error(err);\n      }\n    };\n  }\n\n  OnCreateOfferSuccess(event) {\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 2: caller sets localDescription */\n    this.peerConnection.setLocalDescription(new RTCSessionDescription(event)).then(\n        () => {\n          // tslint:disable-next-line:jsdoc-format\n          /**Step 3: caller sends the description to the callee */\n          this.socketIOService.SendCallRequest(this.peerConnection.localDescription, 'desc', this.caller);\n          this.ShowSuccess('created offer /nlocal description set /n=>Success');\n        },\n        this.OnSetSessionDescriptionError.bind(this)\n    );\n  }\n\n  OnCallOffer(descrip) {\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 4: callee receives the offer sets remote description */\n    this.peerConnection.setRemoteDescription(descrip).then(\n        () => {\n          this.OnSetRemoteSuccess(this.peerConnection);\n        },\n        this.OnSetSessionDescriptionError.bind(this)\n    );\n  }\n\n  OnSetRemoteSuccess(val) {\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 5: callee creates answer */\n    this.peerConnection.createAnswer().then(\n        this.OnCreateAnswerSuccess.bind(this),\n        this.OnCreateSessionDescriptionError.bind(this)\n    );\n  }\n\n  OnCreateAnswerSuccess(event) {\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 6: callee sets local description */\n    this.peerConnection.setLocalDescription(new RTCSessionDescription(event)).then(\n        () => {\n          // tslint:disable-next-line:jsdoc-format\n          /**Step 7: callee send the description to caller */\n          this.socketIOService.SendCallRequest(this.peerConnection.localDescription, 'desc', this.caller);\n          this.ShowSuccess('create answer /n=>success');\n        },\n        this.OnSetSessionDescriptionError.bind(this)\n    );\n  }\n\n  OnCallAnswer(descrip) {\n    // tslint:disable-next-line:jsdoc-format\n    /**Step 8: caller receives the answer and sets remote description */\n    this.peerConnection.setRemoteDescription(new RTCSessionDescription(descrip))\n        // tslint:disable-next-line:no-console\n        .then(() => this.ShowSuccess('Succesfully set remote description')).catch(err => { console.log(err); });\n  }\n\n  // get local stream\n  GetLocalStream() {\n    // navigator.mediaDevices.enumerateDevices()\n    //     .then(this.GotDevices.bind(this))\n    //     .catch(this.HandleDeviceError.bind(this));\n    navigator.mediaDevices.getUserMedia({\n      video: false,\n      audio: true\n    }).then(this.GotLocalStream.bind(this))\n        .then(this.GotDevices.bind(this))\n        .catch(this.HandleDeviceError.bind(this));\n  }\n  // got local stream\n  GotLocalStream(stream) {\n    const lv = document.getElementById('local-video') as HTMLVideoElement;\n    lv.srcObject = stream;\n    lv.controls = false;\n    lv.muted = true;\n    lv.volume = 0;\n    this.localStream = stream;\n    // tslint:disable-next-line:no-console\n    console.log('local stream id => ' + stream.id);\n\n    // this.SetConnection();\n  }\n\n  OnIceCandidate(conn, event) {\n    if (event.candidate) {\n      // Send the candidate to the remote peer\n      // console.log(\"Send the candidate to the remote peer\");\n      const candi = new RTCIceCandidate(event.candidate);\n      this.socketIOService.SendCallRequest(candi, 'candidate', this.caller);\n    } else {\n      // All ICE candidates have been sent\n      // console.log(\"All ICE candidates have been sent\");\n    }\n  }\n\n  OnIceStateChange(peerConn, event) {\n    if (peerConn) {\n      // console.log('ICE state change event: ', event);\n    }\n  }\n\n  GotRemoteStream(stream) {\n    // console.log(\"got remote stream\");\n    const lv = document.getElementById('remote-video') as HTMLVideoElement;\n    lv.srcObject = stream;\n\n    // var remotevid=document.createElement(\"video\") as HTMLVideoElement;\n    // remotevid.srcObject=stream;\n    // remotevid.autoplay = true;\n    // remotevid.id=stream.id;\n    // var lv = document.querySelector('#div-remote-video');\n    // lv.appendChild(remotevid);\n\n    // for (var stream of event.streams) {\n    //     if (!lv.srcObject)\n    //         lv.srcObject = stream;\n    //     console.log(\"Remote streams: \" + stream.id);\n    // }\n  }\n\n  OnCreateSessionDescriptionError(event) {\n    // console.log(\"OnCreateSessionDescriptionError\");\n    // this.peerConnection.setRemoteDescription(event).then(\n    //     () => {\n    //         this.OnSetRemoteSuccess(this.peerConnection);\n    //     },\n    //     this.OnSetSessionDescriptionError.bind(this)\n    // );\n  }\n\n  ShowSuccess(message) {\n    // tslint:disable-next-line:no-console\n    console.log(message);\n  }\n  OnSetSessionDescriptionError(val) {\n    // console.log(\"error \" + val);\n  }\n  GotDevices(deviceInfos) {\n    // Handles being called several times to update labels. Preserve values.\n    // const values = this.selectors.map(select => select.value);\n    // selectors.forEach(select => {\n    //   while (select.firstChild) {\n    //     select.removeChild(select.firstChild);\n    //   }\n    // });\n    let flagMic = false;\n    let flagSpeaker = false;\n    let flagWebCam = false;\n    for (let i = 0; i !== deviceInfos.length; ++i) {\n      const deviceInfo = deviceInfos[i];\n      // console.log(i + 1, deviceInfo.label);\n      if (deviceInfo.kind === 'audioinput') {\n        flagMic = true;\n      }\n      if (deviceInfo.kind === 'audiooutput') {\n        flagSpeaker = true;\n      }\n      if (deviceInfo.kind === 'videoinput') {\n        flagWebCam = true;\n      }\n      //   const option = document.createElement('option');\n      //   option.value = deviceInfo.deviceId;\n      //   if (deviceInfo.kind === 'audioinput') {\n      //     option.text = deviceInfo.label || `microphone ${audioInputSelect.length + 1}`;\n      //     audioInputSelect.appendChild(option);\n      //   } else if (deviceInfo.kind === 'audiooutput') {\n      //     option.text = deviceInfo.label || `speaker ${audioOutputSelect.length + 1}`;\n      //     audioOutputSelect.appendChild(option);\n      //   } else if (deviceInfo.kind === 'videoinput') {\n      //     option.text = deviceInfo.label || `camera ${videoSelect.length + 1}`;\n      //     videoSelect.appendChild(option);\n      //   } else {\n      //     console.log('Some other kind of source/device: ', deviceInfo);\n      //   }\n    }\n    let msg = '';\n    if (!flagMic) {\n      msg += 'microphone ';\n    }\n    if (!flagSpeaker) {\n      msg += 'speaker ';\n    }\n    if (!flagWebCam) {\n      msg += 'webcam ';\n    }\n    if (msg !== '') {\n      alert(msg + 'not found!');\n    }\n    // selectors.forEach((select, selectorIndex) => {\n    //   if (Array.prototype.slice.call(select.childNodes).some(n => n.value === values[selectorIndex])) {\n    //     select.value = values[selectorIndex];\n    //   }\n    // });\n  }\n  HandleDeviceError(error) {\n    if (error.name === 'NotFoundError' || error.name === 'DevicesNotFoundError') {\n      alert('webcam or mic not connected to your system');\n    } else if (error.name === 'NotReadableError' || error.name === 'TrackStartError') {\n      alert('webcam or mic already in use by another application');\n    } else if (error.name === 'OverconstrainedError' || error.name === 'ConstraintNotSatisfiedError') {\n      alert('webcam or mic not supported!');\n    } else if (error.name === 'NotAllowedError' || error.name === 'PermissionDeniedError') {\n      alert('Access denied for accessing webcam or mic!');\n    } else if (error.name === 'MediaStreamError' || error.name === 'TypeError') {\n      // empty constraints object\n      // alert(\"Unable to get media!\");\n      // tslint:disable-next-line:no-console\n      console.log('empty constraints object');\n    } else if (error.name === 'PermissionDismissedError') {\n      alert('Permission is dismissed for access webcam or mic');\n    }\n    // tslint:disable-next-line:no-console\n    console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n  }\n  EndCallVideo() {\n    const caller = this.socketIOService.connectedusers.find(a => a.id === this.caller);\n    this.socketIOService.EndVideoCall(this.loggedUserName, this.caller, caller.username);\n    this.CallBack();\n  }\n  EndCallAudio() {\n    const caller = this.socketIOService.connectedusers.find(a => a.id === this.caller);\n    this.socketIOService.EndAudioCall(this.loggedUserName, this.caller, caller.username);\n    this.CallBack();\n  }\n  OnCallEndedVideo() {\n    this.socketIOService\n        .OnVideoCallEnded()\n        .subscribe(data => {\n          if (data) {\n            this.socketIOService.GetBusyUsers();\n            this.CallBack();\n          }\n        });\n  }\n  OnCallEndedAudio() {\n    this.socketIOService\n        .OnAudioCallEnded()\n        .subscribe(data => {\n          if (data) {\n            this.socketIOService.GetBusyUsers();\n            this.CallBack();\n          }\n        });\n  }\n  CallBack() {\n    const senders = this.peerConnection.getSenders();\n    senders.forEach(s => {\n      this.peerConnection.removeTrack(s);\n    });\n\n    // stop both video and audio\n    /*this.localStream.getTracks().forEach((track) => {\n      track.stop();\n    });*/\n    // stop only audio\n    this.localStream.getAudioTracks()[0].stop();\n    // stop only audio\n    // this.localStream.getVideoTracks()[0].stop();\n    this.peerConnection.close();\n\n    this.peerConnection = new RTCPeerConnection();\n    this.callback.emit({ status: 'ended' });\n  }\n}\n","<div class=\"row\" style=\"height: 100%; width:100%; overflow: hidden;\">\n    <div class=\"col-lg-12\" style=\"text-align: center\">\n        <div>\n            <img [src]=\"chatWindowState.contact.avatar\" style=\"max-width: 100%;border-radius: 8em;\"/>\n        </div>\n        <video id=\"remote-video\" class=\"remoteaudio\" controls autoplay style=\" width: 100%; margin-top: -58px;\"></video>\n        <video id=\"local-video\" class=\"localaudion\" controls autoplay muted style=\"margin-top: -128px;\"></video>\n\n    </div>\n    <div class=\"col-lg-12\" style=\"text-align: center\">\n    <button (click)=\"EndCallAudio()\" class=\"btn btn-sm btn-danger end-call-btn\" style=\"    border-radius: 50%;\n    font-size: 24px;\n    height: 40px;\n    width: 40px;\"><i class=\"fa fa-phone\"></i></button>\n</div>\n</div>\n<div class=\"row callaudio-btn-div\" style=\"\">\n</div>\n<!-- <div id=\"div-remote-video\"></div> -->\n<script src=\"https://webrtc.github.io/adapter/adapter-latest.js\"></script>\n","import { Component, OnInit, Input, Output, EventEmitter, ChangeDetectorRef } from '@angular/core';\nimport { Observable, empty } from 'rxjs';\nimport { SocketIOService } from '../../services/socket.io.service';\nimport { async } from 'q';\nimport { Router } from '@angular/router';\n/**\nStep 1: caller creates offer\n\nStep 2: caller sets localDescription\n\nStep 3: caller sends the description to the callee\n\n//------------------------------------------------------//\n\nStep 4: callee receives the offer sets remote description\n\nStep 5: callee creates answer\n\nStep 6: callee sets local description\n\nStep 7: callee send the description to caller\n\n//------------------------------------------------------//\n\nStep 8: caller receives the answer and sets remote description\n */\n@Component({\n    selector: 'ngx-chat-video-call',\n    templateUrl: './video.component.html',\n    styleUrls: ['./communication.css']\n})\nexport class VideoComponent implements OnInit {\n    public title = 'webrtc';\n    public peerConnection: any;\n    public localStream: any;\n    public remoteStream: any;\n    public offerOptions = {\n        offerToReceiveAudio: true,\n        offerToReceiveVideo: true\n    };\n    public loggedUserName;\n\n    public caller;\n    @Input('caller')\n    public set setCaller(_caller) {\n        this.changeDetector.detectChanges();\n        this.caller = _caller;\n    }\n\n    public userType;\n    @Input(\"userType\")\n    public set setUserType(_type) {\n        this.ngOnInit();\n        if (_type == 'dialer') {\n            setTimeout(() => {\n                this.changeDetector.detectChanges();\n                this.Call();\n            }, 2000);\n        }\n    }\n\n    @Output(\"callback\")\n    callback: EventEmitter<Object> = new EventEmitter<Object>();\n\n    constructor(\n        private socketIOService: SocketIOService,\n        private router: Router,\n        private changeDetector: ChangeDetectorRef) {\n    }\n\n    SetConnection() {\n        //on both side\n        this.peerConnection = new RTCPeerConnection();\n        var iceServerConfig = {\n            iceServers: [{\n                urls: [\"stun:bturn1.xirsys1221.com\"]\n            }, {\n                username: \"9hiaOVYRRn31s_Lv2sGS-iGgtEKg5_3SVWfeEZyO-4GWtKxUv0sCxQVNGkxlk-zBAAAAAF0sGiFhamF5cGF0aWw=\",\n                credential: \"04f626c0-a6c8-11e9-8ad1-26d3ed601a80\",\n                urls: [\n                    \"turn:bturn1.xirsys.com:80?transport=udp\",\n                    \"turn:bturn1.xirsys.com:3478?transport=udp\",\n                    \"turn:bturn1.xirsys.com:80?transport=tcp\",\n                    \"turn:bturn1.xirsys.com:3478?transport=tcp\",\n                    \"turns:bturn1.xirsys.com:443?transport=tcp\",\n                    \"turns:bturn1.xirsys.com:5349?transport=tcp\"\n                ]\n            }]\n        };\n\n        this.peerConnection.setConfiguration(iceServerConfig);\n\n        this.localStream.getTracks().forEach(track => {\n            this.peerConnection.addTrack(track, this.localStream);\n        });\n        //this.peerConnection.addStream(this.localStream);\n        this.peerConnection.onicecandidate = e => {\n            this.OnIceCandidate(this.peerConnection, e);\n        };\n        this.peerConnection.ontrack = (event) => {\n            // don't set srcObject again if it is already set.\n            //for (var stream of event.streams) {\n            //console.log(\"Remote streams: \" + stream.id);\n            //}\n            //getting first stream only\n            //this is only for p2p call\n            this.GotRemoteStream(event.streams[0]);\n        };\n        this.peerConnection.oniceconnectionstatechange = e => {\n            this.OnIceStateChange(this.peerConnection, e);\n        };\n    }\n    ngOnInit() {\n        this.GetLocalStream();\n        this.loggedUserName = sessionStorage.getItem(\"username\");\n        this.socketIOService\n            .ReceiveCallRequest()\n            .subscribe(data => {\n                this.OnCallRequestReceived(data.data);\n            });\n        this.OnCallEnded();\n    }\n    OnCallRequestReceived(data) {\n        //console.log(\"call received\");\n        //console.log(data);\n        if (data.desc) {\n            var descrip = new RTCSessionDescription(data.desc);\n            if (descrip.type == \"offer\") {\n                this.SetConnection();\n                this.OnCallOffer(descrip);\n            } else if (descrip.type == \"answer\") {\n                this.OnCallAnswer(descrip);\n            } else {\n                console.log(\"Unsupported SDP type!!\");\n            }\n        } else if (data.candidate) {\n            var candidate = new RTCIceCandidate(data.candidate);\n            this.peerConnection.addIceCandidate(candidate).catch(err => console.log(err));\n        }\n    }\n\n    Call() {\n        this.SetConnection();\n        /**Step 1: caller creates offer */\n        this.peerConnection.onnegotiationneeded = async () => {\n            try {\n                this.peerConnection.createOffer(this.offerOptions)\n                    .then(\n                        this.OnCreateOfferSuccess.bind(this),\n                        this.OnCreateSessionDescriptionError.bind(this));\n            } catch (err) {\n                console.error(err);\n            }\n        };\n    }\n\n    OnCreateOfferSuccess(event) {\n        /**Step 2: caller sets localDescription */\n        this.peerConnection.setLocalDescription(new RTCSessionDescription(event)).then(\n            () => {\n                /**Step 3: caller sends the description to the callee */\n                this.socketIOService.SendCallRequest(this.peerConnection.localDescription, 'desc', this.caller);\n                this.ShowSuccess('created offer /nlocal description set /n=>Success');\n            },\n            this.OnSetSessionDescriptionError.bind(this)\n        );\n    }\n\n    OnCallOffer(descrip) {\n        /**Step 4: callee receives the offer sets remote description */\n        this.peerConnection.setRemoteDescription(descrip).then(\n            () => {\n                this.OnSetRemoteSuccess(this.peerConnection);\n            },\n            this.OnSetSessionDescriptionError.bind(this)\n        );\n    }\n\n    OnSetRemoteSuccess(val) {\n        /**Step 5: callee creates answer */\n        this.peerConnection.createAnswer().then(\n            this.OnCreateAnswerSuccess.bind(this),\n            this.OnCreateSessionDescriptionError.bind(this)\n        );\n    }\n\n    OnCreateAnswerSuccess(event) {\n        /**Step 6: callee sets local description */\n        this.peerConnection.setLocalDescription(new RTCSessionDescription(event)).then(\n            () => {\n                /**Step 7: callee send the description to caller */\n                this.socketIOService.SendCallRequest(this.peerConnection.localDescription, 'desc', this.caller);\n                this.ShowSuccess(\"create answer /n=>success\");\n            },\n            this.OnSetSessionDescriptionError.bind(this)\n        );\n    }\n\n    OnCallAnswer(descrip) {\n        /**Step 8: caller receives the answer and sets remote description */\n        this.peerConnection.setRemoteDescription(new RTCSessionDescription(descrip))\n            .then(() => this.ShowSuccess('Succesfully set remote description')).catch(err => { console.log(err); });\n    }\n\n    //get local stream\n    GetLocalStream() {\n        // navigator.mediaDevices.enumerateDevices()\n        //     .then(this.GotDevices.bind(this))\n        //     .catch(this.HandleDeviceError.bind(this));\n        navigator.mediaDevices.getUserMedia({\n            video: true,\n            audio: true\n        }).then(this.GotLocalStream.bind(this))\n            .then(this.GotDevices.bind(this))\n            .catch(this.HandleDeviceError.bind(this));\n    }\n    //got local stream\n    GotLocalStream(stream) {\n        var lv = document.getElementById('local-video') as HTMLVideoElement;\n        lv.srcObject = stream;\n        lv.controls = false;\n        lv.muted = true;\n        lv.volume = 0;\n        this.localStream = stream;\n        console.log(\"local stream id => \" + stream.id);\n\n        //this.SetConnection();\n    }\n\n    OnIceCandidate(conn, event) {\n        if (event.candidate) {\n            // Send the candidate to the remote peer\n            //console.log(\"Send the candidate to the remote peer\");\n            var candi = new RTCIceCandidate(event.candidate);\n            this.socketIOService.SendCallRequest(candi, 'candidate', this.caller);\n        } else {\n            // All ICE candidates have been sent\n            //console.log(\"All ICE candidates have been sent\");\n        }\n    }\n\n    OnIceStateChange(peerConn, event) {\n        if (peerConn) {\n            //console.log('ICE state change event: ', event);\n        }\n    }\n\n    GotRemoteStream(stream) {\n        //console.log(\"got remote stream\");\n        var lv = document.getElementById('remote-video') as HTMLVideoElement;\n        lv.srcObject = stream;\n\n        // var remotevid=document.createElement(\"video\") as HTMLVideoElement;\n        // remotevid.srcObject=stream;\n        // remotevid.autoplay = true;\n        // remotevid.id=stream.id;\n        // var lv = document.querySelector('#div-remote-video');\n        // lv.appendChild(remotevid);\n\n        // for (var stream of event.streams) {\n        //     if (!lv.srcObject)\n        //         lv.srcObject = stream;\n        //     console.log(\"Remote streams: \" + stream.id);\n        // }\n    }\n\n    OnCreateSessionDescriptionError(event) {\n        //console.log(\"OnCreateSessionDescriptionError\");\n        // this.peerConnection.setRemoteDescription(event).then(\n        //     () => {\n        //         this.OnSetRemoteSuccess(this.peerConnection);\n        //     },\n        //     this.OnSetSessionDescriptionError.bind(this)\n        // );\n    }\n\n    ShowSuccess(message) {\n        console.log(message);\n    }\n    OnSetSessionDescriptionError(val) {\n        //console.log(\"error \" + val);\n    }\n    GotDevices(deviceInfos) {\n        // Handles being called several times to update labels. Preserve values.\n        // const values = this.selectors.map(select => select.value);\n        // selectors.forEach(select => {\n        //   while (select.firstChild) {\n        //     select.removeChild(select.firstChild);\n        //   }\n        // });\n        var flagMic = false;\n        var flagSpeaker = false;\n        var flagWebCam = false;\n        for (let i = 0; i !== deviceInfos.length; ++i) {\n            const deviceInfo = deviceInfos[i];\n            //console.log(i + 1, deviceInfo.label);\n            if (deviceInfo.kind == 'audioinput') {\n                flagMic = true;\n            }\n            if (deviceInfo.kind == 'audiooutput') {\n                flagSpeaker = true;\n            }\n            if (deviceInfo.kind == 'videoinput') {\n                flagWebCam = true;\n            }\n            //   const option = document.createElement('option');\n            //   option.value = deviceInfo.deviceId;\n            //   if (deviceInfo.kind === 'audioinput') {\n            //     option.text = deviceInfo.label || `microphone ${audioInputSelect.length + 1}`;\n            //     audioInputSelect.appendChild(option);\n            //   } else if (deviceInfo.kind === 'audiooutput') {\n            //     option.text = deviceInfo.label || `speaker ${audioOutputSelect.length + 1}`;\n            //     audioOutputSelect.appendChild(option);\n            //   } else if (deviceInfo.kind === 'videoinput') {\n            //     option.text = deviceInfo.label || `camera ${videoSelect.length + 1}`;\n            //     videoSelect.appendChild(option);\n            //   } else {\n            //     console.log('Some other kind of source/device: ', deviceInfo);\n            //   }\n        }\n        var msg = '';\n        if (!flagMic) {\n            msg += 'microphone ';\n        }\n        if (!flagSpeaker) {\n            msg += 'speaker ';\n        }\n        if (!flagWebCam) {\n            msg += 'webcam ';\n        }\n        if (msg != '') {\n            alert(msg + \"not found!\");\n        }\n        // selectors.forEach((select, selectorIndex) => {\n        //   if (Array.prototype.slice.call(select.childNodes).some(n => n.value === values[selectorIndex])) {\n        //     select.value = values[selectorIndex];\n        //   }\n        // });\n    }\n    HandleDeviceError(error) {\n        if (error.name == \"NotFoundError\" || error.name == \"DevicesNotFoundError\") {\n            alert(\"webcam or mic not connected to your system\");\n        }\n        else if (error.name == \"NotReadableError\" || error.name == \"TrackStartError\") {\n            alert(\"webcam or mic already in use by another application\");\n        } else if (error.name == \"OverconstrainedError\" || error.name == \"ConstraintNotSatisfiedError\") {\n            alert(\"webcam or mic not supported!\");\n        } else if (error.name == \"NotAllowedError\" || error.name == \"PermissionDeniedError\") {\n            alert(\"Access denied for accessing webcam or mic!\");\n        } else if (error.name == \"MediaStreamError\" || error.name == \"TypeError\") {\n            //empty constraints object\n            //alert(\"Unable to get media!\");\n            console.log(\"empty constraints object\");\n        } else if (error.name == \"PermissionDismissedError\") {\n            alert(\"Permission is dismissed for access webcam or mic\");\n        }\n        console.log('navigator.MediaDevices.getUserMedia error: ', error.message, error.name);\n    }\n    EndCall() {\n        var caller = this.socketIOService.connectedusers.find(a => a.id == this.caller);\n        this.socketIOService.EndVideoCall(this.loggedUserName, this.caller, caller.username);\n        this.CallBack();\n    }\n    OnCallEnded() {\n        this.socketIOService\n            .OnVideoCallEnded()\n            .subscribe(data => {\n                if (data) {\n                    this.socketIOService.GetBusyUsers();\n                    this.CallBack();\n                }\n            });\n    }\n    CallBack() {\n        var senders = this.peerConnection.getSenders();\n        senders.forEach(s => {\n            this.peerConnection.removeTrack(s);\n        });\n\n        // stop both video and audio\n       /* this.localStream.getTracks().forEach((track) => {\n            track.stop();\n        });*/\n        // stop only audio\n       // this.localStream.getAudioTracks()[0].stop();\n        //stop only audio\n        this.localStream.getVideoTracks()[0].stop();\n        // this.peerConnection.close();\n\n        this.peerConnection = new RTCPeerConnection();\n        this.callback.emit({ status: \"ended\" });\n    }\n}\n","<!-- <div class=\"row\">\n    <button (click)=\"Call()\">Connect</button>\n</div> -->\n<div class=\"row\" style=\"height: 100%; width:100%; overflow: hidden;\">\n    <div class=\"col-lg-12\" style=\"height: 100%;margin-left: 17px; text-align: center;\">\n        <video id=\"remote-video\" class=\"remotevideo\" controls autoplay></video>\n        <video id=\"local-video\" class=\"localvideo\" controls autoplay muted></video>\n        <button (click)=\"EndCall()\" class=\"btn btn-sm btn-danger end-call-btn\"><i class=\"fa fa-phone\"></i></button>\n    </div>\n</div>\n<!-- <div id=\"div-remote-video\"></div> -->\n<script src=\"https://webrtc.github.io/adapter/adapter-latest.js\"></script>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FeatherModule } from 'angular-feather';\nimport { Camera, Smile} from 'angular-feather/icons';\n\nconst icons = {\n  Camera,\n  Smile\n};\n\n@NgModule({\n  declarations: [],\n  imports: [\n    CommonModule,\n    FeatherModule.pick(icons),\n  ],\n  exports: [\n    FeatherModule,\n  ]\n})\nexport class IconsModule { }\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs';\nimport {Room} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\n\n@Injectable()\nexport class DataService {\n\n    private messageSource;\n    currentMessage = this.messageSource.asObservable();\n\n    constructor() { }\n\n    changeMessage(room: Room) {\n        this.messageSource.next(room);\n    }\n\n}\n","import {ChangeDetectorRef, Component, Inject, Injectable, Input, OnInit, ViewChild} from '@angular/core';\n// import { ChatService, ChatServiceToken, MultiUserChatPlugin, Room, RoomSummary } from '@proxym/ngx-chat';\nimport { jid } from '@xmpp/client';\nimport { ChatService, ChatServiceToken } from '../../services/chat-service';\nimport {MultiUserChatPlugin, Room, RoomSummary} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {HttpFileUploadPlugin} from '../../services/adapters/xmpp/plugins/http-file-upload.plugin';\nimport {ChatListStateService, ChatWindowState} from '../../services/chat-list-state.service';\nimport {SocketIOService} from '../../services/socket.io.service';\nimport {XmppChatAdapter} from '../../services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {ChatMessageInputComponent} from '../chat-message-input/chat-message-input.component';\nimport {RosterListComponent} from '../roster-list/roster-list.component';\n@Component({\n    selector: 'ngx-chat-multi-user-chat',\n    templateUrl: './multi-user-chat.component.html',\n    styleUrls: ['./multi-user-chat.component.less']\n})\n\n@Injectable()\nexport class MultiUserChatComponent implements OnInit {\n    @Input()\n    public chatWindowState: ChatWindowState;\n    multiUserChatPlugin: MultiUserChatPlugin;\n    roomJid: string;\n\n    @Input()\n    selectedRoom: Room;\n\n    @Input()\n    openA = 1;\n\n    @Input()\n    name: string;\n\n    allRooms: RoomSummary[] = [];\n    httpFileUploadPlugin: HttpFileUploadPlugin;\n    @ViewChild(ChatMessageInputComponent)\n    messageInput: ChatMessageInputComponent;\n    constructor(@Inject(ChatServiceToken) public chatService: ChatService,\n                private chatListService: ChatListStateService,\n                private changeDetector: ChangeDetectorRef,\n                private socketIOService: SocketIOService,\n                @Inject(ChatServiceToken) public chatServicee: XmppChatAdapter\n                ) {\n\n        this.httpFileUploadPlugin = this.chatService.getPlugin(HttpFileUploadPlugin);\n\n    }\n\n    ngOnInit() {\n    console.log('pffff', this.openA);\n    }\n\n\n\n    async queryAllRooms() {\n        this.allRooms = await this.multiUserChatPlugin.queryAllRooms();\n    }\n\n   /* ngOnDestroy() {\n        this.ngDestroy.next();\n        this.ngDestroy.complete();\n    }*/\n\n    public onClickHeader() {\n        this.chatWindowState.isCollapsed = !this.chatWindowState.isCollapsed;\n    }\n    delay(ms: number) {\n        return new Promise( resolve => setTimeout(resolve, ms) );\n    }\n\n    public onClickClose() {\n        this.openA = 0;\n    }\n\n    sendMessage() {\n        this.messageInput.onSendMessage();\n    }\n\n    async uploadFile(file: File) {\n        const url = await this.httpFileUploadPlugin.upload(file);\n        this.chatService.sendMessage(sessionStorage.getItem('username') + '@localhost', url);\n    }\n\n    onFocus() {\n        this.messageInput.focus();\n    }\n\n    onActionClick(chatAction: ChatAction) {\n        chatAction.onClick({\n            contact: this.chatWindowState.contact.jidBare.toString(),\n            chatWindow: this,\n        });\n    }\n\n}\n\nexport interface ChatAction {\n    cssClass: { [className: string]: boolean } | string | string[];\n    /**\n     * to identify actions\n     */\n    id: string;\n    html: string;\n\n    onClick(chatActionContext: ChatActionContext): void;\n}\n\nexport interface ChatActionContext {\n    contact: string;\n    chatWindow: MultiUserChatComponent;\n}\n","\n\n        <div  *ngIf=\"selectedRoom && openA == 1\" class=\"chat-window\">\n            <ngx-chat-filedrop [enabled]=\"httpFileUploadPlugin.fileUploadSupported\"\n                               (fileUpload)=\"uploadFile($event)\"\n                               [dropMessage]=\"chatService.translations.dropMessage\">\n\n                <div  [title]=\"\" class=\"chat-contact-header\">\n                    <div (click)=\"onClickHeader()\" class=\"chat-contact-avatar\">\n\n                    </div>\n\n                    <div (click)=\"onClickHeader()\" style=\"color: white;padding: 0 0.5em;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n    -webkit-box-flex: 1;\n    flex-grow: 1;\n    overflow: hidden;\n    font-weight: bold;\n    margin-left: -24px;\n    font-size: 13px;\">\n                        {{name}}\n                    </div>\n                    <div class=\"chat-video-audio-call\">\n\n                        <i  aria-hidden=\"true\"  class=\"ffa fa-video-camera\"  ></i>\n\n                        <i aria-hidden=\"true\" class=\"fa fa-phone\" style=\"margin-left: 15px;margin-right: 10px;\"></i>\n\n\n                    </div>\n\n                    <div class=\"chat-close\" (click)=\"onClickClose()\" style=\"color: white\">\n                        &times;\n                    </div>\n                </div>\n\n                <div *ngIf=\"selectedRoom\" class=\"chat-content\">\n                    <ngx-chat-room-messages [room]=\"selectedRoom\"></ngx-chat-room-messages>\n                    <div class=\"chat-input-container\">\n                        <ngx-chat-message-input [room]=\"selectedRoom\"></ngx-chat-message-input>\n                    </div>\n\n                </div>\n            </ngx-chat-filedrop>\n        </div>\n\n\n     <!--   <div *ngFor=\"let room of (multiUserChatPlugin.rooms$ | async)\">\n            <button (click)=\"selectedRoom = room\">\n                {{room.roomJid.bare().toString()}}\n            </button>\n        </div>\n\n        <ng-container *ngIf=\"selectedRoom\">\n            <ngx-chat-room-messages [room]=\"selectedRoom\"></ngx-chat-room-messages>\n            <ngx-chat-message-input [room]=\"selectedRoom\"></ngx-chat-message-input>\n        </ng-container>\n        <span *ngIf=\"(multiUserChatPlugin.rooms$ | async).length === 0\">(no room joined yet)</span>\n\n        <hr/>\n\n\n        <input [(ngModel)]=\"roomJid\" class=\"form-control\" type=\"text\" placeholder=\"room\"/>\n\n        <button (click)=\"joinRoom(roomJid)\">Join room</button>\n        <button (click)=\"queryAllRooms()\">List all rooms</button>-->\n\n\n\n","import {Component, Inject, Input, OnDestroy, OnInit} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport {debounceTime, distinctUntilChanged, map, takeUntil} from 'rxjs/operators';\nimport {Contact} from '../../core/contact';\nimport {Presence} from '../../core/presence';\nimport {UnreadMessageCountPlugin} from '../../services/adapters/xmpp/plugins/unread-message-count.plugin';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\nimport {RosterPlugin} from '../../services/adapters/xmpp/plugins/roster.plugin';\n\n@Component({\n    selector: 'ngx-chat-roster-contact',\n    templateUrl: './roster-contact.component.html',\n    styleUrls: ['./roster-contact.component.less']\n})\nexport class RosterContactComponent implements OnInit, OnDestroy {\n\n    @Input()\n    contact: Contact;\n\n    presence = Presence;\n\n    unreadCount = 0;\n\n    me;\n\n    private ngDestroy = new Subject<void>();\n\n    constructor(@Inject(ChatServiceToken) private chatService: ChatService) {\n        this.chatService.getPlugin(UnreadMessageCountPlugin).jidToUnreadCount$\n            .pipe(\n                map(jidToUnreadCount => jidToUnreadCount[this.contact.jidBare.toString()] || 0),\n                distinctUntilChanged(),\n                debounceTime(100),\n                takeUntil(this.ngDestroy),\n            ).subscribe(unreadCount => this.unreadCount = unreadCount);\n        this.chatService.getPlugin(UnreadMessageCountPlugin).onBeforeOnline();\n        this.chatService.getPlugin(RosterPlugin).getRosterContacts();\n    }\n\n    ngOnInit() {\n        this.chatService.getPlugin(UnreadMessageCountPlugin).jidToUnreadCount$\n            .pipe(\n                map(jidToUnreadCount => jidToUnreadCount[this.contact.jidBare.toString()] || 0),\n                distinctUntilChanged(),\n                debounceTime(100),\n                takeUntil(this.ngDestroy),\n            ).subscribe(unreadCount => this.unreadCount = unreadCount);\n        this.chatService.getPlugin(UnreadMessageCountPlugin).onBeforeOnline();\n        this.chatService.getPlugin(RosterPlugin).getRosterContacts();\n        this.me = sessionStorage.getItem('username');\n        console.log('prtty', this.me);\n\n    }\n\n\n    ngOnDestroy(): void {\n        this.ngDestroy.next();\n        this.ngDestroy.complete();\n    }\n\n}\n","<div class=\"roster-contact\">\n\n    <div class=\"roster-contact-avatar\">\n        <img [src]=\"contact.avatar\"/>\n    </div>\n    <div class=\"roster-contact-status\">\n        <div *ngIf=\"(contact.presence$ | async) == presence.present\"\n             [ngClass]=\"'roster-presence--' + (contact.presence$ | async)\" class=\"roster-presence\">\n        </div>\n        <div *ngIf=\"(contact.presence$ | async) == presence.unavailable\"\n             [ngClass]=\"'roster-presence--' + (contact.presence$ | async)\" class=\"roster-presence\">\n        </div>\n        <div *ngIf=\"(contact.presence$ | async) == presence.away\"\n             [ngClass]=\"'roster-presence--' + (contact.presence$ | async)\" class=\"roster-presence\">\n        </div>\n        <div *ngIf=\"(contact.presence$ | async) == presence.dnd\"\n             [ngClass]=\"'roster-presence--' + (contact.presence$ | async)\" class=\"roster-presence\">\n        </div>\n\n\n        <!--   <div *ngIf=\"(contact.presence$ | async) == presence.unavailable\"\n                [ngClass]=\"'roster-presence--' + (contact.presence$ | async)\" class=\"roster-presence\">\n           </div>-->\n    </div>\n\n    <div class=\"roster-contact-name\">\n        {{contact.name}}\n    </div>\n\n\n    <div *ngIf=\"unreadCount\" class=\"unread-message-badge\">{{unreadCount}}</div>\n</div>\n","import {animate, state, style, transition, trigger} from '@angular/animations';\nimport {Component, EventEmitter, Inject, Input, OnInit, Output} from '@angular/core';\nimport {combineLatest, Observable} from 'rxjs';\nimport {map} from 'rxjs/operators';\nimport {Contact} from '../../core/contact';\nimport {ChatListStateService} from '../../services/chat-list-state.service';\nimport {ChatService, ChatServiceToken} from '../../services/chat-service';\nimport {ThemePalette} from '@angular/material/core';\nimport {Client, jid, xml} from '@xmpp/client';\nimport {LogService} from '../../services/log.service';\nimport {XmppChatAdapter} from '../../services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {parse, stringify} from 'ltx';\nimport {MultiUserChatPlugin, Room, RoomSummary} from '../../services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {DataService} from '../multi-user-chat/data.service';\nimport { Observer } from 'rxjs';\nimport { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';\n// import { imageBase64Url } from '';\nimport { delay } from 'rxjs/operators';\nimport {dummyAvatar} from '../../core/contact-avatar';\n\n@Component({\n    selector: 'ngx-chat-roster-list',\n    templateUrl: './roster-list.component.html',\n    styleUrls: ['./roster-list.component.less'],\n    animations: [\n        trigger('rosterVisibility', [\n            state('hidden', style({\n                right: '-14em',\n            })),\n            state('shown', style({\n                right: '0em',\n            })),\n            transition('hidden => shown', animate('400ms ease')),\n            transition('shown => hidden', animate('400ms ease'))\n        ]),\n        trigger('drawerVisibility', [\n            state('hidden', style({\n                right: '0em',\n            })),\n            state('shown', style({\n                right: '14em',\n            })),\n            transition('hidden => shown', animate('400ms ease')),\n            transition('shown => hidden', animate('400ms ease'))\n        ])\n    ]\n})\nexport class RosterListComponent implements OnInit {\n\n    @Input()\n    color: ThemePalette;\n\n    @Input()\n    rosterState: 'hidden' | 'shown';\n\n    @Input()\n    contacts: Observable<Contact[]>;\n\n    @Input()\n    contactRequestsReceived$: Observable<Contact[]>;\n\n    @Input()\n    contactRequestsSent$: Observable<Contact[]>;\n\n    @Input()\n    contactsUnaffiliated$: Observable<Contact[]>;\n\n    hasNoContacts$: Observable<boolean>;\n\n    @Output()\n    rosterStateChanged: EventEmitter<string> = new EventEmitter<string>();\n\n    @Input()\n    statusColor = '#69ca48';\n\n    theRoom: Room;\n\n    @Output() countChanged: EventEmitter<number> =   new EventEmitter();\n    @Output() voted = new EventEmitter<Room>();\n    @Output() roomName = new EventEmitter<String>();\n    @Output() wind = new EventEmitter<number>();\n    selectedRoom: Room;\n    nameR: string;\n    allRooms: RoomSummary[] = [];\n\n    isOpen = 1;\n\n    nickname;\n\n    iqResponse: string;\n\n    imgAway = require('../../../../../../../src/assets/away.png');\n    imgAvailable = require('../../../../../../../src/assets/available.png');\n    imgDnd = require('../../../../../../../src/assets/dnd.png');\n\n    public otherJid: any;\n    me: string;\n\n    base64TrimmedURL: string;\n    base64DefaultURL: string;\n    generatedImage: string;\n    windowOPen: boolean;\n\n    public client: Client;\n    multiUserChatPlugin: MultiUserChatPlugin;\n    constructor(@Inject(ChatServiceToken) public chatService: ChatService,\n                private chatListService: ChatListStateService, private logService: LogService,\n                @Inject(ChatServiceToken) public chatServices: XmppChatAdapter,\n                @Inject(ChatServiceToken) private data: DataService,\n                private domSanitizer: DomSanitizer) {\n        this.multiUserChatPlugin = chatService.getPlugin(MultiUserChatPlugin);\n    }\n\n    ngOnInit() {\n        if (!this.contacts) {\n            this.contacts = this.chatService.contactsSubscribed$;\n        }\n        if (!this.contactRequestsReceived$) {\n            this.contactRequestsReceived$ = this.chatService.contactRequestsReceived$;\n        }\n        if (!this.contactRequestsSent$) {\n            this.contactRequestsSent$ = this.chatService.contactRequestsSent$;\n        }\n        if (!this.contactsUnaffiliated$) {\n            this.contactsUnaffiliated$ = this.chatService.contactsUnaffiliated$;\n        }\n        this.hasNoContacts$ = combineLatest([\n            this.contacts,\n            this.contactRequestsReceived$,\n            this.contactRequestsSent$,\n            this.contactsUnaffiliated$,\n        ]).pipe(\n            map(([contacts, received, sent, unaffiliated]) => contacts.length + received.length + sent.length + unaffiliated.length === 0)\n        );\n\n        this.queryAllRooms();\n        this.me = sessionStorage.getItem('username');\n        this.sendIqq(this.me + '@localhost').then(data => {\n            const itemChild = data.toString();\n            const mySubString = itemChild.match(new RegExp('<PHOTO><BINVAL>' + '(.*)' + '</BINVAL><TYPE>'));\n            const nick = itemChild.match(new RegExp('<NICKNAME>' + '(.*)' + '</NICKNAME>'));\n\n            if (mySubString !== null) {\n                const mySubb = mySubString.toString().substring(\n                    mySubString.toString().lastIndexOf(',') + 1,\n                    mySubString.toString().lastIndexOf('=') + 1\n                );\n                this.nickname = nick.toString().substring(\n                    nick.toString().lastIndexOf(',') + 1\n                );\n\n                this.getImage('data:image/jpeg;base64,' + mySubb);\n\n            } else {\n                this.getImage(dummyAvatar);\n            }\n\n        });\n\n    }\n\n    modo(value: string) {\n        switch (value) {\n            case '1':\n                this.sendStanzaChat();\n                this.statusColor = '#69ca48';\n                break;\n            case '2':\n                this.sendStanzaAway();\n                this.statusColor = '#ffbe00';\n                break;\n        }\n    }\n\n    async joinRoom(roomJid: string) {\n        const occupantJid = jid(roomJid);\n        this.selectedRoom = await this.multiUserChatPlugin.joinRoom(occupantJid);\n        this.queryAllRooms();\n        this.voted.emit(this.selectedRoom);\n        this.roomName.emit(this.nameR);\n        this.wind.emit(this.isOpen);\n\n    }\n\n    async queryAllRooms() {\n        this.allRooms = await this.multiUserChatPlugin.queryAllRooms();\n    }\n\n    onAddContact() {\n        if (this.otherJid) {\n        this.chatService.addContact(this.otherJid + '@localhost');\n        }\n    }\n\n    onRemoveContact() {\n        this.chatService.removeContact(this.otherJid + '@localhost');\n    }\n\n    onClickContact(contact: Contact) {\n        this.chatListService.openChat(contact);\n    }\n\n    public send(content: any): PromiseLike<void> {\n        this.logService.debug('>>>', content);\n        try {\n            return this.client.send(content);\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    sendStanzaAway() {\n        const request = parse('<presence><show>away</show></presence>');\n        if (request) {\n            return this.chatServices.chatConnectionService.send(request);\n        }\n    }\n\n    sendStanzaDnd() {\n        const request = parse('<presence><show>dnd</show></presence>');\n        if (request) {\n            return this.chatServices.chatConnectionService.send(request);\n        }\n    }\n\n    sendStanzaChat() {\n        const request = parse('<presence><show>chat</show></presence>');\n        if (request) {\n            return this.chatServices.chatConnectionService.send(request);\n        }\n    }\n\n    getName(name: string) {\n        this.nameR = name;\n    }\n\n    toggleVisibility() {\n        const newState = this.rosterState === 'shown' ? 'hidden' : 'shown';\n        this.rosterStateChanged.emit(newState);\n    }\n\n\n\n    sanatizeUrl(generatedImageUrl): SafeResourceUrl {\n        return this.domSanitizer.bypassSecurityTrustResourceUrl(generatedImageUrl);\n    }\n\n    /* Method to fetch image from Url */\n    getBase64ImageFromURL(url: string): Observable<string> {\n        return Observable.create((observer: Observer<string>) => {\n            // create an image object\n            const img = new Image();\n            img.crossOrigin = 'Anonymous';\n            img.src = url;\n            if (!img.complete) {\n                // This will call another method that will create image from url\n                img.onload = () => {\n                    observer.next(this.getBase64Image(img));\n                    observer.complete();\n                };\n                img.onerror = err => {\n                    observer.error(err);\n                };\n            } else {\n                observer.next(this.getBase64Image(img));\n                observer.complete();\n            }\n        });\n    }\n\n    /* Method to create base64Data Url from fetched image */\n    getBase64Image(img: HTMLImageElement): string {\n        // We create a HTML canvas object that will create a 2d image\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\n        canvas.width = img.width;\n        canvas.height = img.height;\n        const ctx: CanvasRenderingContext2D = canvas.getContext('2d');\n        // This will draw image\n        ctx.drawImage(img, 0, 0);\n        // Convert the drawn image to Data URL\n        const dataURL: string = canvas.toDataURL('image/png');\n        this.base64DefaultURL = dataURL;\n        return dataURL.replace(/^data:image\\/(png|jpg);base64,/, '');\n    }\n\n    getImage(imageUrl: string) {\n        this.windowOPen = true;\n        this.getBase64ImageFromURL(imageUrl).subscribe((base64Data: string) => {\n            this.base64TrimmedURL = base64Data;\n            this.createBlobImageFileAndShow();\n        });\n    }\n\n    getImageWithoutWindowOpen(imageUrl: string) {\n        this.windowOPen = false;\n        this.getBase64ImageFromURL(imageUrl).subscribe((base64Data: string) => {\n            this.base64TrimmedURL = base64Data;\n            this.createBlobImageFileAndShow();\n        });\n    }\n\n    /* Method that will create Blob and show in new window */\n    createBlobImageFileAndShow(): void {\n        this.dataURItoBlob(this.base64TrimmedURL).subscribe((blob: Blob) => {\n            const imageBlob: Blob = blob;\n            const imageName: string = this.generateName();\n            const imageFile: File = new File([imageBlob], imageName, {\n                type: 'image/jpeg'\n            });\n            this.generatedImage = window.URL.createObjectURL(imageFile);\n            // on demo image not open window\n          /*  if (this.windowOPen) {\n                window.open(this.generatedImage);\n            }*/\n        });\n    }\n\n    /**Method to Generate a Name for the Image */\n    generateName(): string {\n        const date: number = new Date().valueOf();\n        let text = '';\n        const possibleText =\n            'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n        for (let i = 0; i < 5; i++) {\n            text += possibleText.charAt(\n                Math.floor(Math.random() * possibleText.length)\n            );\n        }\n        // Replace extension according to your media type like this\n        return date + '.' + text + '.jpeg';\n    }\n\n    /* Method to convert Base64Data Url as Image Blob */\n    dataURItoBlob(dataURI: string): Observable<Blob> {\n        return Observable.create((observer: Observer<Blob>) => {\n            const byteString: string = window.atob(dataURI);\n            const arrayBuffer: ArrayBuffer = new ArrayBuffer(byteString.length);\n            const int8Array: Uint8Array = new Uint8Array(arrayBuffer);\n            for (let i = 0; i < byteString.length; i++) {\n                int8Array[i] = byteString.charCodeAt(i);\n            }\n            const blob = new Blob([int8Array], { type: 'image/jpeg' });\n            observer.next(blob);\n            observer.complete();\n        });\n    }\n\n    async sendIq() {\n        const request = parse('');\n        if (request) {\n            const response = await this.chatServices.chatConnectionService.sendIq(request);\n            this.iqResponse = stringify(response, 4, 1);\n        }\n    }\n\n    async sendIqq(jid: string) {\n\n        const response = await this.chatServices.chatConnectionService.sendIq(\n            xml('iq', {type: 'get', to: jid, id: this.chatServices.chatConnectionService.getNextIqId()},\n                xml('vCard', {xmlns: 'vcard-temp'})\n            ));\n        return response;\n    }\n\n}\n","<div (click)=\"toggleVisibility()\" [@drawerVisibility]=\"rosterState\" class=\"roster-drawer\">\n    <div *ngIf=\"rosterState === 'shown'\" class=\"roster-drawer__button\">&raquo;</div>\n    <div *ngIf=\"rosterState === 'hidden'\" class=\"roster-drawer__button\">&laquo;</div>\n</div>\n\n<div [@rosterVisibility]=\"rosterState\" [attr.data-ngx-chat-state]=\"chatService.state$ |async\" class=\"roster-list\">\n\n    <div class=\"roster-header\">\n        {{ chatService.translations.chat }}\n    </div>\n\n\n    <ng-container>\n        <div class=\"roster-group-header\">{{chatService.translations.profile}}</div>\n        <img [src]=\"sanatizeUrl(generatedImage)\" style=\"max-width: 50%;\n    border-radius: 8em;\n    align-self: center;\">\n        <!--<h3 style=\"text-align: center;color: #128C7E;\">{{me.substring(0,1).toUpperCase() + me.substring(1)}}</h3>-->\n       <h3 style=\"text-align: center;color: #128C7E;\">{{this.nickname}}</h3>\n        <mat-radio-group aria-label=\"Select an option\" class=\"mat-radio-group\">\n            <mat-radio-button (click)=\"sendStanzaChat()\" [checked]=\"true\" style=\" color: #69ca48\"\n                              value=\"1\">\n                <img [src]=\"imgAvailable\" style=\"margin-right: 31px;margin-bottom: 10px;\"/>\n            </mat-radio-button>\n            <mat-radio-button (click)=\"sendStanzaAway()\" style=\"color: #ffbe00;\" value=\"2\">\n                <img [src]=\"imgAway\" style=\"margin-bottom: 12px;\"/>\n            </mat-radio-button>\n            <mat-radio-button (click)=\"sendStanzaDnd()\" style=\"color: #ffbe00;\" value=\"2\">\n                <img [src]=\"imgDnd\" style=\"margin-bottom: 12px;\"/>\n            </mat-radio-button>\n        </mat-radio-group>\n\n\n        <!--  <div class=\"select-status\">\n\n              <select [ngStyle]=\"{'color': statusColor}\" (change)=\"modo($event.target.value)\" class=\"browser-default custom-select\" style=\"height: 27px;\">\n                  <option selected value=\"1\" style=\"color: #69ca48;\">      Available</option>\n                  <option value=\"2\" style=\"color:#ffbe00;\">      Away</option>\n              </select>\n          </div>-->\n\n\n    </ng-container>\n    <ng-container *ngIf=\"(me != 'anis') && (me != 'amani') && (me != 'maha')\" >\n        <div class=\"roster-group-header\">{{chatService.translations.addContact}}</div>\n\n        <div  class=\"add-contacts\">\n\n            <input [(ngModel)]=\"otherJid\" placeholder=\"  username\"\n                   type=\"text\"/>\n\n            <div class=\"btn-a-r\">\n                <button (click)=\"onAddContact()\" class=\"btn-add\">Add contact</button>\n                <button (click)=\"onRemoveContact()\" class=\"btn-remove\">Remove contact</button>\n            </div>\n\n        </div>\n\n\n    </ng-container>\n\n\n    <ng-container *ngIf=\"(contacts | async).length > 0\">\n        <div class=\"roster-group-header\">{{chatService.translations.contacts}}</div>\n        <div class=\"contact-list-wrapper\">\n\n            <ngx-chat-roster-contact  (click)=\"onClickContact(contact)\"\n                                     *ngFor=\"let contact of (contacts | async)\"\n                                     [contact]=\"contact\">\n            </ngx-chat-roster-contact>\n\n        </div>\n    </ng-container>\n\n\n    <!--<ng-container>\n\n        <div class=\"room-room\" *ngFor=\"let room of allRooms\">\n            <button style=\"    border-radius: 16px;\" >{{room.name}} </button>\n            <button class=\"join-room\"  style=\"border-radius: 19px\" (click)=\"getName(room.name);joinRoom(room.jid);\">join</button>\n        </div>\n    </ng-container>-->\n\n\n    <ng-container *ngIf=\"(me != 'anis') && (me != 'amani') && (me != 'maha')\">\n\n        <div class=\"roster-group-header\">{{chatService.translations.chatRooms}}</div>\n\n        <div class=\"room-room\" *ngFor=\"let room of allRooms\">\n\n    <div [title]=\"room.name\" class=\"roster-contact\">\n\n\n        <div class=\"roster-contact-name\">\n            {{room.name}}\n        </div>\n        <button class=\"join-room\"  (click)=\"getName(room.name);joinRoom(room.jid);\">join</button>\n\n\n    </div>\n    </div>\n</ng-container>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n    <ng-container *ngIf=\"(contactRequestsReceived$ | async).length > 0\">\n        <div class=\"roster-group-header\">{{chatService.translations.contactRequestIn}}</div>\n        <div class=\"contact-list-wrapper\">\n\n            <ngx-chat-roster-contact (click)=\"onClickContact(contact)\"\n                                     *ngFor=\"let contact of (contactRequestsReceived$ | async)\"\n                                     [contact]=\"contact\">\n            </ngx-chat-roster-contact>\n\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"(contactRequestsSent$ | async).length > 0\">\n        <div class=\"roster-group-header\">{{chatService.translations.contactRequestOut}}</div>\n        <div class=\"contact-list-wrapper\">\n\n            <ngx-chat-roster-contact (click)=\"onClickContact(contact)\"\n                                     *ngFor=\"let contact of (contactRequestsSent$ | async)\"\n                                     [contact]=\"contact\">\n            </ngx-chat-roster-contact>\n\n        </div>\n    </ng-container>\n\n    <!--  <ng-container *ngIf=\"(contactsUnaffiliated$ | async).length > 0\">\n          <div class=\"roster-group-header\">{{chatService.translations.contactsUnaffiliated}}</div>\n          <div class=\"contact-list-wrapper\">\n\n              <ng-container *ngFor=\"let contact of (contactsUnaffiliated$ | async)\">\n                  <ngx-chat-roster-contact *ngIf=\"contact.messages.length > 0\"\n                                           [contact]=\"contact\"\n                                           (click)=\"onClickContact(contact)\">\n                  </ngx-chat-roster-contact>\n              </ng-container>\n\n          </div>\n      </ng-container>-->\n\n    <div *ngIf=\"hasNoContacts$ | async\" class=\"roster-list__empty\">\n        {{chatService.translations.noContacts}}\n    </div>\n\n    <!-- <ng-container *ngIf=\"chatService.enableDebugging\">\n         <hr/>\n\n         <div class=\"contact-pending-request-received-wrapper\">\n             debug contact requests in:\n             <div class=\"contact-pending-request-received\" *ngFor=\"let request of (chatService.contactRequestsReceived$ | async)\">\n                 {{request.name}}\n             </div>\n         </div>\n\n         <hr/>\n\n         <div class=\"contact-pending-request-sent-wrapper\">\n             debug contact requests out:\n             <div class=\"contact-pending-request-sent\" *ngFor=\"let request of (chatService.contactRequestsSent$ | async)\">\n                 {{request.name}}\n             </div>\n         </div>\n\n         <hr/>\n\n         <p>\n             debug contacts (count: {{ (chatService.contacts$ | async).length }})<br/>\n         </p>\n         <p *ngFor=\"let contact of (chatService.contacts$|async)\" style=\"margin-bottom: 1em\">\n             <em>{{contact.name}}:</em><br/>\n             subscription={{contact.subscription$ | async}}<br/>\n             presence={{contact.presence$ | async}}<br/>\n             pendingIn={{contact.pendingIn$ | async}}<br/>\n             pendingOut={{contact.pendingOut$ | async}}\n         </p>\n         <p class=\"roster-debug-state\">state: {{chatService.state$ | async}}</p>\n     </ng-container>-->\n\n\n    <div class=\"roster-footer\">\n    </div>\n\n</div>\n","// tslint:disable\nexport const dummyAvatar = 'data:image/png;base64,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';\n\n// export const dummyAvatar = 'data:image/png;base64,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';\n","import {jid as parseJid} from '@xmpp/client';\nimport {JID} from '@xmpp/jid';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {LogService} from '../services/log.service';\nimport {dummyAvatar} from './contact-avatar';\nimport {Direction, Message} from './message';\nimport {DateMessagesGroup, MessageStore} from './message-store';\nimport {Presence} from './presence';\nimport {ContactSubscription} from './subscription';\nimport {findLast} from './utils-array';\n\nexport interface ContactMetadata {\n    [key: string]: any;\n}\n\nexport interface JidToPresence {\n    [jid: string]: Presence;\n}\n\nexport class Contact {\n\n    public avatar = dummyAvatar;\n    public metadata: ContactMetadata = {};\n\n    /** use {@link jidBare}, jid resource is only set for chat room contacts */\n    public jidFull: JID;\n    public jidBare: JID;\n    public presence$ = new BehaviorSubject<Presence>(Presence.unavailable);\n    public subscription$ = new BehaviorSubject<ContactSubscription>(ContactSubscription.none);\n    public pendingOut$ = new BehaviorSubject(false);\n    public pendingIn$ = new BehaviorSubject(false);\n    public resources$ = new BehaviorSubject<JidToPresence>({});\n\n    private messageStore: MessageStore<Message>;\n\n    get messages$(): Subject<Message> {\n        return this.messageStore.messages$;\n    }\n\n    get messages(): Message[] {\n        return this.messageStore.messages;\n    }\n\n    get dateMessagesGroups(): DateMessagesGroup[] {\n        return this.messageStore.dateMessageGroups;\n    }\n\n    get mostRecentMessage() {\n        return this.messageStore.messages[this.messageStore.messages.length - 1];\n    }\n\n    get mostRecentMessageReceived() {\n        return findLast(this.messageStore.messages, msg => msg.direction === Direction.in);\n    }\n\n    get mostRecentMessageSent() {\n        return findLast(this.messageStore.messages, msg => msg.direction === Direction.out);\n    }\n\n    /**\n     * Do not call directly, use {@link ContactFactoryService#createContact} instead.\n     */\n    constructor(jidPlain: string,\n                public name: string,\n                logService?: LogService,\n                avatar?: string) {\n        if (avatar) {\n            this.avatar = avatar;\n        }\n        const jid = parseJid(jidPlain);\n        this.jidFull = jid;\n        this.jidBare = jid.bare();\n        this.messageStore = new MessageStore(logService);\n    }\n\n    addMessage(message: Message) {\n        this.messageStore.addMessage(message);\n    }\n\n    public equalsBareJid(other: Contact | JID) {\n        const otherJid = other instanceof Contact ? other.jidBare : other.bare();\n        return this.jidBare.equals(otherJid);\n    }\n\n    isSubscribed() {\n        const subscription = this.subscription$.getValue();\n        return subscription === ContactSubscription.both || subscription === ContactSubscription.to;\n    }\n\n    isUnaffiliated() {\n        return !this.isSubscribed() && !this.pendingIn$.getValue() && !this.pendingOut$.getValue();\n    }\n\n    updateResourcePresence(jid: string, presence: Presence) {\n        const resources = this.resources$.getValue();\n        resources[jid] = presence;\n        this.presence$.next(this.reducePresences(resources));\n        this.resources$.next(resources);\n    }\n\n    getMessageById(id: string) {\n        return this.messageStore.messageIdToMessage[id];\n    }\n\n    private reducePresences(jidToPresence: JidToPresence): Presence {\n        let result = Presence.unavailable;\n        for (const jid in jidToPresence) {\n            if (jidToPresence.hasOwnProperty(jid)) {\n                const presence = jidToPresence[jid];\n                if (presence === Presence.present) {\n                    result = Presence.present;\n                } else if (presence === Presence.away) {\n                    result = Presence.away;\n                } else if (presence === Presence.dnd) {\n                    result = Presence.dnd;\n                }\n            }\n        }\n        return result;\n    }\n\n}\n","export function getDomain(service: string) {\n    const domain = service.split('://')[1] || service;\n    return domain.split(':')[0].split('/')[0];\n}\n","export function id(): string {\n    let i;\n    while (!i) {\n        i = Math.random()\n            .toString(36)\n            .substr(2, 12);\n    }\n    return i;\n}\n","import {Subject} from 'rxjs';\nimport {LogService} from '../services/log.service';\nimport {Message} from './message';\nimport {findSortedIndex, findSortedInsertionIndexLast, insertSortedLast} from './utils-array';\nimport {extractDateStringFromDate} from './utils-date';\n\nexport interface DateMessagesGroup {\n    /** is equal to the date where one message on that date was received */\n    date: Date;\n    messages: Message[];\n}\n\nexport class MessageStore<T extends Message> {\n\n    public messages$: Subject<T>;\n    public messages: T[] = [];\n    public dateMessageGroups: DateMessagesGroup[] = [];\n    public messageIdToMessage: { [key: string]: T } = {};\n\n    constructor(private logService: LogService) {\n        this.messages$ = new Subject<T>();\n    }\n\n    addMessage(message: T) {\n        if (message.id && this.messageIdToMessage[message.id]) {\n            if (this.logService) {\n                this.logService.warn(`message with id ${message.id} already exists`);\n            }\n            return false;\n        }\n        insertSortedLast(message, this.messages, m => m.datetime);\n        this.addToDateMessageGroups(message);\n        this.messageIdToMessage[message.id] = message;\n        this.messages$.next(message);\n        return true;\n    }\n\n    private addToDateMessageGroups(message: T) {\n        const dateString = extractDateStringFromDate(message.datetime);\n        const groupIndex = findSortedIndex(dateString, this.dateMessageGroups, group => extractDateStringFromDate(group.date));\n        if (groupIndex !== -1) {\n            insertSortedLast(message, this.dateMessageGroups[groupIndex].messages, m => m.datetime);\n        } else {\n            const groupToInsert = {\n                date: message.datetime,\n                messages: [message]\n            };\n            const insertIndex = findSortedInsertionIndexLast(dateString, this.dateMessageGroups,\n                group => extractDateStringFromDate(group.date));\n            this.dateMessageGroups.splice(insertIndex, 0, groupToInsert);\n        }\n    }\n\n}\n","export enum MessageState {\n    /**\n     * Not yet sent\n     */\n    SENDING = 'sending',\n    /**\n     * Sent, but neither received nor seen by the recipient\n     */\n    SENT = 'sent',\n    /**\n     * The recipient client has received the message but the recipient has not seen it yet\n     */\n    RECIPIENT_RECEIVED = 'recipientReceived',\n    /**\n     * The message has been seen by the recipient\n     */\n    RECIPIENT_SEEN = 'recipientSeen',\n}\n\nexport interface Message {\n    direction: Direction;\n    body: string;\n    datetime: Date;\n    id?: string;\n    delayed: boolean;\n    /**\n     * if no explicit state is set for the message, use implicit contact message states instead.\n     */\n    state?: MessageState;\n}\n\nexport enum Direction {\n    in = 'in',\n    out = 'out',\n}\n","export enum Presence {\n\n    present = 'present',\n    unavailable = 'unavailable',\n    away = 'away',\n    dnd = 'dnd',\n\n}\n","export enum ContactSubscription {\n\n    to = 'to',\n    from = 'from',\n    both = 'both',\n    none = 'none'\n\n}\n","export const identity: <T>(elem: T) => T = elem => elem;\nexport const toString: (elem: any) => string = elem => elem.toString();\n\n/**\n * given a sorted list, insert the given item in place after the last matching item.\n * @param elemToInsert the item to insert\n * @param list the list in which the element should be inserted\n * @param keyExtractor an optional element mapper, defaults to toString\n */\nexport function insertSortedLast<U>(elemToInsert: U, list: U[], keyExtractor: (a: U) => any = toString) {\n    list.splice(findSortedInsertionIndexLast(keyExtractor(elemToInsert), list, keyExtractor), 0, elemToInsert);\n}\n\n/**\n * Find the highest possible index where the given element should be inserted so that the order of the list is preserved.\n * @param needle the needle to find\n * @param haystack the pre sorted list\n * @param keyExtractor an optional needle mapper, defaults to toString\n */\nexport function findSortedInsertionIndexLast<U, V>(needle: U, haystack: V[], keyExtractor: (a: V) => any = toString) {\n    let low = 0;\n    let high = haystack.length;\n\n    while (low !== high) {\n\n        const cur = Math.floor(low + (high - low) / 2);\n\n        if (needle < keyExtractor(haystack[cur])) {\n            high = cur;\n        } else {\n            low = cur + 1;\n        }\n\n    }\n\n    return low;\n}\n\n/**\n * Find the index of an element in a sorted list. If list contains no matching element, return -1.\n */\nexport function findSortedIndex<U, V>(needle: U, haystack: V[], keyExtractor: (a: V) => any = toString) {\n    let low = 0;\n    let high = haystack.length;\n\n    while (low !== high) {\n\n        const cur = Math.floor(low + (high - low) / 2);\n\n        const extractedKey = keyExtractor(haystack[cur]);\n        if (needle < extractedKey) {\n            high = cur;\n        } else if (needle > extractedKey) {\n            low = cur + 1;\n        } else {\n            return cur;\n        }\n\n    }\n\n    return -1;\n}\n\n/**\n * Like {@link Array.prototype.findIndex} but finds the last index instead.\n */\nexport function findLastIndex<T>(arr: T[], predicate: (x: T) => boolean) {\n    for (let i = arr.length - 1; i >= 0; i--) {\n        if (predicate(arr[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\n/**\n * Like {@link Array.prototype.find} but finds the last matching element instead.\n */\nexport function findLast<T>(arr: T[], predicate: (x: T) => boolean) {\n    return arr[findLastIndex(arr, predicate)];\n}\n\n/**\n * Return a new array, where all elements from the original array occur exactly once.\n */\nexport function removeDuplicates<T>(arr: T[], eq: (x: T, y: T) => boolean = (x: T, y: T) => x === y): T[] {\n    const results = [];\n    for (const arrElement of arr) {\n        let duplicateFound = false;\n        for (const resultElement of results) {\n            if (eq(arrElement, resultElement)) {\n                duplicateFound = true;\n                break;\n            }\n        }\n        if (!duplicateFound) {\n            results.push(arrElement);\n        }\n    }\n    return results;\n}\n","/**\n * converts date objects to date strings like '2011-10-05'\n */\nexport function extractDateStringFromDate(date: Date): string {\n    const isoString = date.toISOString();\n    return isoString.slice(0, isoString.indexOf('T'));\n}\n","export const urlRegex = /(\\b(https?|ftp):\\/\\/[-A-Z0-9+&@#\\/%?=~_|!:,.;]*[-A-Z0-9+&@#\\/%=~_|])/gim;\n\nexport function extractUrls(message: string) {\n    return message.match(urlRegex) || [];\n}\n","/**\n * Object.values replacement => return list of values for each key in obj\n */\nexport function extractValues<U>(obj: { [key: string]: U }): U[] {\n    const result = [] as U[];\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n            result.push(obj[key]);\n        }\n    }\n    return result;\n}\n\nexport function sum(arr: number[]) {\n    return arr.reduce((a, b) => a + b, 0);\n}\n","export class TimeoutError extends Error {\n    constructor(message?: string) {\n        super(message);\n        this.name = 'TimeoutError';\n    }\n}\n\nexport function delay(ms: number) {\n    let localDelay;\n    const promise = new Promise(resolve => {\n        localDelay = setTimeout(resolve, ms);\n    });\n    (promise as any).timeout = localDelay;\n    return promise;\n}\n\nexport function timeout(promise: Promise<any>, ms: number) {\n    const promiseDelay = delay(ms);\n\n    // eslint-disable-next-line unicorn/consistent-function-scoping\n    function cancelDelay() {\n        clearTimeout((promiseDelay as any).timeout);\n    }\n\n    return Promise.race([\n        (promise as any).finally(cancelDelay),\n        promiseDelay.then(() => {\n            throw new TimeoutError();\n        }),\n    ]);\n}\n","import {ComponentFactoryResolver, Directive, Input, OnChanges, ViewContainerRef} from '@angular/core';\nimport {ChatMessageLinkComponent} from '../components/chat-message-link/chat-message-link.component';\nimport {ChatMessageTextComponent} from '../components/chat-message-text/chat-message-text.component';\nimport {extractUrls} from '../core/utils-links';\n\n@Directive({\n    selector: '[ngxChatLinks]'\n})\nexport class LinksDirective implements OnChanges {\n\n    // tslint:disable-next-line:no-input-rename\n    @Input('ngxChatLinks') ngxChatLinks: string;\n\n    constructor(private resolver: ComponentFactoryResolver,\n                private viewContainerRef: ViewContainerRef) {\n    }\n\n    private transform() {\n        const message: string = this.ngxChatLinks;\n\n        if (message) {\n            const links = extractUrls(message);\n\n            const chatMessageTextFactory = this.resolver.resolveComponentFactory(ChatMessageTextComponent);\n            const chatMessageLinkFactory = this.resolver.resolveComponentFactory(ChatMessageLinkComponent);\n\n            let lastIndex = 0;\n            for (const link of links) {\n                const currentIndex = message.indexOf(link, lastIndex);\n\n                const textBeforeLink = this.viewContainerRef.createComponent(chatMessageTextFactory);\n                textBeforeLink.instance.text = message.substring(lastIndex, currentIndex);\n\n                const linkRef = this.viewContainerRef.createComponent(chatMessageLinkFactory);\n                linkRef.instance.link = link;\n                linkRef.instance.text = this.shorten(link);\n\n                lastIndex = currentIndex + link.length;\n            }\n\n            const textAfterLastLinkSpan = this.viewContainerRef.createComponent(chatMessageTextFactory);\n            textAfterLastLinkSpan.instance.text = message.substring(lastIndex);\n        }\n    }\n\n    private shorten(url: string) {\n        const parser = document.createElement('a');\n        parser.href = url;\n\n        let shortenedPathname = parser.pathname;\n        if (shortenedPathname.length > 17) {\n            shortenedPathname = shortenedPathname.substring(0, 5) + '...' + shortenedPathname.substring(shortenedPathname.length - 10);\n        }\n\n        return parser.protocol + '//' + parser.host + shortenedPathname;\n    }\n\n    ngOnChanges(): void {\n        this.transform();\n    }\n\n}\n","import {TextFieldModule} from '@angular/cdk/text-field';\nimport {CommonModule} from '@angular/common';\nimport {HttpClient, HttpClientModule} from '@angular/common/http';\nimport {APP_INITIALIZER, Injector, ModuleWithProviders, NgModule, NgZone} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {FileDropComponent} from './components/chat-filedrop/file-drop.component';\nimport {ChatMessageInputComponent} from './components/chat-message-input/chat-message-input.component';\nimport {ChatMessageLinkComponent} from './components/chat-message-link/chat-message-link.component';\nimport {ChatMessageListComponent} from './components/chat-message-list/chat-message-list.component';\nimport {ChatMessageTextComponent} from './components/chat-message-text/chat-message-text.component';\nimport {ChatMessageComponent} from './components/chat-message/chat-message.component';\nimport {ChatRoomMessagesComponent} from './components/chat-room-messages/chat-room-messages.component';\nimport {ChatWindowListComponent} from './components/chat-window-list/chat-window-list.component';\nimport {ChatWindowComponent} from './components/chat-window/chat-window.component';\nimport {ChatComponent} from './components/chat.component';\nimport {RosterContactComponent} from './components/roster-contact/roster-contact.component';\nimport {RosterListComponent} from './components/roster-list/roster-list.component';\nimport {LinksDirective} from './directives/links.directive';\nimport {BookmarkPlugin} from './services/adapters/xmpp/plugins/bookmark.plugin';\nimport {HttpFileUploadPlugin} from './services/adapters/xmpp/plugins/http-file-upload.plugin';\nimport {MessageArchivePlugin} from './services/adapters/xmpp/plugins/message-archive.plugin';\nimport {MessageCarbonsPlugin} from './services/adapters/xmpp/plugins/message-carbons.plugin';\nimport {MessageStatePlugin} from './services/adapters/xmpp/plugins/message-state.plugin';\nimport {MessageUuidPlugin} from './services/adapters/xmpp/plugins/message-uuid.plugin';\nimport {MessagePlugin} from './services/adapters/xmpp/plugins/message.plugin';\nimport {MucSubPlugin} from './services/adapters/xmpp/plugins/muc-sub.plugin';\nimport {MultiUserChatPlugin} from './services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {PingPlugin} from './services/adapters/xmpp/plugins/ping.plugin';\nimport {PublishSubscribePlugin} from './services/adapters/xmpp/plugins/publish-subscribe.plugin';\nimport {PushPlugin} from './services/adapters/xmpp/plugins/push.plugin';\nimport {RegistrationPlugin} from './services/adapters/xmpp/plugins/registration.plugin';\nimport {RosterPlugin} from './services/adapters/xmpp/plugins/roster.plugin';\nimport {ServiceDiscoveryPlugin} from './services/adapters/xmpp/plugins/service-discovery.plugin';\nimport {UnreadMessageCountPlugin} from './services/adapters/xmpp/plugins/unread-message-count.plugin';\nimport {XmppChatAdapter} from './services/adapters/xmpp/xmpp-chat-adapter.service';\nimport {XmppChatConnectionService} from './services/adapters/xmpp/xmpp-chat-connection.service';\nimport {XmppClientFactoryService} from './services/adapters/xmpp/xmpp-client-factory.service';\nimport {ChatBackgroundNotificationService} from './services/chat-background-notification.service';\nimport {ChatListStateService} from './services/chat-list-state.service';\nimport {ChatMessageListRegistryService} from './services/chat-message-list-registry.service';\nimport {ChatServiceToken} from './services/chat-service';\nimport {ContactFactoryService} from './services/contact-factory.service';\nimport {LogService} from './services/log.service';\nimport {MultiUserChatComponent} from './components/multi-user-chat/multi-user-chat.component';\nimport {MatRadioModule} from '@angular/material/radio';\nimport {MatSelectModule} from '@angular/material/select';\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\nimport {VideoComponent} from './components/communication/video.component';\nimport {SocketIOService} from './services/socket.io.service';\nimport { AudioComponent } from './components/communication/audio.component';\nimport { NgxLinkPreviewModule } from '../../../../ngx-link-preview/src/lib/ngx-link-preview.module';\nimport { ChatWindowRoomComponent } from './components/chat-window-room/chat-window-room.component';\nimport { MatCarouselModule } from '@ngmodule/material-carousel';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {MatCardModule} from '@angular/material/card';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {CarouselModule} from 'angular-bootstrap-md';\nimport { IconsModule } from '../../../../proxym/ngx-chat/src/lib/components/icons/icons.module';\nimport { PickerModule } from '@ctrl/ngx-emoji-mart';\nimport { MatVideoModule } from 'mat-video';\n\n@NgModule({\n    imports: [\n        CommonModule,\n        FormsModule,\n        HttpClientModule,\n        TextFieldModule,\n        MatRadioModule,\n        MatSelectModule,\n        NgbModule,\n        NgxLinkPreviewModule,\n        MatCarouselModule,\n        BrowserAnimationsModule,\n        MatCardModule,\n        BrowserModule,\n        CarouselModule,\n        IconsModule,\n        PickerModule,\n        MatVideoModule\n    ],\n    declarations: [\n        ChatComponent,\n        ChatMessageComponent,\n        ChatMessageInputComponent,\n        ChatMessageLinkComponent,\n        ChatMessageListComponent,\n        ChatMessageTextComponent,\n        ChatRoomMessagesComponent,\n        ChatWindowComponent,\n        ChatWindowListComponent,\n        LinksDirective,\n        RosterContactComponent,\n        RosterListComponent,\n        FileDropComponent,\n        MultiUserChatComponent,\n        VideoComponent,\n        AudioComponent,\n        ChatWindowRoomComponent,\n    ],\n    exports: [\n        ChatComponent,\n        ChatMessageInputComponent,\n        ChatMessageListComponent,\n        ChatRoomMessagesComponent,\n        FileDropComponent,\n        LinksDirective,\n        RosterListComponent,\n        VideoComponent,\n    ],\n    entryComponents: [\n        ChatMessageLinkComponent,\n        ChatMessageTextComponent,\n    ],\n    bootstrap: [RosterListComponent],\n})\nexport class NgxChatModule {\n\n    static forRoot(): ModuleWithProviders<NgxChatModule> {\n\n        return {\n            ngModule: NgxChatModule,\n            providers: [\n                ChatListStateService,\n                LogService,\n                ContactFactoryService,\n                ChatBackgroundNotificationService,\n                XmppChatConnectionService,\n                XmppClientFactoryService,\n                SocketIOService,\n                RosterContactComponent,\n                {\n                    provide: ChatServiceToken,\n                    deps: [XmppChatConnectionService, LogService, ContactFactoryService],\n                    useFactory: NgxChatModule.xmppChatAdapter\n                },\n                {\n                    provide: APP_INITIALIZER,\n                    deps: [Injector],\n                    useFactory: NgxChatModule.initializePlugins,\n                    multi: true,\n                }\n            ],\n        };\n\n    }\n\n    private static xmppChatAdapter(chatConnectionService: XmppChatConnectionService,\n                                   logService: LogService,\n                                   contactFactory: ContactFactoryService): XmppChatAdapter {\n        return new XmppChatAdapter(chatConnectionService, logService, contactFactory);\n    }\n\n    private static initializePlugins(injector: Injector) {\n        // noinspection UnnecessaryLocalVariableJS\n        const initializer = function() { // tslint:disable-line:only-arrow-functions\n            const logService = injector.get(LogService);\n            const ngZone = injector.get(NgZone);\n            const xmppChatAdapter = injector.get(ChatServiceToken) as XmppChatAdapter;\n            const serviceDiscoveryPlugin = new ServiceDiscoveryPlugin(xmppChatAdapter);\n            const publishSubscribePlugin = new PublishSubscribePlugin(xmppChatAdapter, serviceDiscoveryPlugin);\n            const chatMessageListRegistryService = injector.get(ChatMessageListRegistryService);\n            const unreadMessageCountPlugin = new UnreadMessageCountPlugin(\n                xmppChatAdapter, chatMessageListRegistryService, publishSubscribePlugin);\n\n            xmppChatAdapter.addPlugins([\n                new BookmarkPlugin(publishSubscribePlugin),\n                new MessageArchivePlugin(xmppChatAdapter, serviceDiscoveryPlugin, logService),\n                new MessagePlugin(xmppChatAdapter, logService),\n                new MessageUuidPlugin(),\n                new MultiUserChatPlugin(xmppChatAdapter, logService, serviceDiscoveryPlugin),\n                publishSubscribePlugin,\n                new RosterPlugin(xmppChatAdapter, logService),\n                serviceDiscoveryPlugin,\n                new PushPlugin(xmppChatAdapter, serviceDiscoveryPlugin),\n                new PingPlugin(xmppChatAdapter, logService, ngZone),\n                new RegistrationPlugin(logService, ngZone),\n                new MessageCarbonsPlugin(xmppChatAdapter),\n                unreadMessageCountPlugin,\n                new HttpFileUploadPlugin(injector.get(HttpClient), serviceDiscoveryPlugin, xmppChatAdapter, logService),\n                new MessageStatePlugin(publishSubscribePlugin, xmppChatAdapter, chatMessageListRegistryService, logService),\n                new MucSubPlugin(xmppChatAdapter, serviceDiscoveryPlugin),\n            ]);\n        };\n        return initializer;\n    }\n\n}\n","import {Element} from 'ltx';\n\nexport abstract class AbstractStanzaBuilder {\n\n    abstract toStanza(): Element;\n\n}\n","import {Element} from 'ltx';\nimport {Message} from '../../../../core/message';\nimport {ChatPlugin} from '../../../../core/plugin';\nimport {MessageWithBodyStanza, Stanza} from '../../../../core/stanza';\nimport {MessageReceivedEvent} from './message.plugin';\n\nexport abstract class AbstractXmppPlugin implements ChatPlugin {\n\n    onBeforeOnline(): PromiseLike<any> {\n        return Promise.resolve();\n    }\n\n    onOffline() {\n    }\n\n    afterSendMessage(message: Message, messageStanza: Element): void {\n        return;\n    }\n\n    beforeSendMessage(messageStanza: Element, message: Message): void {\n        return;\n    }\n\n    handleStanza(stanza: Stanza): boolean {\n        return false;\n    }\n\n    afterReceiveMessage(message: Message, messageStanza: MessageWithBodyStanza, messageReceivedEvent: MessageReceivedEvent): void {\n        return;\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {IqResponseStanza} from '../../../../core/stanza';\nimport {removeDuplicates} from '../../../../core/utils-array';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {PublishSubscribePlugin} from './publish-subscribe.plugin';\n\nexport interface SavedConference {\n    name: string;\n    jid: string;\n    autojoin: boolean;\n}\n\nexport const STORAGE_BOOKMARKS = 'storage:bookmarks';\n\n/**\n * XEP-0048\n */\nexport class BookmarkPlugin extends AbstractXmppPlugin {\n\n    private pendingAddConference: Promise<IqResponseStanza>;\n\n    constructor(private publishSubscribePlugin: PublishSubscribePlugin) {\n        super();\n    }\n\n    onOffline() {\n        this.pendingAddConference = null;\n    }\n\n    async retrieveMultiUserChatRooms(): Promise<SavedConference[]> {\n        const itemNode = await this.publishSubscribePlugin.retrieveNodeItems(STORAGE_BOOKMARKS);\n        const storageNode = itemNode && itemNode[0] && itemNode[0].getChild('storage', STORAGE_BOOKMARKS);\n        const conferenceNodes = itemNode && storageNode.getChildren('conference');\n        if (!conferenceNodes) {\n            return [];\n        }\n        return conferenceNodes.map(c => this.convertElementToSavedConference(c));\n    }\n\n    private convertElementToSavedConference(conferenceNode: Element): SavedConference {\n        return {\n            name: conferenceNode.attrs.name,\n            jid: conferenceNode.attrs.jid,\n            autojoin: conferenceNode.attrs.autojoin === 'true',\n        };\n    }\n\n    saveConferences(conferences: SavedConference[]): Promise<IqResponseStanza> {\n        const deduplicatedConferences = removeDuplicates(conferences, (x, y) => x.jid === y.jid);\n        return this.publishSubscribePlugin.storePrivatePayloadPersistent(\n            STORAGE_BOOKMARKS,\n            null,\n            xml('storage', {xmlns: STORAGE_BOOKMARKS},\n                deduplicatedConferences.map(c => this.convertSavedConferenceToElement(c)),\n            ),\n        );\n    }\n\n    async addConference(conferenceToSave: SavedConference): Promise<IqResponseStanza> {\n\n        while (this.pendingAddConference) {\n            try {\n                await this.pendingAddConference; // serialize the writes, so that in case of multiple conference adds all get added\n            } catch {}\n        }\n\n        return this.pendingAddConference = new Promise(async (resolve, reject) => {\n            const savedConferences = await this.retrieveMultiUserChatRooms();\n            const conferences = [...savedConferences, conferenceToSave];\n\n            let response: IqResponseStanza;\n            try {\n                response = await this.saveConferences(conferences);\n            } finally {\n                this.pendingAddConference = null;\n            }\n\n            if (response) {\n                resolve(response);\n            } else {\n                reject();\n            }\n        });\n\n    }\n\n    private convertSavedConferenceToElement(savedConference: SavedConference) {\n        const {name, autojoin, jid} = savedConference;\n        return xml('conference', {name, jid, autojoin: autojoin.toString()});\n    }\n\n}\n","import {HttpClient} from '@angular/common/http';\nimport {xml} from '@xmpp/client';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {Service, ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\n/**\n * XEP-0363 http file upload\n */\nexport class HttpFileUploadPlugin extends AbstractXmppPlugin {\n\n    fileUploadSupported: boolean;\n    private uploadService: Promise<Service>;\n\n    constructor(\n        private httpClient: HttpClient,\n        private serviceDiscoveryPlugin: ServiceDiscoveryPlugin,\n        private xmppChatAdapter: XmppChatAdapter,\n        private logService: LogService\n    ) {\n        super();\n    }\n\n    onBeforeOnline(): PromiseLike<any> {\n        this.uploadService = this.serviceDiscoveryPlugin.findService('store', 'file');\n        this.uploadService.then(() => {\n            this.fileUploadSupported = true;\n        }, () => {\n            this.fileUploadSupported = false;\n            this.logService.info('http file upload not supported');\n        });\n        return Promise.resolve();\n    }\n\n    onOffline() {\n        this.uploadService = null;\n        this.fileUploadSupported = false;\n    }\n\n    async upload(file: File) {\n        await this.uploadService;\n        const {name, size, type} = file;\n        let slotUrl = await this.requestSlot(name, size.toString(), type);\n        slotUrl = 'https' + slotUrl.toString().substring(4);\n        console.log('slotyy', slotUrl.toString().substring(4));\n        return this.uploadToSlot(slotUrl, file);\n    }\n\n    private async requestSlot(filename: string, size: string, contentType: string) {\n        const to = (await this.uploadService).jid;\n        const slotResponse = await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {to, type: 'get'},\n                xml('request', {xmlns: 'urn:xmpp:http:upload:0', filename, size, 'content-type': contentType})));\n        return slotResponse.getChild('slot').getChild('put').attrs.url;\n    }\n\n    private async uploadToSlot(slot: string, file: File): Promise<string> {\n        await this.httpClient.put(slot, file, {responseType: 'blob'}).toPromise();\n        return slot;\n    }\n\n}\n","import {jid as parseJid, xml} from '@xmpp/client';\nimport {filter} from 'rxjs/operators';\nimport {Direction} from '../../../../core/message';\nimport {Stanza} from '../../../../core/stanza';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {MessageUuidPlugin} from './message-uuid.plugin';\nimport {ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\n/**\n * https://xmpp.org/extensions/xep-0313.html\n * Message Archive Management\n */\nexport class MessageArchivePlugin extends AbstractXmppPlugin {\n\n    constructor(\n        private chatService: XmppChatAdapter,\n        private serviceDiscoveryPlugin: ServiceDiscoveryPlugin,\n        private logService: LogService,\n    ) {\n        super();\n        this.chatService.state$\n            .pipe(filter(state => state === 'online'))\n            .subscribe(async () => {\n                if (await this.supportsMessageArchiveManagement()) {\n                    this.requestNewestMessages();\n                }\n            });\n    }\n\n    private requestNewestMessages() {\n        this.chatService.chatConnectionService.sendIq(\n            xml('iq', {type: 'set', to: this.chatService.chatConnectionService.userJid.bare().toString()},\n                xml('query', {xmlns: 'urn:xmpp:mam:2'},\n                    xml('set', {xmlns: 'http://jabber.org/protocol/rsm'},\n                        xml('max', {}, 250),\n                        xml('before'),\n                    ),\n                ),\n            ),\n        );\n    }\n\n    async loadAllMessages() {\n        if (!(await this.supportsMessageArchiveManagement())) {\n            throw new Error('message archive management not suppported');\n        }\n\n        let lastMamResponse = await this.chatService.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('query', {xmlns: 'urn:xmpp:mam:2'}),\n            ),\n        );\n\n        while (lastMamResponse.getChild('fin').attrs.complete !== 'true') {\n            const lastReceivedMessageId = lastMamResponse.getChild('fin').getChild('set').getChildText('last');\n            lastMamResponse = await this.chatService.chatConnectionService.sendIq(\n                xml('iq', {type: 'set'},\n                    xml('query', {xmlns: 'urn:xmpp:mam:2'},\n                        xml('set', {xmlns: 'http://jabber.org/protocol/rsm'},\n                            xml('max', {}, 250),\n                            xml('after', {}, lastReceivedMessageId),\n                        ),\n                    ),\n                ),\n            );\n        }\n    }\n\n    private async supportsMessageArchiveManagement() {\n        const supportsMessageArchiveManagement = await this.serviceDiscoveryPlugin.supportsFeature(\n            this.chatService.chatConnectionService.userJid.bare().toString(), 'urn:xmpp:mam:2');\n        if (!supportsMessageArchiveManagement) {\n            this.logService.info('server doesnt support MAM');\n        }\n        return supportsMessageArchiveManagement;\n    }\n\n    handleStanza(stanza: Stanza) {\n        if (this.isMamMessageStanza(stanza)) {\n            this.handleMamMessageStanza(stanza);\n            return true;\n        }\n        return false;\n    }\n\n    private isMamMessageStanza(stanza: Stanza) {\n        const result = stanza.getChild('result');\n        return stanza.name === 'message' && result && result.attrs.xmlns === 'urn:xmpp:mam:2';\n    }\n\n    private handleMamMessageStanza(stanza: Stanza) {\n        const messageElement = stanza.getChild('result').getChild('forwarded').getChild('message');\n        const isAddressedToMe = this.chatService.chatConnectionService.userJid.bare()\n            .equals(parseJid(messageElement.attrs.to).bare());\n\n        const messageBody = messageElement.getChildText('body');\n        if (messageBody && messageBody.trim()) {\n            const contactJid = isAddressedToMe ? messageElement.attrs.from : messageElement.attrs.to;\n            const contact = this.chatService.getOrCreateContactById(contactJid);\n            const datetime = new Date(\n                stanza.getChild('result').getChild('forwarded').getChild('delay').attrs.stamp,\n            );\n            const direction = isAddressedToMe ? Direction.in : Direction.out;\n\n            contact.addMessage({\n                direction,\n                datetime,\n                body: messageBody,\n                id: MessageUuidPlugin.extractIdFromStanza(messageElement),\n                delayed: true,\n            });\n        }\n    }\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {Direction} from '../../../../core/message';\nimport {Stanza} from '../../../../core/stanza';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {MessageReceivedEvent} from './message.plugin';\n\n/**\n * XEP-0280 Message Carbons\n */\nexport class MessageCarbonsPlugin extends AbstractXmppPlugin {\n\n    constructor(private xmppChatAdapter: XmppChatAdapter) {\n        super();\n    }\n\n    onBeforeOnline(): PromiseLike<any> {\n        return this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('enable', {xmlns: 'urn:xmpp:carbons:2'})\n            )\n        );\n    }\n\n    handleStanza(stanza: Stanza) {\n        const receivedOrSentElement = stanza.getChildByAttr('xmlns', 'urn:xmpp:carbons:2');\n        const forwarded = receivedOrSentElement && receivedOrSentElement.getChild('forwarded', 'urn:xmpp:forward:0');\n        const messageElement = forwarded && forwarded.getChild('message', 'jabber:client');\n        const carbonFrom = stanza.attrs.from;\n        const userJid = this.xmppChatAdapter.chatConnectionService.userJid;\n        if (stanza.is('message') && receivedOrSentElement && forwarded && messageElement && userJid\n            && userJid.bare().toString() === carbonFrom) {\n            return this.handleCarbonMessageStanza(messageElement, receivedOrSentElement);\n        }\n        return false;\n    }\n\n    private handleCarbonMessageStanza(messageElement: Element, receivedOrSent: Element) {\n        const direction = receivedOrSent.is('received') ? Direction.in : Direction.out;\n\n        const message = {\n            body: messageElement.getChildText('body'),\n            direction,\n            datetime: new Date(),\n            delayed: false,\n        };\n\n        const messageReceivedEvent = new MessageReceivedEvent();\n        this.xmppChatAdapter.plugins.forEach(plugin => plugin.afterReceiveMessage(message, messageElement, messageReceivedEvent));\n        if (!messageReceivedEvent.discard) {\n            const {from, to} = messageElement.attrs;\n            const contactJid = direction === Direction.in ? from : to;\n            const contact = this.xmppChatAdapter.getOrCreateContactById(contactJid);\n            contact.addMessage(message);\n\n            if (direction === Direction.in) {\n                this.xmppChatAdapter.message$.next(contact);\n            }\n        }\n\n        return true;\n    }\n\n}\n","import {jid as parseJid, xml} from '@xmpp/client';\nimport {JID} from '@xmpp/jid';\nimport {Element} from 'ltx';\nimport {filter} from 'rxjs/operators';\nimport {Direction, Message, MessageState} from '../../../../core/message';\nimport {MessageWithBodyStanza, Stanza} from '../../../../core/stanza';\nimport {ChatMessageListRegistryService} from '../../../chat-message-list-registry.service';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {MessageUuidPlugin} from './message-uuid.plugin';\nimport {MessageReceivedEvent} from './message.plugin';\nimport {PublishSubscribePlugin} from './publish-subscribe.plugin';\n\nexport interface StateDate {\n    lastRecipientReceived: Date;\n    lastRecipientSeen: Date;\n    lastSent: Date;\n}\n\nexport interface JidToMessageStateDate {\n    [jid: string]: StateDate;\n}\n\nconst NGX_CHAT_MESSAGESENT = 'ngxchat:messagesent';\nconst STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES = 'ngxchat:contactmessagestates';\nconst wrapperNodeName = 'entries';\nconst nodeName = 'contact-message-state';\n\n/**\n * Plugin using PubSub to persist message read states.\n */\nexport class MessageStatePlugin extends AbstractXmppPlugin {\n\n    private jidToMessageStateDate: JidToMessageStateDate = {};\n\n    constructor(\n        private publishSubscribePlugin: PublishSubscribePlugin,\n        private xmppChatAdapter: XmppChatAdapter,\n        private chatMessageListRegistry: ChatMessageListRegistryService,\n        private logService: LogService,\n    ) {\n        super();\n\n        this.chatMessageListRegistry.openChats$\n            .pipe(\n                filter(() => xmppChatAdapter.state$.getValue() === 'online'),\n            )\n            .subscribe(contacts => {\n                contacts.forEach(contact => {\n                    if (contact.mostRecentMessageReceived) {\n                        this.sendMessageStateNotification(\n                            contact.jidBare,\n                            contact.mostRecentMessageReceived.id,\n                            MessageState.RECIPIENT_SEEN);\n                    }\n                });\n            });\n\n        this.publishSubscribePlugin.publish$\n            .subscribe((event) => this.handlePubSubEvent(event));\n    }\n\n    async onBeforeOnline(): Promise<any> {\n        this.parseContactMessageStates().catch(err => this.logService.error('error parsing contact message states', err));\n    }\n\n    private async parseContactMessageStates() {\n        const itemElement = await this.publishSubscribePlugin.retrieveNodeItems(STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES);\n        this.processPubSub(itemElement);\n    }\n\n    private processPubSub(itemElement: Element[]) {\n        const results = {} as JidToMessageStateDate;\n        if (itemElement.length === 1) {\n            for (const lastReadEntry of itemElement[0].getChild(wrapperNodeName).getChildren(nodeName)) {\n                const {lastRecipientReceived, lastRecipientSeen, lastSent, jid} = lastReadEntry.attrs;\n                results[jid] = {\n                    lastRecipientSeen: new Date(+lastRecipientSeen || 0),\n                    lastRecipientReceived: new Date(+lastRecipientReceived || 0),\n                    lastSent: new Date(+lastSent || 0),\n                };\n            }\n        }\n        this.jidToMessageStateDate = results;\n    }\n\n    private async persistContactMessageStates() {\n        const wrapperNode = xml(wrapperNodeName);\n\n        for (const jid in this.jidToMessageStateDate) {\n            if (this.jidToMessageStateDate.hasOwnProperty(jid)) {\n                const stateDates = this.jidToMessageStateDate[jid];\n                wrapperNode.c(nodeName, {\n                    jid,\n                    lastRecipientReceived: stateDates.lastRecipientReceived && stateDates.lastRecipientReceived.getTime(),\n                    lastRecipientSeen: stateDates.lastRecipientSeen && stateDates.lastRecipientSeen.getTime(),\n                    lastSent: stateDates.lastSent && stateDates.lastSent.getTime(),\n                });\n            }\n        }\n\n        await this.publishSubscribePlugin.storePrivatePayloadPersistent(\n            STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES,\n            'current',\n            wrapperNode);\n    }\n\n    onOffline() {\n        this.jidToMessageStateDate = {};\n    }\n\n    beforeSendMessage(messageStanza: Element, message: Message): void {\n        const {type} = messageStanza.attrs;\n        if (type === 'chat' && message) {\n            message.state = MessageState.SENDING;\n        }\n    }\n\n    async afterSendMessage(message: Message, messageStanza: Element) {\n        const {type, to} = messageStanza.attrs;\n        if (type === 'chat') {\n            await this.publishSubscribePlugin.privateNotify(NGX_CHAT_MESSAGESENT);\n            this.updateContactMessageState(parseJid(to).bare().toString(), MessageState.SENT, new Date());\n            delete message.state;\n        }\n    }\n\n    afterReceiveMessage(messageReceived: Message, stanza: MessageWithBodyStanza, messageReceivedEvent: MessageReceivedEvent): void {\n        const messageStateElement = stanza.getChild('message-state', STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES);\n        if (messageStateElement) {\n            // we received a message state or a message via carbon from another resource, discard it\n            messageReceivedEvent.discard = true;\n        } else if (messageReceived.direction === Direction.in && stanza.attrs.type !== 'groupchat') {\n            this.acknowledgeReceivedMessage(stanza);\n        }\n    }\n\n    private acknowledgeReceivedMessage(stanza: MessageWithBodyStanza) {\n        const {from} = stanza.attrs;\n        const isChatWithContactOpen = this.chatMessageListRegistry.isChatOpen(this.xmppChatAdapter.getOrCreateContactById(from));\n        const state = isChatWithContactOpen ? MessageState.RECIPIENT_SEEN : MessageState.RECIPIENT_RECEIVED;\n        const messageId = MessageUuidPlugin.extractIdFromStanza(stanza);\n        this.sendMessageStateNotification(parseJid(from), messageId, state);\n    }\n\n    private sendMessageStateNotification(recipient: JID, messageId: string, state: MessageState) {\n        const messageStateResponse = xml('message', {\n                to: recipient.bare().toString(),\n                from: this.xmppChatAdapter.chatConnectionService.userJid.toString(),\n                type: 'chat'\n            },\n            xml('message-state', {\n                xmlns: STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES,\n                messageId,\n                date: new Date().toISOString(),\n                state\n            })\n        );\n        this.xmppChatAdapter.chatConnectionService.send(messageStateResponse);\n    }\n\n    handleStanza(stanza: Stanza) {\n        const {type, from} = stanza.attrs;\n        const stateElement = stanza.getChild('message-state', STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES);\n        if (type === 'chat' && stateElement) {\n            this.handleStateNotificationStanza(stateElement, from);\n            return true;\n        }\n    }\n\n    private handleStateNotificationStanza(stateElement: Element, from: string) {\n        const {state, date} = stateElement.attrs;\n        const contact = this.xmppChatAdapter.getOrCreateContactById(from);\n        const stateDate = new Date(date);\n        this.updateContactMessageState(contact.jidBare.toString(), state, stateDate);\n    }\n\n    private updateContactMessageState(contactJid: string, state: MessageState, stateDate: Date) {\n        const current = this.getContactMessageState(contactJid);\n        let changed = false;\n        if (state === MessageState.RECIPIENT_RECEIVED && current.lastRecipientReceived < stateDate) {\n            current.lastRecipientReceived = stateDate;\n            changed = true;\n        } else if (state === MessageState.RECIPIENT_SEEN && current.lastRecipientSeen < stateDate) {\n            current.lastRecipientReceived = stateDate;\n            current.lastRecipientSeen = stateDate;\n            changed = true;\n        } else if (state === MessageState.SENT && current.lastSent < stateDate) {\n            current.lastSent = stateDate;\n            changed = true;\n        }\n        if (changed) {\n            this.persistContactMessageStates().catch(err => this.logService.error('error persisting contact message states', err));\n        }\n    }\n\n    public getContactMessageState(contactJid: string) {\n        if (!this.jidToMessageStateDate[contactJid]) {\n            this.jidToMessageStateDate[contactJid] = {\n                lastRecipientReceived: null,\n                lastRecipientSeen: null,\n                lastSent: null,\n            };\n        }\n        return this.jidToMessageStateDate[contactJid];\n    }\n\n    private handlePubSubEvent(event: Stanza) {\n        const items = event.getChild('items');\n        const itemsNode = items && items.attrs.node;\n        const item = items && items.getChildren('item');\n        if (itemsNode === STORAGE_NGX_CHAT_CONTACT_MESSAGE_STATES && item) {\n            this.processPubSub(item);\n        }\n    }\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {id} from '../../../../core/id-generator';\nimport {Message} from '../../../../core/message';\nimport {MessageWithBodyStanza} from '../../../../core/stanza';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\n\n/**\n * https://xmpp.org/extensions/xep-0359.html\n */\nexport class MessageUuidPlugin extends AbstractXmppPlugin {\n\n    public static extractIdFromStanza(messageStanza: Element) {\n        const originIdElement = messageStanza.getChild('origin-id');\n        const stanzaIdElement = messageStanza.getChild('stanza-id');\n        return messageStanza.attrs.id || (originIdElement && originIdElement.attrs.id) || (stanzaIdElement && stanzaIdElement.attrs.id);\n    }\n\n    beforeSendMessage(messageStanza: Element, message: Message): void {\n        const generatedId = id();\n        messageStanza.children.push(xml('origin-id', {xmlns: 'urn:xmpp:sid:0', id: generatedId}));\n        if (message) {\n            message.id = generatedId;\n        }\n    }\n\n    afterSendMessage(message: Message, messageStanza: Element): void {\n        message.id = MessageUuidPlugin.extractIdFromStanza(messageStanza);\n    }\n\n    afterReceiveMessage(message: Message, messageStanza: MessageWithBodyStanza) {\n        message.id = MessageUuidPlugin.extractIdFromStanza(messageStanza);\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {Direction, Message} from '../../../../core/message';\nimport {MessageWithBodyStanza, Stanza} from '../../../../core/stanza';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\n\nexport class MessageReceivedEvent {\n    discard = false;\n}\n\nexport class MessagePlugin extends AbstractXmppPlugin {\n\n    constructor(\n        private xmppChatAdapter: XmppChatAdapter,\n        private logService: LogService,\n    ) {\n        super();\n    }\n\n    handleStanza(stanza: Stanza) {\n        if (this.isMessageStanza(stanza)) {\n            this.handleMessageStanza(stanza);\n            return true;\n        }\n        return false;\n    }\n\n    private isMessageStanza(stanza: Stanza): stanza is MessageWithBodyStanza {\n        return stanza.name === 'message'\n            && stanza.attrs.type !== 'groupchat'\n            && stanza.attrs.type !== 'error'\n            && !!stanza.getChildText('body');\n    }\n\n    private handleMessageStanza(messageStanza: MessageWithBodyStanza) {\n        this.logService.debug('message received <=', messageStanza.getChildText('body'));\n\n        const message = {\n            body: messageStanza.getChildText('body'),\n            direction: Direction.in,\n            datetime: new Date(),\n            delayed: !!messageStanza.getChild('delay')\n        };\n\n        const messageReceivedEvent = new MessageReceivedEvent();\n        this.xmppChatAdapter.plugins.forEach(plugin => plugin.afterReceiveMessage(message, messageStanza, messageReceivedEvent));\n        if (!messageReceivedEvent.discard) {\n            const contact = this.xmppChatAdapter.getOrCreateContactById(messageStanza.attrs.from);\n            contact.addMessage(message);\n            this.xmppChatAdapter.message$.next(contact);\n        }\n    }\n\n    sendMessage(jid: string, body: string) {\n        const messageStanza = xml('message', {to: jid, from: this.xmppChatAdapter.chatConnectionService.userJid.toString(), type: 'chat'},\n            xml('body', {}, body)\n        );\n\n        const message: Message = {\n            direction: Direction.out,\n            body,\n            datetime: new Date(),\n            delayed: false\n        };\n        this.xmppChatAdapter.plugins.forEach(plugin => plugin.beforeSendMessage(messageStanza, message));\n        const contact = this.xmppChatAdapter.getOrCreateContactById(jid);\n        contact.addMessage(message);\n        // TODO: on rejection mark message that it was not sent successfully\n        this.xmppChatAdapter.chatConnectionService.send(messageStanza).then(() => {\n            this.xmppChatAdapter.plugins.forEach(plugin => plugin.afterSendMessage(message, messageStanza));\n        }, (rej) => {\n            this.logService.error('rejected message ' + message.id, rej);\n        });\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {BehaviorSubject} from 'rxjs';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\n/**\n * support for https://docs.ejabberd.im/developer/xmpp-clients-bots/extensions/muc-sub/\n */\nexport class MucSubPlugin extends AbstractXmppPlugin {\n\n    private supportsMucSub = new BehaviorSubject<boolean | 'unknown'>('unknown');\n\n    constructor(\n        private xmppChatAdapter: XmppChatAdapter,\n        private serviceDiscoveryPlugin: ServiceDiscoveryPlugin,\n    ) {\n        super();\n    }\n\n    onBeforeOnline(): PromiseLike<void> {\n        return this.determineSupportForMucSub();\n    }\n\n    private async determineSupportForMucSub() {\n        let isSupported: boolean;\n        try {\n            const service = await this.serviceDiscoveryPlugin.findService('conference', 'text');\n            isSupported = service.features.indexOf('urn:xmpp:mucsub:0') > -1;\n        } catch (e) {\n            isSupported = false;\n        }\n        this.supportsMucSub.next(isSupported);\n    }\n\n    onOffline() {\n        this.supportsMucSub.next('unknown');\n    }\n\n    subscribeRoom(roomJid: string) {\n        const nick = this.xmppChatAdapter.chatConnectionService.userJid.local;\n        this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'set', to: roomJid},\n                xml('subscribe', {xmlns: 'urn:xmpp:mucsub:0', nick})\n            )\n        );\n    }\n\n}\n","import {jid as parseJid, xml} from '@xmpp/client';\nimport {JID} from '@xmpp/jid';\nimport {Element} from 'ltx';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {ContactMetadata} from '../../../../core/contact';\nimport {Direction, Message} from '../../../../core/message';\nimport {MessageStore} from '../../../../core/message-store';\nimport {IqResponseStanza, Stanza} from '../../../../core/stanza';\nimport {LogService} from '../../../log.service';\nimport {AbstractStanzaBuilder} from '../abstract-stanza-builder';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {MessageReceivedEvent} from './message.plugin';\nimport {ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\nexport interface RoomCreationOptions {\n    name?: string;\n    roomId: string;\n    public: boolean;\n    membersOnly: boolean;\n    nonAnonymous: boolean;\n    persistentRoom: boolean;\n    nick?: string;\n    /** ejabberd MucSub */\n    allowSubscription?: boolean;\n}\n\nexport interface RoomMessage extends Message {\n    from: JID;\n}\n\nexport interface Occupant {\n    roomJid: JID;\n    realJid?: JID;\n    metadata: ContactMetadata;\n}\n\nexport class Room {\n\n    roomJid: JID;\n    occupantJid: JID;\n    public messageStore: MessageStore<RoomMessage>;\n    name: string;\n\n    constructor(occupantJid: JID, logService: LogService) {\n        this.roomJid = occupantJid.bare();\n        this.occupantJid = occupantJid;\n        this.messageStore = new MessageStore<RoomMessage>(logService);\n    }\n\n    get messages(): RoomMessage[] {\n        return this.messageStore.messages;\n    }\n\n    get messages$(): Subject<RoomMessage> {\n        return this.messageStore.messages$;\n    }\n\n    get mostRecentMessage() {\n        return this.messageStore.messages[this.messageStore.messages.length - 1];\n    }\n\n    addMessage(message: RoomMessage) {\n        this.messageStore.addMessage(message);\n    }\n\n}\n\nclass RoomMessageStanzaBuilder extends AbstractStanzaBuilder {\n\n    constructor(private roomJid: string, private from: string, private body: string, private thread?: string) {\n        super();\n    }\n\n    toStanza(): Stanza {\n        const messageStanza = xml('message', {from: this.from, to: this.roomJid, type: 'groupchat'},\n            xml('body', {}, this.body)\n        );\n        if (this.thread) {\n            messageStanza.children.push(\n                xml('thread', {}, this.thread)\n            );\n        }\n        return messageStanza;\n    }\n\n}\n\nexport enum Affiliation {\n    none,\n    member,\n    admin,\n    owner,\n    outcast\n}\n\nclass QueryMemberListStanzaBuilder extends AbstractStanzaBuilder {\n\n    constructor(private roomJid: string, private affiliation: string) {\n        super();\n    }\n\n    static build(roomJid: string, affiliation: string): Stanza {\n        return new QueryMemberListStanzaBuilder(roomJid, affiliation).toStanza();\n    }\n\n    toStanza(): Stanza {\n        return xml('iq', {type: 'get', to: this.roomJid},\n            xml('query', {xmlns: 'http://jabber.org/protocol/muc#admin'},\n                xml('item', {affiliation: this.affiliation})\n            )\n        );\n    }\n\n}\n\nexport interface MemberlistItem {\n    jid: string;\n    affiliation: Affiliation;\n    nick?: string;\n}\n\nexport interface RoomSummary {\n    jid: string;\n    name: string;\n}\n\nclass ModifyMemberListStanzaBuilder extends AbstractStanzaBuilder {\n\n    constructor(private roomJid: string, private modifications: MemberlistItem[]) {\n        super();\n    }\n\n    static build(roomJid: string, modifications: MemberlistItem[]): Stanza {\n        return new ModifyMemberListStanzaBuilder(roomJid, modifications).toStanza();\n    }\n\n    toStanza(): Stanza {\n        return xml('iq', {to: this.roomJid, type: 'set'},\n            xml('query', {xmlns: 'http://jabber.org/protocol/muc#admin'},\n                ...this.modifications.map(modification => this.buildItem(modification))\n            )\n        );\n    }\n\n    private buildItem(modification: MemberlistItem) {\n        const item = xml('item', {jid: modification.jid, affiliation: Affiliation[modification.affiliation]});\n        if (modification.nick) {\n            item.attrs.nick = modification.nick;\n        }\n        return item;\n    }\n}\n\n/**\n * @see https://xmpp.org/extensions/xep-0045.html\n */\nexport class MultiUserChatPlugin extends AbstractXmppPlugin {\n\n    rooms$ = new BehaviorSubject<Room[]>([]);\n    message$ = new Subject<Room>();\n    private roomJoinPromises: { [roomAndJid: string]: (stanza: Stanza) => void } = {};\n\n    constructor(private xmppChatAdapter: XmppChatAdapter,\n                private logService: LogService,\n                private serviceDiscoveryPlugin: ServiceDiscoveryPlugin) {\n        super();\n    }\n\n    onOffline() {\n        this.roomJoinPromises = {};\n        this.rooms$.next([]);\n    }\n\n    handleStanza(stanza: Stanza): boolean {\n        if (this.isRoomPresenceStanza(stanza)) {\n            return this.handleRoomPresenceStanza(stanza);\n        } else if (this.isRoomMessageStanza(stanza)) {\n            return this.handleRoomMessageStanza(stanza);\n        }\n        return false;\n    }\n\n    private isRoomPresenceStanza(stanza: Stanza) {\n        return stanza.name === 'presence' && (\n            stanza.getChild('x', 'http://jabber.org/protocol/muc')\n            || stanza.getChild('x', 'http://jabber.org/protocol/muc#user')\n        );\n    }\n\n    private handleRoomPresenceStanza(stanza: Stanza): boolean {\n        const roomJoinPromises = this.roomJoinPromises[stanza.attrs.from];\n        if (roomJoinPromises) {\n            delete this.roomJoinPromises[stanza.attrs.from];\n            roomJoinPromises(stanza);\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Resolves if room could be configured as requested, rejects if room did exist or server did not accept configuration.\n     */\n    async createRoom(request: RoomCreationOptions): Promise<Room> {\n        const roomId = request.roomId;\n        const service = await this.serviceDiscoveryPlugin.findService('conference', 'text');\n        const occupantJid = parseJid(roomId, service.jid, request.nick);\n        const {presenceResponse, room} = await this.joinRoomInternal(occupantJid, request.name);\n\n        const itemElement = presenceResponse.getChild('x').getChild('item');\n        if (itemElement.attrs.affiliation !== 'owner') {\n            throw new Error('error creating room, user is not owner: ' + presenceResponse.toString());\n        }\n\n        const configurationForm = await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'get', to: room.roomJid.toString()},\n                xml('query', {xmlns: 'http://jabber.org/protocol/muc#owner'})\n            )\n        );\n\n        const configurationListElement = configurationForm.getChild('query').getChild('x');\n        if (!configurationListElement) {\n            throw new Error('room not configurable');\n        }\n\n        const configurationKeyValuePair = {\n            ...this.extractDefaultConfiguration(configurationListElement.getChildren('field')),\n            ...this.extractRoomCreationRequestConfiguration(request)\n        };\n\n        try {\n            await this.xmppChatAdapter.chatConnectionService.sendIq(\n                xml('iq', {type: 'set', to: room.roomJid.toString()},\n                    xml('query', {xmlns: 'http://jabber.org/protocol/muc#owner'},\n                        xml('x', {xmlns: 'jabber:x:data', type: 'submit'},\n                            xml('field', {var: 'FORM_TYPE'},\n                                xml('value', {}, 'http://jabber.org/protocol/muc#roomconfig')\n                            ),\n                            ...this.convertConfiguration(configurationKeyValuePair)\n                        )\n                    )\n                )\n            );\n            return room;\n        } catch (e) {\n            throw new Error('room configuration rejected: ' + e.toString());\n        }\n    }\n\n    async destroyRoom(roomJid: JID) {\n        const roomDestroyedResponse = await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'set', to: roomJid.toString()},\n                xml('query', {xmlns: 'http://jabber.org/protocol/muc#owner'},\n                    xml('destroy'))));\n\n        const child = roomDestroyedResponse.getChild('error');\n        if (child) {\n            throw new Error('error destroying room:' + child.attrs.type);\n        }\n\n        // TODO: refactor so that we instead listen to the presence destroy stanza\n        const allRoomsWithoutDestroyedRoom = this.rooms$.getValue().filter(\n            room => !room.roomJid.equals(roomJid)\n        );\n\n        this.rooms$.next(allRoomsWithoutDestroyedRoom);\n\n        return roomDestroyedResponse;\n    }\n\n    private async joinRoomInternal(roomJid: JID, name?: string) {\n        const userJid = this.xmppChatAdapter.chatConnectionService.userJid;\n        const occupantJid = parseJid(roomJid.local, roomJid.domain, roomJid.resource || userJid.local);\n        const roomJoinedPromise = new Promise<Stanza>(resolve => this.roomJoinPromises[occupantJid.toString()] = resolve);\n        await this.xmppChatAdapter.chatConnectionService.send(\n            xml('presence', {from: userJid.toString(), to: occupantJid.toString()},\n                xml('x', {xmlns: 'http://jabber.org/protocol/muc'})\n            )\n        );\n\n        const presenceResponse = await roomJoinedPromise;\n        if (presenceResponse.getChild('error')) {\n            throw new Error('error joining room: ' + presenceResponse.toString());\n        }\n\n        let room;\n        try {\n            room = this.getRoomByJid(roomJid);\n        } catch {\n            room = new Room(occupantJid, this.logService);\n            room.name = name;\n            this.rooms$.next([room].concat(this.rooms$.getValue()));\n        }\n\n        return {presenceResponse, room};\n    }\n\n    async joinRoom(occupantJid: JID): Promise<Room> {\n        return (await this.joinRoomInternal(occupantJid)).room;\n    }\n\n    async queryAllRooms(): Promise<RoomSummary[]> {\n        const conferenceServer = await this.serviceDiscoveryPlugin.findService('conference', 'text');\n\n        const result = [];\n\n        let roomResponse = await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'get', to: conferenceServer.jid.toString()},\n                xml('query', {xmlns: ServiceDiscoveryPlugin.DISCO_ITEMS})\n            )\n        );\n        result.push(...this.convertRoomQueryResponse(roomResponse));\n\n\n        const fin = roomResponse.getChild('fin');\n        while (fin && fin.attrs.complete !== 'true') {\n            const lastReceivedRoom = fin.getChild('set').getChildText('last');\n            roomResponse = await this.xmppChatAdapter.chatConnectionService.sendIq(\n                xml('iq', {type: 'get', to: conferenceServer.jid.toString()},\n                    xml('query', {xmlns: 'urn:xmpp:mam:2'},\n                        xml('set', {xmlns: ServiceDiscoveryPlugin.DISCO_ITEMS},\n                            xml('max', {}, 250),\n                            xml('after', {}, lastReceivedRoom)\n                        )\n                    )\n                )\n            );\n            result.push(...await this.convertRoomQueryResponse(roomResponse));\n        }\n        return result;\n    }\n\n    private convertRoomQueryResponse(iq: IqResponseStanza): RoomSummary[] {\n        const queryElement = iq.getChild('query', ServiceDiscoveryPlugin.DISCO_ITEMS);\n        const roomElements = queryElement && queryElement.getChildren('item');\n        return roomElements.map(room => room.attrs);\n    }\n\n    async queryMemberList(room: Room): Promise<MemberlistItem[]> {\n        const responsePromises = [\n            this.xmppChatAdapter.chatConnectionService.sendIq(QueryMemberListStanzaBuilder.build(room.roomJid.toString(), 'admin')),\n            this.xmppChatAdapter.chatConnectionService.sendIq(QueryMemberListStanzaBuilder.build(room.roomJid.toString(), 'member')),\n            this.xmppChatAdapter.chatConnectionService.sendIq(QueryMemberListStanzaBuilder.build(room.roomJid.toString(), 'owner')),\n            this.xmppChatAdapter.chatConnectionService.sendIq(QueryMemberListStanzaBuilder.build(room.roomJid.toString(), 'outcast')),\n        ];\n\n        const memberQueryResponses = await Promise.all(responsePromises);\n        let members: MemberlistItem[] = [];\n        for (const memberQueryResponse of memberQueryResponses) {\n            const membersFromQueryResponse = memberQueryResponse.getChild('query').getChildren('item')\n                .map((memberItem: Element) => ({\n                    jid: memberItem.attrs.jid,\n                    nick: memberItem.attrs.nick,\n                    affiliation: this.reverseMapAffiliation(memberItem.attrs.affiliation),\n                }));\n            members = members.concat(membersFromQueryResponse);\n        }\n\n        return members;\n    }\n\n    private reverseMapAffiliation(value: string): Affiliation {\n        if (!value || value === 'none') {\n            return Affiliation.none;\n        } else if (value === 'member') {\n            return Affiliation.member;\n        } else if (value === 'admin') {\n            return Affiliation.admin;\n        } else if (value === 'owner') {\n            return Affiliation.owner;\n        } else if (value === 'outcast') {\n            return Affiliation.outcast;\n        } else {\n            const message = 'unexpected affilation: ' + value;\n            this.logService.error(message);\n            throw new Error(message);\n        }\n    }\n\n    async modifyMemberList(roomJid: string, jid: string, affiliation: Affiliation, nick?: string): Promise<IqResponseStanza> {\n        return await this.xmppChatAdapter.chatConnectionService.sendIq(\n            ModifyMemberListStanzaBuilder.build(roomJid, [{jid, affiliation, nick}])\n        );\n    }\n\n    async sendMessage(room: Room, body: string, thread?: string) {\n        const from = this.xmppChatAdapter.chatConnectionService.userJid;\n        const roomMessageStanza = new RoomMessageStanzaBuilder(room.roomJid.toString(), from.toString(), body, thread)\n            .toStanza();\n\n        for (const plugin of this.xmppChatAdapter.plugins) {\n            plugin.beforeSendMessage(roomMessageStanza);\n        }\n\n        return this.xmppChatAdapter.chatConnectionService.send(roomMessageStanza);\n    }\n\n    private convertConfiguration(configurationKeyValuePair: { [key: string]: string[] }) {\n        const configurationFields = [];\n        for (const configurationKey in configurationKeyValuePair) {\n            if (configurationKeyValuePair.hasOwnProperty(configurationKey)) {\n                const configurationValues = configurationKeyValuePair[configurationKey].map(value => xml('value', {}, value));\n                configurationFields.push(\n                    xml('field', {var: configurationKey}, ...configurationValues)\n                );\n            }\n        }\n        return configurationFields;\n    }\n\n    private extractDefaultConfiguration(fields: Element[]) {\n        const configuration: { [key: string]: string[] } = {};\n        for (const field of fields) {\n            configuration[field.attrs.var] = field.getChildren('value').map(value => value.getText());\n        }\n        return configuration;\n    }\n\n    private extractRoomCreationRequestConfiguration(request: RoomCreationOptions): { [key: string]: string[] } {\n        const configuration: { [key: string]: string[] } = {};\n        configuration['muc#roomconfig_whois'] = [request.nonAnonymous ? 'anyone' : 'moderators'];\n        configuration['muc#roomconfig_publicroom'] = [request.public ? '1' : '0'];\n        configuration['muc#roomconfig_membersonly'] = [request.membersOnly ? '1' : '0'];\n        configuration['muc#roomconfig_persistentroom'] = [request.persistentRoom ? '1' : '0'];\n\n        if (request.allowSubscription !== undefined) {\n            // tslint:disable-next-line:no-string-literal\n            configuration['allow_subscription'] = [request.allowSubscription === true ? '1' : '0'];\n        }\n\n        return configuration;\n    }\n\n    private isRoomMessageStanza(stanza: Stanza) {\n        return stanza.name === 'message' && stanza.attrs.type === 'groupchat' && !!stanza.getChildText('body');\n    }\n\n    private handleRoomMessageStanza(stanza: Stanza) {\n        let datetime;\n        const delay = stanza.getChild('delay');\n        if (delay && delay.attrs.stamp) {\n            datetime = new Date(delay.attrs.stamp);\n        } else {\n            datetime = new Date();\n        }\n\n        const from = parseJid(stanza.attrs.from);\n        const room = this.getRoomByJid(from.bare());\n\n        const message = {\n            body: stanza.getChildText('body'),\n            datetime,\n            id: stanza.attrs.id,\n            from,\n            direction: from.equals(room.occupantJid) ? Direction.out : Direction.in,\n            delayed: !!stanza.getChild('delay')\n        };\n\n        const messageReceivedEvent = new MessageReceivedEvent();\n        for (const plugin of this.xmppChatAdapter.plugins) {\n            plugin.afterReceiveMessage(message, stanza, messageReceivedEvent);\n        }\n        if (!messageReceivedEvent.discard) {\n            room.addMessage(message);\n        }\n\n        if (!message.delayed) {\n            this.message$.next(room);\n        }\n\n        return true;\n    }\n\n    public getRoomByJid(jid: JID) {\n        for (const room of this.rooms$.getValue()) {\n            if (room.roomJid.equals(jid)) {\n                return room;\n            }\n        }\n\n        throw new Error('no room with given jid found: ' + jid.toString());\n    }\n\n}\n","import {NgZone} from '@angular/core';\nimport {xml} from '@xmpp/client';\nimport {filter} from 'rxjs/operators';\nimport {timeout} from '../../../../core/utils-timeout';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\n\n/**\n * xep-0199\n */\nexport class PingPlugin extends AbstractXmppPlugin {\n\n    private timeoutHandle: any;\n    private readonly pingInterval = 60_000;\n\n    constructor(\n        private xmppChatAdapter: XmppChatAdapter,\n        private logService: LogService,\n        private ngZone: NgZone,\n    ) {\n        super();\n\n        this.xmppChatAdapter.state$.pipe(\n            filter(newState => newState === 'online'),\n        ).subscribe(() => {\n            this.schedulePings();\n        });\n\n        this.xmppChatAdapter.state$.pipe(\n            filter(newState => newState === 'disconnected'),\n        ).subscribe(() => {\n            this.unschedulePings();\n        });\n    }\n\n    private schedulePings() {\n        this.unschedulePings();\n        this.ngZone.runOutsideAngular(() => {\n            this.timeoutHandle = window.setInterval(() => this.ping(), this.pingInterval);\n        });\n    }\n\n    private async ping() {\n        this.logService.debug('ping...');\n        try {\n            await timeout(this.sendPing(), 10_000);\n            this.logService.debug('... pong');\n        } catch (e) {\n            if (this.xmppChatAdapter.state$.getValue() === 'online'\n                && this.xmppChatAdapter.chatConnectionService.state$.getValue() === 'online') {\n                this.logService.error('... pong errored,  connection should be online, waiting for browser websocket timeout');\n            }\n        }\n    }\n\n    private sendPing() {\n        try {\n            return this.xmppChatAdapter.chatConnectionService.sendIq(\n                xml('iq', {type: 'get'},\n                    xml('ping', {xmlns: 'urn:xmpp:ping'})\n                )\n            );\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    private unschedulePings() {\n        window.clearInterval(this.timeoutHandle);\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {filter} from 'rxjs/operators';\nimport {IqResponseStanza, Stanza} from '../../../../core/stanza';\nimport {AbstractStanzaBuilder} from '../abstract-stanza-builder';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\nexport const PUBSUB_EVENT_XMLNS = 'http://jabber.org/protocol/pubsub#event';\n\ninterface PublishOptions {\n    node?: string;\n    id?: any;\n    data?: Element;\n    persistItems?: boolean;\n}\n\nclass PublishStanzaBuilder extends AbstractStanzaBuilder {\n\n    private publishOptions: PublishOptions = {\n        persistItems: false,\n    };\n\n    constructor(options: PublishOptions) {\n        super();\n        if (options) {\n            this.publishOptions = {...this.publishOptions, ...options};\n        }\n    }\n\n    toStanza() {\n        const {node, id, persistItems} = this.publishOptions;\n\n        // necessary as a 'event-only' publish is currently broken in ejabberd, see\n        // https://github.com/processone/ejabberd/issues/2799\n        const data = this.publishOptions.data ||xml('data');\n\n        return xml('iq', {type: 'set'},\n            xml('pubsub', {xmlns: 'http://jabber.org/protocol/pubsub'},\n                xml('publish', {node},\n                    xml('item', {id}, data)\n                ),\n                xml('publish-options', {},\n                    xml('x', {xmlns: 'jabber:x:data', type: 'submit'},\n                        xml('field', {var: 'FORM_TYPE', type: 'hidden'},\n                            xml('value', {}, 'http://jabber.org/protocol/pubsub#publish-options')\n                        ),\n                        xml('field', {var: 'pubsub#persist_items'},\n                            xml('value', {}, persistItems ? 1 : 0)\n                        ),\n                        xml('field', {var: 'pubsub#access_model'},\n                            xml('value', {}, 'whitelist')\n                        )\n                    )\n                )\n            )\n        );\n    }\n\n}\n\nclass RetrieveDataStanzaBuilder extends AbstractStanzaBuilder {\n\n    constructor(private node: string) {\n        super();\n    }\n\n    toStanza() {\n        return xml('iq', {type: 'get'},\n            xml('pubsub', {xmlns: 'http://jabber.org/protocol/pubsub'},\n                xml('items', {node: this.node})\n            )\n        );\n    }\n\n}\n\n/**\n * XEP-0060 Publish Subscribe\n * XEP-0223 Persistent Storage of Private Data via PubSub\n */\nexport class PublishSubscribePlugin extends AbstractXmppPlugin {\n\n    publish$ = new Subject<Stanza>();\n    private supportsPrivatePublish = new BehaviorSubject<boolean | 'unknown'>('unknown');\n\n    constructor(private xmppChatAdapter: XmppChatAdapter, private serviceDiscoveryPlugin: ServiceDiscoveryPlugin) {\n        super();\n    }\n\n    onBeforeOnline() {\n        return this.determineSupportForPrivatePublish();\n    }\n\n    onOffline() {\n        this.supportsPrivatePublish.next('unknown');\n    }\n\n    storePrivatePayloadPersistent(node: string, id: string, data: Element): Promise<IqResponseStanza> {\n        return new Promise((resolve, reject) => {\n            this.supportsPrivatePublish\n                .pipe(filter(support => support !== 'unknown'))\n                .subscribe((support: boolean) => {\n                    if (!support) {\n                        reject('does not support private publish subscribe');\n                    } else {\n                        resolve(this.xmppChatAdapter.chatConnectionService.sendIq(\n                            new PublishStanzaBuilder({node, id, data, persistItems: true}).toStanza()\n                        ));\n                    }\n                });\n        });\n    }\n\n    privateNotify(node: string, data?: Element, id?: string): Promise<IqResponseStanza> {\n        return new Promise((resolve, reject) => {\n            this.supportsPrivatePublish\n                .pipe(filter(support => support !== 'unknown'))\n                .subscribe((support: boolean) => {\n                    if (!support) {\n                        reject('does not support private publish subscribe');\n                    } else {\n                        resolve(this.xmppChatAdapter.chatConnectionService.sendIq(\n                            new PublishStanzaBuilder({node, id, data, persistItems: false}).toStanza()\n                        ));\n                    }\n                });\n        });\n    }\n\n    handleStanza(stanza: Stanza): boolean {\n        const eventElement = stanza.getChild('event', PUBSUB_EVENT_XMLNS);\n        if (stanza.is('message') && eventElement) {\n            this.publish$.next(eventElement);\n            return true;\n        }\n        return false;\n    }\n\n    async retrieveNodeItems(node: string): Promise<Element[]> {\n        try {\n            const iqResponseStanza = await this.xmppChatAdapter.chatConnectionService.sendIq(\n                new RetrieveDataStanzaBuilder(node).toStanza()\n            );\n            return iqResponseStanza.getChild('pubsub').getChild('items').getChildren('item');\n        } catch (e) {\n            return [];\n        }\n    }\n\n    private async determineSupportForPrivatePublish() {\n        let isSupported: boolean;\n        try {\n            const service = await this.serviceDiscoveryPlugin.findService('pubsub', 'pep');\n            isSupported = service.features.indexOf('http://jabber.org/protocol/pubsub#publish-options') > -1;\n        } catch (e) {\n            isSupported = false;\n        }\n        this.supportsPrivatePublish.next(isSupported);\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {ServiceDiscoveryPlugin} from './service-discovery.plugin';\n\n/**\n * xep-0357\n */\nexport class PushPlugin extends AbstractXmppPlugin {\n\n    constructor(\n        private xmppChatAdapter: XmppChatAdapter,\n        private serviceDiscoveryPlugin: ServiceDiscoveryPlugin,\n    ) {\n        super();\n    }\n\n    async register(node: string, jid?: string): Promise<any> {\n        if (!jid) {\n            const service = await this.getPushServiceComponent();\n            jid = service.jid;\n        }\n        return await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('enable', {xmlns: 'urn:xmpp:push:0', jid, node})\n            )\n        );\n    }\n\n    private async getPushServiceComponent() {\n        return await this.serviceDiscoveryPlugin.findService('pubsub', 'push');\n    }\n\n    async unregister(node?: string, jid?: string): Promise<any> {\n        if (!jid) {\n            const service = await this.getPushServiceComponent();\n            jid = service.jid;\n        }\n        return await this.xmppChatAdapter.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('disable', {xmlns: 'urn:xmpp:push:0', jid, node})\n            )\n        );\n    }\n\n}\n","import {NgZone} from '@angular/core';\nimport {Client, client, xml} from '@xmpp/client';\nimport {Subject} from 'rxjs';\nimport {first, takeUntil} from 'rxjs/operators';\nimport {getDomain} from '../../../../core/get-domain';\nimport {timeout} from '../../../../core/utils-timeout';\nimport {LogService} from '../../../log.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\n\n/**\n * xep-0077\n */\nexport class RegistrationPlugin extends AbstractXmppPlugin {\n\n    private readonly registered$ = new Subject<void>();\n    private readonly cleanUp = new Subject<void>();\n    private readonly loggedIn$ = new Subject<void>();\n    private readonly registrationTimeout = 5000;\n    private client: Client;\n\n    constructor(private logService: LogService,\n                private ngZone: NgZone) {\n        super();\n    }\n\n    /**\n     * Promise resolves if user account is registered successfully,\n     * rejects if an error happens while registering, e.g. the username is already taken.\n     */\n    public async register(username: string,\n                          password: string,\n                          service: string,\n                          domain: string): Promise<void> {\n        await this.ngZone.runOutsideAngular(async () => {\n            try {\n                await timeout((async () => {\n                    domain = domain || getDomain(service);\n\n                    this.logService.debug('registration plugin', 'connecting...');\n                    await this.connect(username, password, service, domain);\n\n                    this.logService.debug('registration plugin', 'connection established, starting registration');\n                    await this.client.iqCaller.request(\n                        xml('iq', {type: 'get', to: domain},\n                            xml('query', {xmlns: 'jabber:iq:register'})\n                        )\n                    );\n\n                    this.logService.debug('registration plugin', 'server acknowledged registration request, sending credentials');\n                    await this.client.iqCaller.request(\n                        xml('iq', {type: 'set'},\n                            xml('query', {xmlns: 'jabber:iq:register'},\n                                xml('username', {}, username),\n                                xml('password', {}, password)\n                            )\n                        )\n                    );\n\n                    this.registered$.next();\n                    await this.loggedIn$.pipe(takeUntil(this.cleanUp), first()).toPromise();\n                    this.logService.debug('registration plugin', 'registration successful');\n                })(), this.registrationTimeout);\n            } catch (e) {\n                this.logService.warn('error registering', e);\n                throw e;\n            } finally {\n                this.cleanUp.next();\n                this.logService.debug('registration plugin', 'cleaning up');\n                await this.client.stop();\n            }\n        });\n    }\n\n    private connect(username: string, password: string, service: string, domain?: string) {\n        return new Promise(resolveConnectionEstablished => {\n            this.client = client({\n                domain: domain || getDomain(service),\n                service,\n                credentials: async (authenticationCallback) => {\n                    resolveConnectionEstablished();\n                    await this.registered$.pipe(takeUntil(this.cleanUp), first()).toPromise();\n                    await authenticationCallback({username, password});\n                }\n            });\n\n            this.client.reconnect.stop();\n            this.client.timeout = this.registrationTimeout;\n\n            this.client.on('online', () => {\n                this.logService.debug('registration plugin', 'online event');\n                this.loggedIn$.next();\n            });\n\n            this.client.on('error', (err: any) => {\n                this.logService.error('registration plugin', err);\n            });\n\n            this.client.on('offline', () => {\n                this.logService.debug('registration plugin', 'offline event');\n            });\n\n            return this.client.start();\n        });\n    }\n}\n","import {jid as parseJid, xml} from '@xmpp/client';\nimport {Contact} from '../../../../core/contact';\nimport {Presence} from '../../../../core/presence';\nimport {PresenceStanza, Stanza} from '../../../../core/stanza';\nimport {ContactSubscription} from '../../../../core/subscription';\nimport {LogService} from '../../../log.service';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {dummyAvatar} from '../../../../core/contact-avatar';\n\n/**\n * https://xmpp.org/rfcs/rfc6121.html#roster-add-success\n */\n\nexport class RosterPlugin extends AbstractXmppPlugin {\n    public mySub = '';\n    public aA: string;\n    self = this;\n\n    constructor(\n        private chatService: XmppChatAdapter,\n        private logService: LogService,\n    ) {\n        super();\n    }\n\n    handleStanza(stanza: Stanza) {\n\n        /*     if (this.isAvatar(stanza)) {\n                 return this.handleAvatarStanza(stanza);\n                 console.log('repo3', stanza);\n         }*/\n        if (this.isRosterPushStanza(stanza)) {\n            //  console.log('repo1', (stanza));\n            return this.handleRosterPushStanza(stanza);\n        } else if (this.isPresenceStanza(stanza)) {\n            //   console.log('repo2', (stanza));\n            return this.handlePresenceStanza(stanza);\n        }\n        return false;\n    }\n\n    private isRosterPushStanza(stanza: Stanza) {\n        return stanza.name === 'iq'\n            && stanza.attrs.type === 'set'\n            && stanza.getChild('query', 'jabber:iq:roster');\n    }\n\n    public handleAvatarStanza(stanza: Stanza): string {\n\n        const itemChild = stanza.toString();\n        const mySubString = itemChild.match(new RegExp('<BINVAL>' + '(.*)' + '</BINVAL>'));\n        // this.chatService.userAvatar$.next(itemChild.toString());\n        if (mySubString !== null) {\n            const mySubb = mySubString.toString().substring(\n                mySubString.toString().lastIndexOf(',') + 1,\n                mySubString.toString().lastIndexOf('=') + 1\n            );\n            console.log('anios');\n            this.self.mySub = mySubb;\n            return mySubb;\n        }\n        // this.avatarr = mySub ;\n        // this.chatService.userAvatar$.next(itemChild.toString());\n        //  console.log('repo33', this.chatService.userAvatar$.next(itemChild.toString()));\n        // console.log('rrr2');\n        // console.log('rrr4', this.self.mySub);\n        return '';\n    }\n\n    private handleRosterPushStanza(stanza: Stanza) {\n\n        // TODO:\n        // Security Warning: Traditionally, a roster push included no 'from' address, with the result that all roster pushes were sent\n        // implicitly from the bare JID of the account itself. However, this specification allows entities other than the user's server\n        // to maintain roster information, which means that a roster push might include a 'from' address other than the bare JID of the\n        // user's account. Therefore, the client MUST check the 'from' address to verify that the sender of the roster push is authorized\n        // to update the roster. If the client receives a roster push from an unauthorized entity, it MUST NOT process the pushed data; in\n        // addition, the client can either return a stanza error of <service-unavailable/> error or refuse to return a stanza error at all\n        // (the latter behavior overrides a MUST-level requirement from [XMPPCORE] for the purpose of preventing a presence leak).\n\n        const itemChild = stanza.getChild('query').getChild('item');\n        const contact = this.chatService.getOrCreateContactById(itemChild.attrs.jid, itemChild.attrs.name || itemChild.attrs.jid);\n        contact.pendingOut$.next(itemChild.attrs.ask === 'subscribe');\n        const subscriptionStatus = itemChild.attrs.subscription || 'none';\n\n        this.chatService.chatConnectionService.sendIqAckResult(stanza.attrs.id);\n\n        let handled = false;\n\n        if (subscriptionStatus === 'remove') {\n            contact.pendingOut$.next(false);\n            contact.subscription$.next(ContactSubscription.none);\n            handled = true;\n        } else if (subscriptionStatus === 'none') {\n            contact.subscription$.next(ContactSubscription.none);\n            handled = true;\n        } else if (subscriptionStatus === 'to') {\n            contact.subscription$.next(ContactSubscription.to);\n            handled = true;\n        } else if (subscriptionStatus === 'from') {\n            contact.subscription$.next(ContactSubscription.from);\n            handled = true;\n        } else if (subscriptionStatus === 'both') {\n            contact.subscription$.next(ContactSubscription.both);\n            handled = true;\n        }\n\n        if (handled) {\n            const existingContacts = this.chatService.contacts$.getValue();\n            this.chatService.contacts$.next(existingContacts);\n        }\n\n        return handled;\n    }\n\n    public getRosterContacts(): Promise<Contact[]> {\n        return new Promise((resolve) =>\n            this.chatService.chatConnectionService.sendIq(\n                xml('iq', {type: 'get'},\n                    xml('query', {xmlns: 'jabber:iq:roster'})\n                )\n            ).then(\n                (responseStanza: Stanza) => {\n                    resolve(this.convertToContacts(responseStanza));\n                    console.log('rrr1', responseStanza);\n                    // console.log('anso', this.self.mySub);\n                },\n                (responseStanza: Stanza) => {\n                    this.logService.error('error converting roster contact push', responseStanza.toString());\n                    resolve([]);\n                }\n            )\n        );\n    }\n\n    private isPresenceStanza(stanza: Stanza): stanza is PresenceStanza {\n        return stanza.name === 'presence' && !stanza.getChild('x', 'http://jabber.org/protocol/muc#user');\n    }\n\n    public getRosterAvatar(jid: string): Promise<string> {\n        return new Promise((resolve) =>\n            this.chatService.chatConnectionService.sendIq(\n                xml('iq', {type: 'get', to: jid, id: this.chatService.chatConnectionService.getNextIqId()},\n                    xml('vCard', {xmlns: 'vcard-temp'})\n                )).then(\n                (responseStanza: Stanza) => {\n                    // this.aA = 'anis';\n                    // const avata = this.handleAvatarStanza(responseStanza) ;\n                    //  console.log('rrr3', this.self.mySub);\n                    resolve(this.handleAvatarStanza(responseStanza));\n                },\n                (responseStanza: Stanza) => {\n                    this.logService.error('error converting roster contact push', responseStanza.toString());\n                    resolve('');\n                }\n            )\n        );\n    }\n\n    private transitionSubscriptionRequestReceivedAccepted(subscription: ContactSubscription) {\n        switch (subscription) {\n            case ContactSubscription.none:\n                return ContactSubscription.from;\n            case ContactSubscription.to:\n                return ContactSubscription.both;\n            default:\n                return subscription;\n        }\n    }\n\n    private transitionSubscriptionRequestSentAccepted(subscription: ContactSubscription) {\n        switch (subscription) {\n            case ContactSubscription.none:\n                return ContactSubscription.to;\n            case ContactSubscription.from:\n                return ContactSubscription.both;\n            default:\n                return subscription;\n        }\n    }\n\n    private sendAcceptPresenceSubscriptionRequest(jid: string) {\n        const contact = this.chatService.getOrCreateContactById(jid);\n        contact.pendingIn$.next(false);\n        this.chatService.chatConnectionService.send(\n            xml('presence', {to: jid, type: 'subscribed', id: this.chatService.chatConnectionService.getNextIqId()})\n        );\n    }\n\n    public onBeforeOnline(): PromiseLike<any> {\n        return this.refreshRosterContacts();\n    }\n\n    async sendIqq(jid: string) {\n\n        const response = await this.chatService.chatConnectionService.sendIq(\n            xml('iq', {type: 'get', to: jid, id: this.chatService.chatConnectionService.getNextIqId()},\n                xml('vCard', {xmlns: 'vcard-temp'})\n            ));\n        return response;\n    }\n\n    public convertToContacts(responseStanza: Stanza): Contact[] {\n        return responseStanza.getChild('query').getChildElements()\n            .map(rosterElement => {\n                const contact = this.chatService.getOrCreateContactById(rosterElement.attrs.jid,\n                    rosterElement.attrs.name || rosterElement.attrs.jid);\n                contact.subscription$.next(this.parseSubscription(rosterElement.attrs.subscription));\n                contact.pendingOut$.next(rosterElement.attrs.ask === 'subscribe');\n                this.sendIqq(rosterElement.attrs.jid).then(data => {\n                        const itemChild = data.toString();\n                        const mySubString = itemChild.match(new RegExp('<PHOTO><BINVAL>' + '(.*)' + '</BINVAL><TYPE>'));\n                        if (mySubString !== null) {\n                            const mySubb = mySubString.toString().substring(\n                                mySubString.toString().lastIndexOf(',') + 1,\n                                mySubString.toString().lastIndexOf('=') + 1\n                            );\n                            contact.avatar = 'data:image/jpeg;base64,' + mySubb;\n                        } else {\n                            contact.avatar = dummyAvatar;\n                        }\n                    }\n                );\n                return contact;\n            });\n    }\n\n    addRosterContact(jid: string): void {\n        // this.getRosterAvatar(jid);\n        this.sendAddToRoster(jid);\n        this.sendSubscribeToPresence(jid);\n        this.sendAcceptPresenceSubscriptionRequest(jid);\n    }\n\n    private handlePresenceStanza(stanza: PresenceStanza) {\n        const fromAsContact = this.chatService.getOrCreateContactById(stanza.attrs.from);\n        const isAddressedToMe = this.chatService.chatConnectionService.userJid.bare().equals(parseJid(stanza.attrs.to).bare());\n        if (isAddressedToMe) {\n            if (!stanza.attrs.type) {\n                // https://xmpp.org/rfcs/rfc3921.html#stanzas-presence-children-show\n                const show = stanza.getChildText('show');\n                const presenceMapping: { [key: string]: Presence } = {\n                    chat: Presence.present,\n                    null: Presence.present,\n                    away: Presence.away,\n                    dnd: Presence.dnd,\n                    xa: Presence.away,\n                };\n                const presence = presenceMapping[show];\n                if (presence) {\n                    fromAsContact.updateResourcePresence(stanza.attrs.from, presence);\n                } else {\n                    this.logService.error('illegal presence:', stanza.attrs.from, show);\n                }\n                return true;\n            } else if (stanza.attrs.type === 'unavailable') {\n                fromAsContact.updateResourcePresence(stanza.attrs.from, Presence.unavailable);\n                return true;\n            } else if (stanza.attrs.type === 'subscribe') {\n                if (fromAsContact.isSubscribed() || fromAsContact.pendingOut$.getValue()) {\n                    // subscriber is already a contact of us, approve subscription\n                    fromAsContact.pendingIn$.next(false);\n                    this.sendAcceptPresenceSubscriptionRequest(stanza.attrs.from);\n                    fromAsContact.subscription$.next(\n                        this.transitionSubscriptionRequestReceivedAccepted(fromAsContact.subscription$.getValue()));\n                    this.chatService.contacts$.next(this.chatService.contacts$.getValue());\n                    return true;\n                } else if (fromAsContact) {\n                    // subscriber is known but not subscribed or pending\n                    fromAsContact.pendingIn$.next(true);\n                    this.chatService.contacts$.next(this.chatService.contacts$.getValue());\n                    return true;\n                }\n            } else if (stanza.attrs.type === 'subscribed') {\n                fromAsContact.pendingOut$.next(false);\n                fromAsContact.subscription$.next(this.transitionSubscriptionRequestSentAccepted(fromAsContact.subscription$.getValue()));\n                this.chatService.contacts$.next(this.chatService.contacts$.getValue());\n                return true;\n            } else if (stanza.attrs.type === 'unsubscribed') {\n                // TODO: handle unsubscribed\n            } else if (stanza.attrs.type === 'unsubscribe') {\n                // TODO: handle unsubscribe\n            }\n        }\n        return false;\n    }\n\n    private parseSubscription(subscription: string): ContactSubscription {\n        switch (subscription) {\n            case 'to':\n                return ContactSubscription.to;\n            case 'from':\n                return ContactSubscription.from;\n            case 'both':\n                return ContactSubscription.both;\n            case 'none':\n            default:\n                return ContactSubscription.none;\n        }\n    }\n\n    private isAvatar(stanza: Stanza) {\n        return stanza.name === 'iq'\n            && stanza.attrs.type === 'result'\n            && stanza.getChild('vCard', 'vcard-temp');\n    }\n\n    private sendAddToRoster(jid: string) {\n        return this.chatService.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('query', {xmlns: 'jabber:iq:roster'},\n                    xml('item', {jid}))));\n    }\n\n    private sendSubscribeToPresence(jid: string) {\n        this.chatService.chatConnectionService.send(\n            xml('presence', {id: this.chatService.chatConnectionService.getNextIqId(), to: jid, type: 'subscribe'})\n        );\n    }\n\n    removeRosterContact(jid: string): void {\n        const contact = this.chatService.getContactById(jid);\n        if (contact) {\n            contact.subscription$.next(ContactSubscription.none);\n            contact.pendingOut$.next(false);\n            contact.pendingIn$.next(false);\n            this.sendRemoveFromRoster(jid);\n            this.sendWithdrawPresenceSubscription(jid);\n        }\n    }\n\n    private sendRemoveFromRoster(jid: string) {\n        this.chatService.chatConnectionService.sendIq(\n            xml('iq', {type: 'set'},\n                xml('query', {xmlns: 'jabber:iq:roster'},\n                    xml('item', {jid, subscription: 'remove'}))));\n    }\n\n    private sendWithdrawPresenceSubscription(jid: string) {\n        this.chatService.chatConnectionService.send(\n            xml('presence', {id: this.chatService.chatConnectionService.getNextIqId(), to: jid, type: 'unsubscribed'})\n        );\n    }\n\n    refreshRosterContacts() {\n        return this.getRosterContacts();\n    }\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {BehaviorSubject} from 'rxjs';\nimport {first} from 'rxjs/operators';\nimport {AbstractStanzaBuilder} from '../abstract-stanza-builder';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\n\nclass QueryStanzaBuilder extends AbstractStanzaBuilder {\n\n    constructor(private xmlns: string, private to?: string) {\n        super();\n    }\n\n    toStanza() {\n        const attrs: { [key: string]: string } = {type: 'get'};\n        if (this.to) {\n            attrs.to = this.to;\n        }\n        return xml('iq', attrs,\n            xml('query', {xmlns: this.xmlns})\n        );\n    }\n\n}\n\nexport interface Identity {\n    category: string;\n    type: string;\n    name?: string;\n}\n\nexport interface Service {\n    jid: string;\n    identities: Identity[];\n    features: string[];\n}\n\n/**\n * see XEP-0030 Service Discovery\n */\nexport class ServiceDiscoveryPlugin extends AbstractXmppPlugin {\n\n    public static readonly DISCO_INFO = 'http://jabber.org/protocol/disco#info';\n    public static readonly DISCO_ITEMS = 'http://jabber.org/protocol/disco#items';\n\n    private servicesInitialized$ = new BehaviorSubject(false);\n    private hostedServices: Service[] = [];\n    private resourceCache: {[jid: string]: Service} = {};\n\n    constructor(private chatAdapter: XmppChatAdapter) {\n        super();\n    }\n\n    async onBeforeOnline() {\n        const services = await this.discoverServices(this.chatAdapter.chatConnectionService.userJid.domain);\n        this.servicesInitialized$.next(true);\n        return services;\n    }\n\n    onOffline() {\n        this.servicesInitialized$.next(false);\n        this.hostedServices = [];\n        this.resourceCache = {};\n    }\n\n    supportsFeature(jid: string, feature: string): Promise<boolean> {\n\n        return new Promise((resolve, reject) => {\n\n            this.servicesInitialized$.pipe(first(value => !!value)).subscribe(async () => {\n                try {\n                    const service = this.resourceCache[jid] || await this.discoverServiceInformation(jid);\n                    if (!service) {\n                        reject(new Error('no service found for jid ' + jid));\n                    }\n                    const results = this.resourceCache[jid].features.filter(resource => resource.indexOf(feature) >= 0);\n                    resolve(results.length > 0);\n                } catch (e) {\n                    reject(e);\n                }\n            });\n\n        });\n\n    }\n\n    findService(category: string, type: string): Promise<Service> {\n\n        return new Promise((resolve, reject) => {\n\n            this.servicesInitialized$.pipe(first(value => !!value)).subscribe(() => {\n                const results = this.hostedServices.filter(service =>\n                    service.identities.filter(identity => identity.category === category && identity.type === type).length > 0\n                );\n\n                if (results.length === 0) {\n                    reject(`no service matching category ${category} and type ${type} found!`);\n                } else if (results.length > 1) {\n                    reject(`multiple services matching category ${category} and type ${type} found! ${JSON.stringify(results)}`);\n                } else {\n                    return resolve(results[0]);\n                }\n            });\n\n        });\n\n    }\n\n    private async discoverServices(mainDomain: string) {\n        const serviceListResponse = await this.chatAdapter.chatConnectionService.sendIq(\n            new QueryStanzaBuilder(\n                ServiceDiscoveryPlugin.DISCO_ITEMS, this.chatAdapter.chatConnectionService.userJid.domain).toStanza()\n        );\n\n        const serviceDomains = serviceListResponse\n            .getChild('query')\n            .getChildren('item')\n            .map((itemNode: Element) => itemNode.attrs.jid);\n        serviceDomains.push(mainDomain);\n\n        const distinctServiceDomains = Object.keys(\n            serviceDomains.reduce((previousValue, currentValue) => {\n                previousValue[currentValue] = true;\n                return previousValue;\n            }, {})\n        );\n\n        const discoveredServices: Service[] = await Promise.all(\n            distinctServiceDomains.map((serviceDomain: string) => this.discoverServiceInformation(serviceDomain)));\n        this.hostedServices.push(...discoveredServices);\n    }\n\n    private async discoverServiceInformation(serviceDomain: string): Promise<Service> {\n        const serviceInformationResponse = await this.chatAdapter.chatConnectionService.sendIq(\n            new QueryStanzaBuilder(ServiceDiscoveryPlugin.DISCO_INFO, serviceDomain).toStanza()\n        );\n\n        const queryNode = serviceInformationResponse.getChild('query');\n        const features = queryNode.getChildren('feature').map((featureNode: Element) => featureNode.attrs.var);\n        const serviceInformation = {\n            identities: queryNode.getChildren('identity').map((identityNode: Element) => identityNode.attrs),\n            features,\n            jid: serviceInformationResponse.attrs.from\n        };\n        this.resourceCache[serviceInformationResponse.attrs.from] = serviceInformation;\n        return serviceInformation;\n    }\n\n}\n","import {xml} from '@xmpp/client';\nimport {Element} from 'ltx';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {debounceTime, delay, distinctUntilChanged, filter, map, share} from 'rxjs/operators';\nimport {Contact} from '../../../../core/contact';\nimport {Direction} from '../../../../core/message';\nimport {findSortedInsertionIndexLast} from '../../../../core/utils-array';\nimport {extractValues, sum} from '../../../../core/utils-object';\nimport {ChatMessageListRegistryService} from '../../../chat-message-list-registry.service';\nimport {AbstractStanzaBuilder} from '../abstract-stanza-builder';\nimport {XmppChatAdapter} from '../xmpp-chat-adapter.service';\nimport {AbstractXmppPlugin} from './abstract-xmpp-plugin';\nimport {PublishSubscribePlugin} from './publish-subscribe.plugin';\n\nconst STORAGE_NGX_CHAT_LAST_READ_DATE = 'ngxchat:unreadmessagedate';\nconst wrapperNodeName = 'entries';\nconst nodeName = 'last-read';\n\nexport interface JidToDate {\n    [jid: string]: Date;\n}\n\nexport interface JidToNumber {\n    [jid: string]: number;\n}\n\nclass LastReadEntriesNodeBuilder extends AbstractStanzaBuilder {\n\n    private lastReadNodes = [] as Element[];\n\n    addLastReadNode(jid: string, date: string) {\n        this.lastReadNodes.push(\n            xml(nodeName, {jid, date})\n        );\n    }\n\n    toStanza(): Element {\n        return xml(wrapperNodeName, {}, this.lastReadNodes);\n    }\n\n}\n\n/**\n * Unofficial plugin using XEP-0163 / PubSub to track count of unread messages per contact\n *\n * It publishes entries to a private PubSub-Node 'ngxchat:unreadmessagedate'\n * The stored elements look like this:\n * <item id=\"current\">\n *     <entries>\n *         <last-read jid=\"user1@host1.tld\" date=\"1546419050584\"/>\n *         <last-read jid=\"user2@host1.tld\" date=\"1546419050000\"/>\n *     </entries>\n * </item>\n */\nexport class UnreadMessageCountPlugin extends AbstractXmppPlugin {\n\n    /**\n     * already debounced to prevent the issues described in {@link UnreadMessageCountPlugin.jidToUnreadCount$}.\n     */\n    public unreadMessageCountSum$: Observable<number>;\n    /**\n     * emits as soon as the unread message count changes, you might want to debounce it with e.g. half a a second, as\n     * new messages might be acknowledged in another session.\n     */\n    public jidToUnreadCount$: BehaviorSubject<JidToNumber> = new BehaviorSubject({});\n    private jidToLastReadDate: JidToDate = {};\n\n    constructor(private chatService: XmppChatAdapter,\n                private chatMessageListRegistry: ChatMessageListRegistryService,\n                private publishSubscribePlugin: PublishSubscribePlugin,\n    ) {\n        super();\n\n        this.chatMessageListRegistry.openChats$\n            .pipe(\n                filter(() => this.chatService.state$.getValue() === 'online'),\n                delay(0), // prevent 'Expression has changed after it was checked'\n            )\n            .subscribe(contacts => {\n                contacts.forEach(contact => {\n                    this.jidToLastReadDate[contact.jidBare.toString()] = new Date();\n                    this.updateContactUnreadMessageState(contact);\n                });\n                this.persistLastSeenDates();\n            });\n\n        this.chatService.message$\n            .pipe(\n                filter(() => this.chatService.state$.getValue() === 'online')\n            )\n            .subscribe(contact => {\n                if (this.chatMessageListRegistry.isChatOpen(contact)) {\n                    this.jidToLastReadDate[contact.jidBare.toString()] = new Date();\n                    this.persistLastSeenDates();\n                }\n                this.updateContactUnreadMessageState(contact);\n            });\n\n        this.publishSubscribePlugin.publish$\n            .subscribe((event) => this.handlePubSubEvent(event));\n\n        this.unreadMessageCountSum$ = this.jidToUnreadCount$.pipe(\n            map(jidToCount => sum(extractValues(jidToCount))),\n            debounceTime(1),\n            distinctUntilChanged(),\n            share()\n        );\n    }\n\n    async onBeforeOnline(): Promise<any> {\n        this.jidToLastReadDate = await this.fetchLastSeenDates();\n        for (const jid of Object.keys(this.jidToLastReadDate)) {\n            const contact = this.chatService.getOrCreateContactById(jid);\n            this.updateContactUnreadMessageState(contact);\n        }\n    }\n\n    private async fetchLastSeenDates(): Promise<JidToDate> {\n        const entries = await this.publishSubscribePlugin.retrieveNodeItems(STORAGE_NGX_CHAT_LAST_READ_DATE);\n        return this.parseLastSeenDates(entries);\n    }\n\n    private parseLastSeenDates(itemElement: Element[]): JidToDate {\n        const result: JidToDate = {};\n\n        if (itemElement.length === 1) {\n            for (const lastReadEntry of itemElement[0].getChild(wrapperNodeName).getChildren(nodeName)) {\n                const {jid, date} = lastReadEntry.attrs;\n                const parsedDate = new Date(+date);\n                if (!isNaN(parsedDate.getTime())) {\n                    result[jid] = parsedDate;\n                }\n            }\n        }\n\n        return result;\n    }\n\n    onOffline() {\n        this.jidToUnreadCount$.next({});\n    }\n\n    updateContactUnreadMessageState(contact: Contact) {\n        const contactJid = contact.jidBare.toString();\n        const date = this.jidToLastReadDate[contactJid] || new Date(0);\n        const contactUnreadMessageCount = this.calculateUnreadMessageCount(contact, date);\n        const jidToCount = this.jidToUnreadCount$.getValue();\n\n        if (jidToCount[contactJid] !== contactUnreadMessageCount) {\n            jidToCount[contactJid] = contactUnreadMessageCount;\n            this.jidToUnreadCount$.next(jidToCount);\n        }\n    }\n\n    private calculateUnreadMessageCount(contact: Contact, date: Date) {\n        const firstUnreadMessageIndex = findSortedInsertionIndexLast(date, contact.messages, message => message.datetime);\n        return contact.messages.slice(firstUnreadMessageIndex)\n            .filter(message => message.direction === Direction.in)\n            .length;\n    }\n\n    private persistLastSeenDates() {\n        const lastReadNodeBuilder = new LastReadEntriesNodeBuilder();\n        for (const jid in this.jidToLastReadDate) {\n            if (this.jidToLastReadDate.hasOwnProperty(jid)) {\n                const date = this.jidToLastReadDate[jid].getTime().toString();\n                lastReadNodeBuilder.addLastReadNode(jid, date);\n            }\n        }\n\n        this.publishSubscribePlugin.storePrivatePayloadPersistent(\n            STORAGE_NGX_CHAT_LAST_READ_DATE,\n            'current',\n            lastReadNodeBuilder.toStanza());\n    }\n\n    private handlePubSubEvent(event: Element) {\n        const items = event.getChild('items');\n        const itemsNode = items && items.attrs.node;\n        const item = items && items.getChildren('item');\n        if (itemsNode === STORAGE_NGX_CHAT_LAST_READ_DATE && item) {\n            const publishedLastJidToDate = this.parseLastSeenDates(item);\n            this.mergeJidToDates(publishedLastJidToDate);\n        }\n    }\n\n    private mergeJidToDates(newJidToDate: JidToDate) {\n        for (const jid in newJidToDate) {\n            if (!this.jidToLastReadDate[jid] || this.jidToLastReadDate[jid] < newJidToDate[jid]) {\n                this.jidToLastReadDate[jid] = newJidToDate[jid];\n                this.updateContactUnreadMessageState(this.chatService.getOrCreateContactById(jid));\n            }\n        }\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {jid as parseJid} from '@xmpp/client';\nimport {BehaviorSubject, merge, Observable, Subject} from 'rxjs';\nimport {filter, map} from 'rxjs/operators';\nimport {ChatActionContext} from '../../../components/chat-window/chat-window.component';\nimport {Contact} from '../../../core/contact';\nimport {dummyAvatar} from '../../../core/contact-avatar';\nimport {LogInRequest} from '../../../core/log-in-request';\nimport {ChatPlugin} from '../../../core/plugin';\nimport {Stanza} from '../../../core/stanza';\nimport {Translations} from '../../../core/translations';\nimport {ChatService} from '../../chat-service';\nimport {ContactFactoryService} from '../../contact-factory.service';\nimport {LogService} from '../../log.service';\nimport {MessageArchivePlugin} from './plugins/message-archive.plugin';\nimport {MessagePlugin} from './plugins/message.plugin';\nimport {RosterPlugin} from './plugins/roster.plugin';\nimport {XmppChatConnectionService, XmppChatStates} from './xmpp-chat-connection.service';\n\n@Injectable()\nexport class XmppChatAdapter implements ChatService {\n\n    message$ = new Subject<Contact>();\n    messageSent$: Subject<Contact> = new Subject();\n\n    contacts$ = new BehaviorSubject<Contact[]>([]);\n    contactsSubscribed$: Observable<Contact[]> = this.contacts$.pipe(\n        map(contacts => contacts.filter(contact => contact.isSubscribed())));\n    contactRequestsReceived$: Observable<Contact[]> = this.contacts$.pipe(\n        map(contacts => contacts.filter(contact => contact.pendingIn$.getValue())));\n    contactRequestsSent$: Observable<Contact[]> = this.contacts$.pipe(\n        map(contacts => contacts.filter(contact => contact.pendingOut$.getValue())));\n    contactsUnaffiliated$: Observable<Contact[]> = this.contacts$.pipe(\n        map(contacts => contacts.filter(contact => contact.isUnaffiliated() && contact.messages.length > 0)));\n    state$ = new BehaviorSubject<'disconnected' | 'connecting' | 'online'>('disconnected');\n    plugins: ChatPlugin[] = [];\n    enableDebugging = false;\n    userAvatar$ = new BehaviorSubject(dummyAvatar);\n    translations: Translations;\n    chatActions = [{\n        id: 'sendMessage',\n        cssClass: 'chat-window-send',\n        html: '&raquo;',\n        onClick: (chatActionContext: ChatActionContext) => {\n            chatActionContext.chatWindow.sendMessage();\n        },\n    }];\n    private lastLogInRequest: LogInRequest;\n\n    constructor(public chatConnectionService: XmppChatConnectionService,\n                private logService: LogService,\n                private contactFactory: ContactFactoryService) {\n        this.state$.subscribe((state) => this.logService.info('state changed to:', state));\n        chatConnectionService.state$\n            .pipe(filter(nextState => nextState !== this.state$.getValue()))\n            .subscribe((nextState) => {\n                this.handleInternalStateChange(nextState);\n            });\n        this.chatConnectionService.stanzaUnknown$.subscribe((stanza) => this.onUnknownStanza(stanza));\n\n        merge(this.messageSent$, this.message$).subscribe(() => {\n            // re-emit contacts when sending or receiving a message to refresh contcat groups\n            // if the sending contact was in 'other', he still is in other now, but passes the 'messages.length > 0' predicate, so that\n            // he should be seen now.\n            this.contacts$.next(this.contacts$.getValue());\n        });\n    }\n\n    private handleInternalStateChange(internalState: XmppChatStates) {\n        if (internalState === 'online') {\n            this.state$.next('connecting');\n            Promise.all(this.plugins.map(plugin => plugin.onBeforeOnline()))\n                .then(\n                    () => this.announceAvailability(),\n                    (e) => {\n                        this.logService.error('error while connecting', e);\n                        this.announceAvailability();\n                    }\n                );\n        } else {\n            if (this.state$.getValue() === 'online') {\n                // clear data the first time we transition to a not-online state\n                this.onOffline();\n            }\n            this.state$.next('disconnected');\n        }\n    }\n\n    private onOffline() {\n        this.contacts$.next([]);\n        this.plugins.forEach(plugin => {\n            try {\n                plugin.onOffline();\n            } catch (e) {\n                this.logService.error('error while handling offline in ', plugin);\n            }\n        });\n    }\n\n    private announceAvailability() {\n        this.logService.info('announcing availability');\n        this.chatConnectionService.sendPresence();\n        this.state$.next('online');\n    }\n\n    public addPlugins(plugins: ChatPlugin[]) {\n        plugins.forEach(plugin => {\n            this.plugins.push(plugin);\n        });\n    }\n\n    reloadContacts(): void {\n        this.getPlugin(RosterPlugin).refreshRosterContacts();\n    }\n\n    getContactById(jidPlain: string) {\n        const bareJidToFind = parseJid(jidPlain).bare();\n        return this.contacts$.getValue().find(contact => contact.jidBare.equals(bareJidToFind));\n    }\n\n    getOrCreateContactById(jidPlain: string, name?: string) {\n        let contact = this.getContactById(jidPlain);\n        if (!contact) {\n            contact = this.contactFactory.createContact(parseJid(jidPlain).bare().toString(), name);\n            this.contacts$.next([contact, ...this.contacts$.getValue()]);\n        }\n        return contact;\n    }\n\n    addContact(identifier: string) {\n        this.getPlugin(RosterPlugin).addRosterContact(identifier);\n    }\n\n    removeContact(identifier: string) {\n        this.getPlugin(RosterPlugin).removeRosterContact(identifier);\n    }\n\n    async logIn(logInRequest: LogInRequest) {\n        this.lastLogInRequest = logInRequest;\n        if (this.state$.getValue() === 'disconnected') {\n            await this.chatConnectionService.logIn(logInRequest);\n        }\n    }\n\n    logOut(): Promise<void> {\n        return this.chatConnectionService.logOut();\n    }\n\n    sendMessage(jid: string, body: string) {\n        this.getPlugin(MessagePlugin).sendMessage(jid, body);\n        this.messageSent$.next(this.getOrCreateContactById(jid));\n    }\n\n    loadCompleteHistory() {\n        return this.getPlugin(MessageArchivePlugin).loadAllMessages();\n    }\n\n    getPlugin<T extends ChatPlugin>(constructor: new(...args: any[]) => T): T {\n        for (const plugin of this.plugins) {\n            if (plugin.constructor === constructor) {\n                return plugin as T;\n            }\n        }\n        throw new Error('plugin not found: ' + constructor);\n    }\n\n    private onUnknownStanza(stanza: Stanza) {\n\n        let handled = false;\n\n        for (const plugin of this.plugins) {\n            try {\n                if (plugin.handleStanza(stanza)) {\n                    this.logService.debug(plugin.constructor.name, 'handled', stanza.toString());\n                    handled = true;\n                }\n            } catch (e) {\n                this.logService.error('error handling stanza in ', plugin.constructor.name, e);\n            }\n        }\n\n        if (!handled) {\n            this.logService.warn('unknown stanza <=', stanza.toString());\n        }\n\n    }\n\n    reconnectSilently(): void {\n        this.chatConnectionService.reconnectSilently();\n    }\n\n    reconnect() {\n        return this.logIn(this.lastLogInRequest);\n    }\n\n}\n","import {Injectable, NgZone} from '@angular/core';\nimport {Client, xml} from '@xmpp/client';\nimport {JID} from '@xmpp/jid';\nimport {Element} from 'ltx';\nimport {BehaviorSubject, Subject} from 'rxjs';\nimport {LogInRequest} from '../../../core/log-in-request';\nimport {IqResponseStanza, Stanza} from '../../../core/stanza';\nimport {LogService} from '../../log.service';\nimport {XmppClientFactoryService} from './xmpp-client-factory.service';\n\nexport type XmppChatStates = 'disconnected' | 'online' | 'reconnecting';\n\n/**\n * Implementation of the XMPP specification according to RFC 6121.\n * @see https://xmpp.org/rfcs/rfc6121.html\n * @see https://xmpp.org/rfcs/rfc3920.html\n * @see https://xmpp.org/rfcs/rfc3921.html\n */\n@Injectable()\nexport class XmppChatConnectionService {\n\n    public state$ = new BehaviorSubject<XmppChatStates>('disconnected');\n    public stanzaUnknown$ = new Subject<Stanza>();\n\n    /**\n     * User JID with resouce, not bare.\n     */\n    public userJid: JID;\n    private iqId = new Date().getTime();\n    private iqStanzaResponseCallbacks: { [key: string]: ((arg: any) => void) } = {};\n    public client: Client;\n\n    constructor(private logService: LogService,\n                private ngZone: NgZone,\n                private xmppClientFactoryService: XmppClientFactoryService) {}\n\n    public onOnline(jid: JID) {\n        this.logService.info('online =', 'online as', jid.toString());\n        this.userJid = jid;\n        this.state$.next('online');\n    }\n\n    public sendPresence() {\n        this.send(\n            xml('presence')\n        );\n    }\n\n    public send(content: any): PromiseLike<void> {\n        this.logService.debug('>>>', content);\n        try {\n            return this.client.send(content);\n        } catch (e) {\n            return Promise.reject(e);\n        }\n    }\n\n    public sendIq(request: Element): Promise<IqResponseStanza> {\n        return new Promise((resolve, reject) => {\n\n            request.attrs = {\n                id: this.getNextIqId(),\n                from: this.userJid.toString(),\n                ...request.attrs,\n            };\n            const {id} = request.attrs;\n\n            if (!request.attrs.type) {\n                throw new Error('iq stanza without type: ' + request.toString());\n            }\n\n            this.iqStanzaResponseCallbacks[id] = (response: IqResponseStanza) => {\n                if (response.attrs.type === 'result') {\n                    resolve(response);\n                } else {\n                    reject(response);\n                }\n            };\n\n            this.send(request).then(() => {}, (e) => {\n                this.logService.error('error sending iq', e);\n                delete this.iqStanzaResponseCallbacks[id];\n                reject(e);\n            });\n        });\n    }\n\n    public sendIqAckResult(id: string) {\n        this.send(\n            xml('iq', {from: this.userJid.toString(), id, type: 'result'})\n        );\n    }\n\n    public onStanzaReceived(stanza: Stanza) {\n\n        let handled = false;\n        if (this.isIqStanzaResponse(stanza)) {\n            const iqResponseCallback = this.iqStanzaResponseCallbacks[stanza.attrs.id];\n            if (iqResponseCallback) {\n                this.logService.debug('<<<', stanza.toString(), 'handled by callback', iqResponseCallback);\n                delete this.iqStanzaResponseCallbacks[stanza.attrs.id];\n                iqResponseCallback(stanza);\n                handled = true;\n            }\n        }\n\n        if (!handled) {\n            this.stanzaUnknown$.next(stanza);\n        }\n\n    }\n\n    private isIqStanzaResponse(stanza: Stanza): stanza is IqResponseStanza {\n        const stanzaType = stanza.attrs.type;\n        return stanza.name === 'iq' && (stanzaType === 'result' || stanzaType === 'error');\n    }\n\n    async logIn(logInRequest: LogInRequest) {\n        await this.ngZone.runOutsideAngular(async () => {\n            if (logInRequest.username.indexOf('@') >= 0) {\n                this.logService.warn('username should not contain domain, only local part, this can lead to errors!');\n            }\n\n            this.client = this.xmppClientFactoryService.client(logInRequest);\n\n            this.client.on('error', (err: any) => {\n                this.ngZone.run(() => {\n                    this.logService.error('chat service error =>', err.toString(), err);\n                });\n            });\n\n            this.client.on('status', (status: any, value: any) => {\n                this.ngZone.run(() => {\n                    this.logService.info('status update =', status, value ? JSON.stringify(value) : '');\n                    if (status === 'offline') {\n                        this.state$.next('disconnected');\n                    }\n                });\n            });\n\n            this.client.on('online', (jid: JID) => {\n                return this.ngZone.run(() => {\n                    return this.onOnline(jid);\n                });\n            });\n\n            this.client.on('stanza', (stanza: Stanza) => {\n                this.ngZone.run(() => {\n                    this.onStanzaReceived(stanza);\n                });\n            });\n\n            this.client.on('disconnect', (stanza: Stanza) => {\n                this.ngZone.run(() => {\n                    this.state$.next('reconnecting');\n                });\n            });\n\n            await this.client.start();\n        });\n    }\n\n    async logOut(): Promise<void> {\n        // TODO: move this to a presence plugin in a handler\n        this.logService.debug('logging out');\n        if (this.client) {\n            this.client.reconnect.stop();\n            try {\n                await this.send(xml('presence', {type: 'unavailable'}));\n            } catch (e) {\n                this.logService.error('error sending presence unavailable');\n            } finally {\n                this.client.stop();\n            }\n        }\n    }\n\n    getNextIqId() {\n        return '' + this.iqId++;\n    }\n\n    reconnectSilently() {\n        this.logService.warn('hard reconnect...');\n        this.state$.next('disconnected');\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {Client, client} from '@xmpp/client';\nimport {LogInRequest} from '../../../core/log-in-request';\n\n@Injectable()\nexport class XmppClientFactoryService {\n\n    client(logInRequest: LogInRequest): Client {\n        return client(logInRequest);\n    }\n\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {JID} from '@xmpp/jid';\nimport {Contact} from '../core/contact';\nimport {MultiUserChatPlugin, Room} from './adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {ChatService, ChatServiceToken} from './chat-service';\n\n@Injectable()\nexport class ChatBackgroundNotificationService {\n\n    private enabled = false;\n\n    constructor(@Inject(ChatServiceToken) protected chatService: ChatService) {\n        chatService.message$.subscribe((msg) => {\n            this.receivedDirectMessage(msg);\n        });\n        chatService.getPlugin(MultiUserChatPlugin).message$.subscribe(room => {\n            this.receivedGroupMessage(room);\n        });\n    }\n\n    enable() {\n        if (this.supportsNotification()) {\n            this.requestNotificationPermission();\n            this.enabled = true;\n        }\n    }\n\n    disable() {\n        this.enabled = false;\n    }\n\n    private requestNotificationPermission() {\n        const notification = Notification as any;\n        notification.requestPermission();\n    }\n\n    private receivedDirectMessage(contact: Contact) {\n        if (this.shouldDisplayNotification()) {\n            const notification = new Notification(contact.name, {body: contact.mostRecentMessage.body, icon: contact.avatar});\n            notification.addEventListener('click', () => {\n                window.focus();\n                notification.close();\n            });\n        }\n    }\n\n    private async receivedGroupMessage(room: Room) {\n        if (this.shouldDisplayNotification()) {\n            const message = room.mostRecentMessage.body;\n            const sender = room.mostRecentMessage.from;\n            const options = await this.customizeGroupMessage(sender, message, room);\n            const notification = new Notification(room.name, options);\n            notification.addEventListener('click', () => {\n                window.focus();\n                notification.close();\n            });\n        }\n    }\n\n    protected async customizeGroupMessage(sender: JID, message: string, room: Room) {\n        return {body: `${sender}: ${message}`};\n    }\n\n    private shouldDisplayNotification() {\n        const notification = Notification as any;\n        return this.enabled\n            && document.visibilityState === 'hidden'\n            && this.supportsNotification()\n            && notification.permission === 'granted';\n    }\n\n    private supportsNotification() {\n        return 'Notification' in window;\n    }\n}\n","import {Inject, Injectable} from '@angular/core';\nimport {BehaviorSubject} from 'rxjs';\nimport {filter} from 'rxjs/operators';\nimport {Contact} from '../core/contact';\nimport {ChatService, ChatServiceToken} from './chat-service';\n\nexport class ChatWindowState {\n    constructor(public contact: Contact,\n                public isCollapsed: boolean) {\n    }\n}\n\n/**\n * Used to open chat windows programmatically.\n */\n@Injectable()\nexport class ChatListStateService {\n\n    public openChats$ = new BehaviorSubject<ChatWindowState[]>([]);\n\n    constructor(@Inject(ChatServiceToken) private chatService: ChatService) {\n        this.chatService.state$\n            .pipe(filter(newState => newState === 'disconnected'))\n            .subscribe(() => {\n                this.openChats$.next([]);\n            });\n\n        this.chatService.contactRequestsReceived$.subscribe(contacts => {\n            for (const contact of contacts) {\n                this.openChat(contact);\n            }\n        });\n    }\n\n    private openChatCollapsed(contact: Contact) {\n        if (!this.isChatWithContactOpen(contact)) {\n            const openChats = this.openChats$.getValue();\n            const chatWindow = new ChatWindowState(contact, true);\n            const copyWithNewContact = [chatWindow].concat(openChats);\n            this.openChats$.next(copyWithNewContact);\n        }\n    }\n\n    public openChat(contact: Contact) {\n        this.openChatCollapsed(contact);\n        this.findChatWindowStateByContact(contact).isCollapsed = false;\n    }\n\n    public closeChat(contactToClose: Contact) {\n        const openChats = this.openChats$.getValue();\n        const index = this.findChatWindowStateIndexByContact(contactToClose);\n        if (index >= 0) {\n            const copyWithoutContact = openChats.slice();\n            copyWithoutContact.splice(index, 1);\n            this.openChats$.next(copyWithoutContact);\n        }\n    }\n\n    isChatWithContactOpen(contact: Contact): boolean {\n        return this.findChatWindowStateIndexByContact(contact) >= 0;\n    }\n\n    private findChatWindowStateIndexByContact(contact: Contact): number {\n        return this.openChats$.getValue()\n            .findIndex((chatWindowState) => chatWindowState.contact.equalsBareJid(contact));\n    }\n\n    private findChatWindowStateByContact(contact: Contact): ChatWindowState {\n        return this.openChats$.getValue()\n            .find((chatWindowState) => chatWindowState.contact.equalsBareJid(contact));\n    }\n}\n","import {Injectable} from '@angular/core';\nimport {BehaviorSubject} from 'rxjs';\nimport {Contact} from '../core/contact';\n\n/**\n * Used to determine if a message component for a given contact is open.\n */\n@Injectable({\n    providedIn: 'root'\n})\nexport class ChatMessageListRegistryService {\n\n    public openChats$ = new BehaviorSubject<Set<Contact>>(new Set());\n    private contactToOpenMessageListCount = new Map<Contact, number>();\n\n    constructor() {\n    }\n\n    isChatOpen(contact: Contact) {\n        return this.getOrDefault(contact, 0) > 0;\n    }\n\n    incrementOpenWindowCount(contact: Contact) {\n        this.contactToOpenMessageListCount.set(contact, this.getOrDefault(contact, 0) + 1);\n        const openWindowSet = this.openChats$.getValue();\n        openWindowSet.add(contact);\n        this.openChats$.next(openWindowSet);\n    }\n\n    decrementOpenWindowCount(contact: Contact) {\n        const newValue = this.getOrDefault(contact, 0) - 1;\n        if (newValue <= 0) {\n            this.contactToOpenMessageListCount.set(contact, 0);\n            const openWindowSet = this.openChats$.getValue();\n            openWindowSet.delete(contact);\n            this.openChats$.next(openWindowSet);\n        } else {\n            this.contactToOpenMessageListCount.set(contact, newValue);\n        }\n    }\n\n    private getOrDefault(contact: Contact, defaultValue: number) {\n        return this.contactToOpenMessageListCount.get(contact) || defaultValue;\n    }\n\n}\n","import {InjectionToken} from '@angular/core';\nimport {BehaviorSubject, Observable} from 'rxjs';\nimport {ChatAction} from '../components/chat-window/chat-window.component';\nimport {Contact} from '../core/contact';\nimport {LogInRequest} from '../core/log-in-request';\nimport {ChatPlugin} from '../core/plugin';\nimport {Translations} from '../core/translations';\n\nexport const ChatServiceToken = new InjectionToken('pazznetworkNgxChatService');\n\n/**\n * ChatService is your main API for using ngx-chat. Can be injected in your services like in the following example:\n *\n * ```\n * constructor(@Inject(ChatServiceToken) chatService: ChatService)\n * ```\n */\nexport interface ChatService {\n\n    /**\n     * Will emit the corresponding contact when a new message arrive.\n     */\n    message$: Observable<Contact>;\n\n    /**\n     * Lifecycle state machine. Starts in the state \"disconnected\". When logging in, the state will change to \"connecting\".\n     * Plugins may now initialize, for example load the contact list or request archived messages. When all plugins have completed the\n     * initialization, the new state will be 'online'.\n     */\n    state$: BehaviorSubject<'disconnected' | 'connecting' | 'online'>;\n\n    /**\n     * A BehaviorSubject of all known contacts. Contains for example Contacts that sent you a message.\n     * This does not represent your roster list.\n     */\n    contacts$: BehaviorSubject<Contact[]>;\n\n    /**\n     * A list of contacts to which the current user has accepted subscriptions to.\n     */\n    contactsSubscribed$: Observable<Contact[]>;\n\n    /**\n     * A list of contacts to which a subscription from the user is outstanding.\n     */\n    contactRequestsSent$: Observable<Contact[]>;\n\n    /**\n     * A list of contacts which have sent the user a subscription request.\n     */\n    contactRequestsReceived$: Observable<Contact[]>;\n\n    /**\n     * A list of contacts where the user is not subscribed to and neither a pending request is incoming or outgoing.\n     */\n    contactsUnaffiliated$: Observable<Contact[]>;\n\n    /**\n     * If set to true, debug information will be visible in the roster list.\n     */\n    enableDebugging: boolean;\n\n    /**\n     * The avatar of the user. Is used as src attribute of an img-element. Purely cosmetical. Should be set via the\n     * [userAvatar$]{@link ChatComponent#userAvatar$} @Input-attribute of {@link ChatComponent}.\n     */\n    userAvatar$: BehaviorSubject<string>;\n\n    /**\n     * The current translation. Do NOT write to this attribute, use the [translations]{@link ChatComponent#translations} @Input-attribute\n     * of {@link ChatComponent} instead.\n     */\n    translations: Translations;\n\n    /**\n     * The actions visible to users near to chat inputs, e.g. the send message button. Customize it for branding or to add\n     * new actions, e.g. for file uploads.\n     */\n    chatActions: ChatAction[];\n\n    /**\n     * Forces asynchronous reloading of your roster list from the server, {@link contacts$} will reflect this.\n     */\n    reloadContacts(): void;\n\n    /**\n     * Returns the contact with the given ID or undefined if no contact with the given ID is found. In case of XMPP it does not have to be\n     * bare, the search will convert it to a bare JID.\n     * @param id The ID of the contact.\n     * @returns Either the Contact or undefined.\n     */\n    getContactById(id: string): Contact | undefined;\n\n    /**\n     * Always returns a contact with the given ID. If no contact exists, a new one is created and announced via contacts$. In case of XMPP\n     * it does not have to be bare, the search will convert it to a bare JID.\n     * @param id The ID of the contact.\n     * @returns The new contact instance.\n     */\n    getOrCreateContactById(id: string): Contact;\n\n    /**\n     * Adds the given contact to the user roster. Will send a subscription request to the contact.\n     * @param identifier The ID of the contact.\n     */\n    addContact(identifier: string): void;\n\n    /**\n     * Removes the given cotnact from the user roster. Will cancel a presence subscription from the user to the contact and will retract\n     * accepted subscriptions from the contact to the user.\n     * @param identifier The ID of the contact.\n     */\n    removeContact(identifier: string): void;\n\n    /**\n     * Logs the user in. Will modify state$ accordingly. If login fails, state will stay in 'disconnected'.\n     */\n    logIn(logInRequest: LogInRequest): void;\n\n    /**\n     * Disconnects from the server, clears contacts$, sets state$ to 'disconnected'.\n     */\n    logOut(): void;\n\n    /**\n     * Sends a given message to a given contact.\n     * @param id The id of the contact to which the message shall be sent.\n     * @param body The message content.\n     */\n    sendMessage(id: string, body: string): void;\n\n    /**\n     * Requests all archived messages for all contacts from the server.\n     */\n    loadCompleteHistory(): Promise<void>;\n\n    /**\n     * Returns the plugin instance for the given constructor\n     * @param constructor The plugin constructor, e.g. {@link RosterPlugin}\n     */\n    getPlugin<T extends ChatPlugin>(constructor: new(...args: any[]) => T): T;\n\n    /**\n     * Tries to transparently (= without the user noticing) reconnect to the chat server.\n     */\n    reconnectSilently(): void;\n\n    /**\n     * Tries to reconnect with the same credentials the user logged in last.\n     */\n    reconnect(): void;\n\n}\n","import {Injectable} from '@angular/core';\nimport {Contact} from '../core/contact';\nimport {LogService} from './log.service';\n\n@Injectable()\nexport class ContactFactoryService {\n\n    constructor(private logService: LogService) {\n    }\n\n    createContact(jidPlain: string,\n                  name?: string,\n                  avatar?: string) {\n        if (!name) {\n            name = jidPlain;\n        }\n        return new Contact(jidPlain, name, this.logService, avatar);\n    }\n\n}\n","import {Injectable} from '@angular/core';\n\nexport enum LogLevel {\n    Disabled = 0,\n    Error,\n    Warn,\n    Info,\n    Debug,\n}\n\n@Injectable()\nexport class LogService {\n\n    public logLevel = LogLevel.Info;\n    public writer = console;\n    public messagePrefix = () => 'ChatService:';\n\n    public error(...messages: any[]) {\n        if (this.logLevel >= LogLevel.Error) {\n            this.writer.error(this.messagePrefix(), ...messages);\n        }\n    }\n\n    public warn(...messages: any[]) {\n        if (this.logLevel >= LogLevel.Warn) {\n            this.writer.warn(this.messagePrefix(), ...messages);\n        }\n    }\n\n    public info(...messages: any[]) {\n        if (this.logLevel >= LogLevel.Info) {\n            this.writer.info(this.messagePrefix(), ...messages);\n        }\n    }\n\n    public debug(...messages: any[]) {\n        if (this.logLevel >= LogLevel.Debug) {\n            this.writer.log(this.messagePrefix(), ...messages);\n        }\n    }\n\n}\n","import * as io from 'socket.io-client';\nimport { Observable, from } from 'rxjs';\n\nexport class SocketIOService {\n    private url = '/';\n    private socket;\n    private connected = false;\n    public connectedusers: any;\n\n    constructor() {\n        this.socket = io(this.url);\n    }\n\n    SetUserName(username) {\n        this.socket.emit('add user', username);\n        return Observable.create((observer) => {\n            this.socket.on('logged-user', (data) => {\n                this.connected = true;\n                observer.next(data);\n            });\n        });\n    }\n    public RemoveUser() {\n        this.socket.emit('disconnect');\n    }\n\n    public BroadCastMessage(message) {\n        this.socket.emit('new-broadcast-message', message);\n    }\n\n    public SendMessage(message, from, to) {\n        //this.socket.emit('new-message', message);\n        this.socket.emit('new-message', {\n            toid: to,\n            message: message,\n            fromname: from\n        });\n    }\n\n    public GetMessages() {\n        return Observable.create((observer) => {\n            this.socket.on('new-message', (message) => {\n                observer.next(message);\n            });\n        });\n    }\n    public GetConnectedUsers() {\n        return Observable.create((observer) => {\n            this.socket.on('client-list', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    /***\n     * Section Video call\n     * following requests are used for video call\n     */\n\n    public VideoCallRequest(from, to) {\n        this.socket.emit('video-call', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public AudioCallRequest(from, to) {\n        this.socket.emit('audio-call', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public OnVideoCallRequest() {\n        return Observable.create((observer) => {\n            this.socket.on('video-call', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public OnAudioCallRequest() {\n        return Observable.create((observer) => {\n            this.socket.on('audio-call', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public VideoCallAccepted(from, to) {\n        this.socket.emit('video-call-accept', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public AudioCallAccepted(from, to) {\n        this.socket.emit('audio-call-accept', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public OnVideoCallAccepted() {\n        return Observable.create((observer) => {\n            this.socket.on('video-call-accept', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public OnAudioCallAccepted() {\n        return Observable.create((observer) => {\n            this.socket.on('audio-call-accept', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public BusyNow() {\n        this.socket.emit('busy-user');\n    }\n    public GetBusyUsers() {\n        this.socket.emit('get-busy-user');\n        return Observable.create((observer) => {\n            this.socket.on('get-busy-user', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public EndVideoCall(from, to, toname) {\n        this.socket.emit('end-video-call', {\n            fromname: from,\n            toid: to,\n            toname: toname\n        });\n    }\n    public EndAudioCall(from, to, toname) {\n        this.socket.emit('end-audio-call', {\n            fromname: from,\n            toid: to,\n            toname: toname\n        });\n    }\n    public OnVideoCallEnded() {\n        this.socket.emit('get-busy-user');\n        return Observable.create((observer) => {\n            this.socket.on('video-call-ended', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public OnAudioCallEnded() {\n        this.socket.emit('get-busy-user');\n        return Observable.create((observer) => {\n            this.socket.on('audio-call-ended', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public VideoCallRejected(from, to) {\n        this.socket.emit('video-call-reject', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public OnVideoCallRejected() {\n        return Observable.create((observer) => {\n            this.socket.on('video-call-reject', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    public AudioCallRejected(from, to) {\n        this.socket.emit('audio-call-reject', {\n            fromname: from,\n            toid: to\n        });\n    }\n    public OnAudioCallRejected() {\n        return Observable.create((observer) => {\n            this.socket.on('audio-call-reject', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n    /**\n     *\n     * @param candidate or @param description for video call\n     * need to send remote user id\n     */\n    public SendCallRequest(val, type, uid) {\n        var data;\n        if (type == 'desc') {\n            data = {\n                toid: uid,\n                desc: val\n            }\n        } else {\n            data = {\n                toid: uid,\n                candidate: val\n            }\n        }\n        this.socket.emit('call-request', data);\n    }\n    public ReceiveCallRequest() {\n        return Observable.create((observer) => {\n            this.socket.on('call-request', (data) => {\n                observer.next(data);\n            });\n        });\n    }\n}\n","import {Component, Inject} from '@angular/core';\nimport {ChatService, ChatServiceToken} from '../../projects/proxym/ngx-chat/src/lib/services/chat-service';\nimport {ChatBackgroundNotificationService} from '../../projects/proxym/ngx-chat/src/lib/services/chat-background-notification.service';\nimport {ChatListStateService} from '../../projects/proxym/ngx-chat/src/lib/services/chat-list-state.service';\nimport {ContactFactoryService} from '../../projects/proxym/ngx-chat/src/lib/services/contact-factory.service';\nimport {LogInRequest} from '../../projects/proxym/ngx-chat/src/lib/core/log-in-request';\nimport {LogLevel, LogService} from '../../projects/proxym/ngx-chat/src/lib/services/log.service';\nimport {MultiUserChatPlugin} from '../../projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/multi-user-chat.plugin';\nimport {RegistrationPlugin} from '../../projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/registration.plugin';\nimport {UnreadMessageCountPlugin} from '../../projects/proxym/ngx-chat/src/lib/services/adapters/xmpp/plugins/unread-message-count.plugin';\nimport {MatSnackBar} from '@angular/material/snack-bar';\nimport {SocketIOService} from 'projects/proxym/ngx-chat/src/lib/services/socket.io.service';\nimport {Orientation} from '@ngmodule/material-carousel';\n\n@Component({\n    selector: 'app-root',\n    templateUrl: './app.component.html',\n    styleUrls: ['./app.component.css']\n})\nexport class AppComponent {\n    public domain: string;\n    public service: string;\n    public password: string;\n    public username: string;\n    public otherJid: any;\n    public loggedUserName;\n    public multiUserChatPlugin: MultiUserChatPlugin;\n    public unreadMessageCountPlugin: UnreadMessageCountPlugin;\n    public registrationMessage: string;\n\n\n    public slidesList = new Array<never>(5);\n    public showContent = false;\n    // public listKeyManager: ListKeyManager<any>;\n    public timings = '300ms ease-in';\n    public autoplay = true;\n    public interval = 4000;\n    public loop = true;\n    public hideArrows = true;\n    public hideIndicators = false;\n    // public color: ThemePalette = 'accent';\n    public maxWidth = 'auto';\n    public proportion = 10;\n    public logi = false;\n    hide = true;\n    public images = [\n        {\n            image: 'assets/video_call.png',\n        } ];\n\n    public slides: any = this.chunk(this.images, 3);\n\n\n    public hideOverlay = false;\n    public useKeyboard = true;\n    public useMouseWheel = false;\n    public orientation: Orientation = 'ltr';\n    public log: string[] = [];\n\n    constructor(@Inject(ChatServiceToken) public chatService: ChatService,\n                private contactFactory: ContactFactoryService,\n                private logService: LogService,\n                private chatListStateService: ChatListStateService,\n                private snackBar: MatSnackBar,\n                private socketIOService: SocketIOService,\n                chatBackgroundNotificationService: ChatBackgroundNotificationService) {\n        const contactData: any = JSON.parse(localStorage.getItem('data')) || {};\n        this.logService.logLevel = LogLevel.Debug;\n        this.domain = contactData.domain;\n        this.service = contactData.service;\n        this.password = contactData.password;\n        this.username = contactData.username;\n\n        this.chatService.state$.subscribe((state) => this.stateChanged(state));\n        this.multiUserChatPlugin = this.chatService.getPlugin(MultiUserChatPlugin);\n        this.unreadMessageCountPlugin = this.chatService.getPlugin(UnreadMessageCountPlugin);\n\n        chatBackgroundNotificationService.enable();\n        // @ts-ignore\n        window.chatService = chatService;\n    }\n\n\n    public onChange(index: number) {\n        this.log.push(`MatCarousel#change emitted with index ${index}`);\n    }\n    /* public get currentIndex(): number {\n         if (this.listKeyManager) {\n             return this.listKeyManager.activeItemIndex;\n         }\n\n         return 0;\n     }*/\n\n    chunk(arr, chunkSize) {\n        let R = [];\n        for (let i = 0, len = arr.length; i < len; i += chunkSize) {\n            R.push(arr.slice(i, i + chunkSize));\n        }\n        return R;\n    }\n\n\n\n\n\n\n    AddUser() {\n        this.socketIOService.SetUserName(this.loggedUserName)\n            .subscribe(data => {\n                if (data.username) {\n                    // user added\n                }\n            });\n    }\n\n    onLogin() {\n        const logInRequest: LogInRequest = {\n            domain: 'localhost',\n            service: 'wss://192.168.43.120:5280/xmpp',\n            password: this.password,\n            username: this.username,\n        };\n        localStorage.clear();\n        sessionStorage.clear();\n        localStorage.setItem('data', JSON.stringify(logInRequest));\n        sessionStorage.setItem('username', this.username);\n        this.chatService.logIn(logInRequest);\n        this.loggedUserName = sessionStorage.getItem('username');\n        this.AddUser();\n        this.logi = true;\n    }\n\n    onLogout() {\n        this.chatService.logOut();\n        this.socketIOService.RemoveUser();\n        sessionStorage.clear();\n        localStorage.clear();\n        this.logi = false;\n        //location.reload();\n\n\n    }\n\n    Logout() {\n        this.socketIOService.RemoveUser();\n        sessionStorage.clear();\n        localStorage.clear();\n        location.reload();\n    }\n\n    async onRegister() {\n        this.registrationMessage = 'registering ...';\n        try {\n            await this.chatService.getPlugin(RegistrationPlugin).register(\n                this.username,\n                this.password,\n                this.service,\n                this.domain\n            );\n            this.registrationMessage = 'registration successful';\n        } catch (e) {\n            this.registrationMessage = 'registration failed: ' + e.toString();\n            throw e;\n        }\n\n    }\n\n    onAddContact() {\n        this.chatService.addContact(this.otherJid);\n    }\n\n    onRemoveContact() {\n        this.chatService.removeContact(this.otherJid);\n    }\n\n    onOpenChat() {\n        this.chatListStateService.openChat(this.chatService.getOrCreateContactById(this.otherJid));\n    }\n\n    private async stateChanged(state: 'disconnected' | 'connecting' | 'online') {\n        console.log('state changed!', state);\n    }\n\n    onReconnect() {\n        this.chatService.reconnect();\n    }\n\n}\n","<div class=\"container\">\n<p *ngIf=\"logi == false\">This page will be replaced by your application login page </p>\n <p *ngIf=\"logi\">This page will be replaced by your application home page </p>\n    <div *ngIf=\"logi == false\">\n    <div class=\"form-group\">\n        <div>\n            Username\n        </div>\n        <div>\n            <input [(ngModel)]=\"username\" class=\"form-control\" name=\"username\" placeholder=\"username\" type=\"text\"/>\n        </div>\n    </div>\n\n    <div class=\"form-group\">\n        <div>\n            Password\n        </div>\n        <div>\n            <input name=\"password\" [(ngModel)]=\"password\" class=\"form-control\" type=\"password\" placeholder=\"Password\"/>\n        </div>\n    </div>\n    </div>\n    <div>\n        <button *ngIf=\"logi == false\" name=\"login\" (click)=\"onLogin()\">Log in</button>\n        <button *ngIf=\"logi\" name=\"logout\" (click)=\"onLogout()\">Log out</button>\n       <!-- <button (click)=\"onRegister()\" name=\"register\">Register</button>-->\n\n    </div>\n  <!--  <div *ngIf=\"registrationMessage\">\n        <p>{{registrationMessage}}</p>\n    </div>-->\n\n\n</div>\n\n\n<ngx-chat rosterState=\"shown\"></ngx-chat>\n\n\n\n","import {NgModule} from '@angular/core';\nimport {FormsModule} from '@angular/forms';\nimport {BrowserModule} from '@angular/platform-browser';\nimport {BrowserAnimationsModule} from '@angular/platform-browser/animations';\nimport {RouterModule} from '@angular/router';\nimport {NgxChatModule} from '../../projects/proxym/ngx-chat/src/lib/ngx-chat.module';\nimport {NgbModule} from '@ng-bootstrap/ng-bootstrap';\nimport {AppComponent} from './app.component';\nimport {MatSelectModule} from '@angular/material/select';\nimport {MatSnackBarModule} from '@angular/material/snack-bar';\nimport {MatCarouselModule} from '@ngmodule/material-carousel';\nimport { CarouselModule, WavesModule } from 'angular-bootstrap-md';\nimport { IconsModule } from '../../projects/proxym/ngx-chat/src/lib/components/icons/icons.module';\nimport { PickerModule } from '@ctrl/ngx-emoji-mart';\nimport { MatVideoModule } from 'mat-video';\n\n@NgModule({\n    declarations: [\n        AppComponent,\n    ],\n    imports: [\n        BrowserModule,\n        BrowserAnimationsModule,\n        NgxChatModule.forRoot(),\n        FormsModule,\n        RouterModule.forRoot([]),\n        MatSelectModule,\n        NgbModule,\n        MatSnackBarModule,\n        MatCarouselModule,\n        CarouselModule,\n        WavesModule,\n        IconsModule,\n        PickerModule,\n        MatVideoModule\n    ],\n    providers: [],\n    bootstrap: [AppComponent]\n})\nexport class AppModule {\n}\n","module.exports = __webpack_public_path__ + \"accep.png\";","module.exports = __webpack_public_path__ + \"available.png\";","module.exports = __webpack_public_path__ + \"away.png\";","module.exports = __webpack_public_path__ + \"click.png\";","module.exports = __webpack_public_path__ + \"decli.png\";","module.exports = __webpack_public_path__ + \"dnd.png\";","module.exports = __webpack_public_path__ + \"file.png\";","module.exports = __webpack_public_path__ + \"file_attach.png\";","module.exports = __webpack_public_path__ + \"received.png\";","module.exports = __webpack_public_path__ + \"seen.png\";","module.exports = __webpack_public_path__ + \"sent.png\";","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build ---prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * In development mode, to ignore zone related error stack frames such as\n * `zone.run`, `zoneDelegate.invokeTask` for easier debugging, you can\n * import the following file, but please comment it out in production mode\n * because it will have performance impact when throw error\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"sourceRoot":"webpack:///"}